{"version":3,"sources":["@fake-db/mock.js","@lodash/index.js","@fake-db/db/auth-db.js","@fake-db/index.js","setup/progressbar.js","components/MindMapBox/index.js","components/layout/Sidebar/config/index.js","services/jwtService/index.js","services/jwtService/jwtService.js","store/actions/auth.js","store/selectors/auth.js","components/layout/Sidebar/index.js","containers/Layout/index.js","components/layout/AccountSidebar/config/index.js","components/layout/AccountSidebar/index.js","containers/Layout/account.js","containers/Dashboard/index.js","../../src/controller.ts","../../src/types/index.ts","../../src/plugins/core.ts","../../src/utils/index.ts","../../src/models/block.ts","../../src/models/topic.ts","../../src/models/utils/index.ts","../../src/models/modifiers/modifiers.ts","../../src/configs/theme/default-theme.ts","../../src/configs/theme/types.ts","../../src/models/config.ts","../../src/models/model.ts","../../src/models/modifiers.ts","../../src/components/simple-text-editor.tsx","../../src/components/topic-content-editor.tsx","../../src/components/topic-desc-editor.tsx","../../src/simple-text-editor-plugin.tsx","../../src/components/common/base-widget.tsx","../../src/components/common/drag-scroll-widget.tsx","../../src/components/common/save-ref.tsx","../../src/components/common/styled.tsx","../../src/plugins/event.ts","../../src/utils/icon.tsx","../../src/utils/keys.ts","../../src/utils/events.ts","../../src/utils/file.ts","../../src/utils/css.ts","../../src/plugins/hotkey.ts","../../src/plugins/operation.ts","../../src/plugins/react/components/topic-context-menu.tsx","../../src/plugins/react/context-menu.tsx","../../src/plugins/react/drag-and-drop.tsx","../../src/plugins/react/components/editor-root-breadcrumbs.tsx","../../src/plugins/react/components/topic-drop-effect.tsx","../../src/plugins/react/components/mind-drag-scroll-widget.tsx","../../src/plugins/react/components/modals.tsx","../../src/plugins/react/components/root-widget.tsx","../../src/plugins/react/components/topic-collapse-icon.tsx","../../src/plugins/react/components/topic-content.tsx","../../src/plugins/react/components/root-sublinks.tsx","../../src/plugins/react/components/topic-content-widget.tsx","../../src/plugins/react/components/topic-desc.tsx","../../src/plugins/react/components/topic-highlight.tsx","../../src/plugins/react/components/topic-sub-links.tsx","../../src/plugins/react/components/view-port-util/view-port-viewer.tsx","../../src/plugins/react/rendering.tsx","../../src/plugins/react/components/topic-widget.tsx","../../src/plugins/react/drawer.tsx","../../src/plugins/react/theme.tsx","../../src/plugins/react/components/right-top-panel/components.tsx","../../src/plugins/react/components/right-top-panel/right-top-panel.tsx","../../src/plugins/react/components/right-top-panel/styled.tsx","../../src/plugins/react/components/style-editor/border-style-editor.tsx","../../src/plugins/react/components/style-editor/clear-all-custom-style.tsx","../../src/plugins/react/components/style-editor/link-style-editor.tsx","../../src/plugins/react/components/style-editor/text-style-editor.tsx","../../src/plugins/react/components/style-editor/style-editor.tsx","../../src/utils/blueprint.ts","../../src/plugins/react/components/style-editor/padding-style-editor.tsx","../../src/plugins/react/components/theme-editor/topic-theme-editor.tsx","../../src/plugins/react/components/theme-editor/theme-editor.tsx","../../src/plugins/react/right-top-panel-plugin.tsx","../../src/plugins/react/utils.tsx","../../src/plugins/react/index.ts","../../src/plugins/style.ts","../../src/plugins/index.ts","../../src/components/diagram.tsx","../../src/plugins/layout.tsx","../../src/plugins/get-value.ts","../../src/components/rich-text-editor.tsx","../../src/markdown-serializer.ts","../../src/rich-text-editor-plugin.tsx","../../src/json-serializer-plugin.ts","../../src/themes/theme-random-color-square.ts","../../src/themes/theme1.ts","../../src/themes/theme2.ts","../../src/themes/theme3.ts","../../src/themes/theme4.ts","../../src/topic-block-topology.tsx","../../src/utils.ts","../../src/tools-config.ts","../../src/topology-diagram.tsx","../../src/topology-diagram-utils.tsx","../../src/topology-drawer.tsx","../../src/plugin.tsx","../../src/topic-reference/utils.ts","../../src/topic-reference/add-reference-topic-panel.tsx","../../src/topic-reference/ext-data-reference.ts","../../src/topic-reference/op-function.ts","../../src/topic-reference/reference-topic-thumbnail.tsx","../../src/topic-reference/reference-topic-list.tsx","../../src/topic-reference/topic-ext-reference.tsx","../../src/topic-reference/topic-reference-checkbox.tsx","../../src/search/search-panel.tsx","components/mindmap/toolbar/TopBar.js","utils/index.js","../../src/search/utils.ts","components/mindmap/toolbar/toolbar.js","components/mindmap/index.js","../../src/theme-selector-plugin.ts","../../src/topic-reference/topic-reference-plugin.tsx","../../src/search/search-plugin.tsx","containers/MindMap/index.js","containers/Account/General.js","containers/Account/Password.js","containers/Account/Settings.js","containers/Account/index.js","components/layout/Responsive/index.js","components/auth/Login.js","components/auth/Register.js","containers/NotReady.js","setup/routes.js","auth/Auth.js","auth/Authorization.js","store/reducers/auth.js","store/reducers/index.js","store/index.js","setup/theme.js","App.js","serviceWorker.js","index.js","images/default.jpg","images/theme1.jpg","images/theme2.jpg","images/theme3.jpg","images/theme4.jpg"],"names":["mock","require","_","__","runInContext","mixin","setIn","state","name","value","setWith","clone","process","JWT_SECRET","authDB","users","uuid","from","password","role","data","settings","layout","style","config","scroll","navbar","display","folded","position","toolbar","footer","mode","customScrollbars","theme","main","shortcuts","onGet","reply","JSON","parse","email","user","cloneDeep","find","_user","error","displayName","stringify","id","access_token","e","onAny","passThrough","TopBarProgress","barColors","shadowBlur","ProgressBar","children","useState","progress","setProgress","prevLoc","setPrevLoc","location","useLocation","useEffect","pathname","color","styled","Box","justifyContent","background","NavBar","shouldForwardProp","prop","open","padding","label","link","icon","withStyles","root","minHeight","fontSize","borderRadius","cursor","marginBottom","backgroundColor","palette","primary","secondary","contrastText","pointerEvents","light","textDecoration","withTheme","classes","map","item","ListItem","button","key","component","NavLink","to","className","classNames","onClick","ListItemIcon","paddingRight","ListItemText","primaryTypographyProps","fontWeight","jwtService","setInterceptors","axios","interceptors","response","use","err","Promise","resolve","reject","status","__isRetryRequest","emit","setSession","handleAuthentication","getAccessToken","isAuthTokenValid","signInWithEmailAndPassword","get","then","signInWithToken","localStorage","setItem","defaults","headers","common","removeItem","logout","window","getItem","this","_events","event_name","callback","push","events","index","indexOf","splice","forEach","event","actionLogout","dispatch","type","actionSetUserData","selectAuthItem","auth","openedMixin","width","transition","transitions","create","easing","sharp","duration","enteringScreen","overflowX","closedMixin","leavingScreen","spacing","breakpoints","up","DrawerHeader","alignItems","mixins","AppBar","MaterialAppBar","zIndex","drawer","marginLeft","Drawer","MaterialDrawer","flexShrink","whiteSpace","boxSizing","SideBar","props","useTheme","React","setOpen","currentRoute","search","routes","path","i","length","route","child_route","CssBaseline","boxShadow","Toolbar","borderTopLeftRadius","flexDirection","IconButton","aria-label","edge","marginRight","height","Typography","variant","noWrap","AccountMenu","xmlns","viewBox","fill","fillRule","transform","d","opacity","currentUser","useSelector","useDispatch","navigate","useNavigate","anchorEl","setAnchorEl","Boolean","handleClose","textAlign","minWidth","Tooltip","title","currentTarget","size","ml","aria-controls","undefined","aria-haspopup","aria-expanded","Avatar","alt","src","photoURL","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","onClose","PaperProps","elevation","overflow","filter","marginTop","content","top","right","bgcolor","border","margin","lineHeight","letterSpacing","textOverflow","MenuItem","Divider","MainLayout","active","disabled","left","AccountSidebar","matches","useMediaQuery","flex","Button","mt","useStyles","makeStyles","flexGrow","drawerHeader","Item","typography","body2","text","paper","alpha","dark","action","selectedOpacity","white","CustomizedMenus","my","Dashboard","currentPath","Grid","container","xs","xl","sm","md","stroke","strokeLinecap","strokeLinejoin","strokeWidth","x","y","rx","DiagramLayoutType","options","plugins","TopicDirection","TopicVisualLevel","BlockType","FocusMode","blocks","subKeys","log","model","topic","topicKey","withMutations","m","set","Map","readOnly","allowUndo","layoutDir","LEFT_AND_RIGHT","randomColor","highlightColor","marginH","marginV","contentStyle","linkStyle","lineRadius","lineType","lineWidth","rootTopic","subLinkStyle","lineColor","primaryTopic","borderWidth","borderStyle","normalTopic","obj","parentKey","collapse","relations","topics","extData","rootTopicKey","editorRootTopicKey","focusKey","focusMode","formatVersion","zoomFactor","Content","div","onMouseDown","stopPropagation","onMouseMove","onKeyDown","_handleClick","contains","target","onClickOutSide","rootRef","saveRef","ref","initState","React.PureComponent","onChange","setState","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","getCustomizeProps","getContent","block","deserialize","render","getRefKeyFunc","placeholder","editorProps","bind","contentProps","React.createElement","autoFocus","contentEditorRefKey","nativeEvent","ctrlKey","code","save","getTopic","getBlock","editingContentKey","controller","run","opType","blockType","getTopicTitle","maxLength","substr","renderTopicContentEditor","renderTopicDescEditor","isBlockEmpty","next","serializeBlockData","serialize","React.Component","bigView","deltaLeft","mouseKey","ele","observers","activeModalProps","eventListeners","input","rect","scale","center","elCenter","relCenter","OpType","undoStack","deleteRef","shortcut","ev","curve","renderPartTopics","partTopics","cancelEvent","TopicContent","needRelocation","React.Fragment","SettingItem","BorderStyleEditor","visualLevel","subTopics","getRef","links","highlight","dropEffect","element","NodeContent","editingDescKey","richEditorProps","editorValue","nodeContentProps","BaseWidget","markdownSerializer","themeRandomColorSquare","TopicBlockTopology","isEditing","iconProps","iconClassName","tabIndex","TopicBlockIcon","ToolsConfig","group","paddingLeft","paddingTop","paddingBottom","iconFamily","iconColor","textMaxLine","image","is3D","z","zRotate","fillStyle","iconSize","strokeStyle","font","fontFamily","rectInParent","rotate","textBaseline","Root","Canvas","Tools","ToolTitle","ToolbarButtons","toolsConfig","iconfont","canvasOptions","handleContextMenu","preventDefault","onMessage","diagramUtil","topology","setCanvasData","canvasRegister","on","openData","componentDidUpdate","onDrag","node","dataTransfer","setData","renderTools","btn","draggable","onDragStart","onContextMenu","Btn","tooltip","TOP","ICON","span","canvasData","onClickResetZoom","getTopology","scaleTo","deleteConfirm","deleteAlertProps","isOpen","cancelButtonText","onConfirm","onCancel","Math","floor","Icon","IconName","DiagramWrapper","TopologyDrawer","diagramProps","utilProps","hasBackdrop","backdropClassName","backdropProps","canOutsideClickClose","isCloseButtonShown","topologyData","onDoubleClick","startEditingTopology","setBlockData","focusTopic","renderTopicBlock","renderTopicBlockTopology","renderDrawer","topoProps","customizeTopicContextMenu","getOpMap","opMap","ZIndex","AddReferenceTopicPanel","Flex","referenceKeys","opArray","defaultReferenceRecord","keyList","dataMap","defaultExtDataReferenceRecord","reference","getReferenceKeys","has","toArray","getReferencedKeys","res","v","k","includes","setReferenceTopicKeys","getExtDataItem","ExtDataReference","referenceRecord","ReferenceRecord","ButtonPlace","ReferenceTopicThumbnail","refKey","refType","removeHandler","setDeleteConfirm","getValue","PropKey","Group","GroupList","GroupTitle","GotoBtn","ReferenceTopicList","referenceGroup","thumbProps","delete","referencedKeys","referencedGroup","currentTopic","TopicExtReference","refRecord","tooltipProps","interactionKind","CLICK","hoverOpenDelay","TopicReferenceCheckbox","selectedTopicKeys","a","checked","setChecked","checkboxProps","add","StyledCheckbox","NavOmniBar","ofType","StyledNavOmniBar","TopicTitle","StyledPopover","Tip","TipContent","INPUT_PROPS","SearchPanel","setSearchWord","navigateToTopic","sections","getAllSections","inputProps","itemListPredicate","query","items","toLowerCase","itemRenderer","section","needTip","sectionTitle","titleProps","titleEl","popoverProps","HOVER_TARGET_ONLY","resetOnSelect","IconBtn","other","TopBar","match","setMatch","diagram","onClickUndo","onClickRedo","getDiagramProps","alignContent","MapMenu","startIcon","browserOpenFile","txt","openNewModel","json","jsonStr","url","encodeURIComponent","filename","createElement","href","download","click","downloadFile","LayoutMenu","ThemeMenu","themes","defaultThemeImg","theme1Img","theme2Img","theme3Img","theme4Img","themeKey","layoutDirs","LEFT_TO_RIGHT","RIGHT_TO_LEFT","dir","sx","mr","RichTextEditorPlugin","ThemeSelectorPlugin","Set","startSetReferenceTopics","whiteList","beforeOpFunction","allDeleteKeys","getAllSubTopicKeys","deleteKey","updateIn","renderDiagramCustomize","panelProps","renderTopicContentOthers","EXT_KEY_TOPIC_REFERENCE","checkBoxProps","checkbox","renderTopicExtReference","clearSelectedReferenceKeys","clear","getSelectedReferenceKeys","Array","deserializeExtDataItem","extDataKey","extDataItem","extDataReference","update","TopicReferencePlugin","setSearchWorld","s","customizeHotKeys","hotKeys","globalHotKeys","combo","searchPanelProps","SearchPlugin","TopologyDiagramPlugin","serializeModel","nextRes","valueSeq","deserializeModel","merge","serializeExtData","deserializeExtData","serializeExtDataItem","toJS","serializeConfig","deserializeConfig","serializeTopic","Mindmap","diagramRef","initModel","rootKey","createKey","Model","generateSimpleModel","devicehub","format","emoji","canUndo","canRedo","toolbarProps","renderToolbar","renderDiagram","Component","General","TextField","Password","Settings","p","noValidate","autoComplete","TabPanel","hidden","aria-labelledby","a11yProps","BasicTabs","setValue","borderBottom","borderColor","Tabs","newValue","centered","Tab","wrapped","Responsive","nav","flexWrap","maxWidth","showSignup","flexFlow","loginGoogle","borderEadius","rememberButton","loginButton","Copyright","align","Date","getFullYear","SignInSide","formRef","useRef","showPassword","setShowPassword","recaptcha","setRecaptcha","snackPack","setSnackPack","snackOpen","setSnackOpen","messageInfo","setMessageInfo","loginResult","validationSchema","Yup","shape","required","formOptions","resolver","yupResolver","useForm","register","handleSubmit","errors","formState","onResolved","catch","actionLogin","prev","message","getTime","slice","handleSnackClose","reason","handleSnackExited","loginLayer","InputProps","startAdornment","InputAdornment","helperText","endAdornment","bodylayer","onSubmit","execute","Checkbox","ariaLabel","getLoginLayout","isMobile","backgroundImage","backgroundRepeat","t","grey","backgroundSize","backgroundPosition","Paper","square","secureKey","sitekey","Snackbar","autoHideDuration","TransitionProps","onExited","Fragment","Alert","severity","signupButton","SignUp","min","acceptTerms","oneOf","registerLayer","registerRequest","NotReady","Element","list","useRoutes","Auth","onAutoLogin","setUserData","checkingJwt","onAutoLogout","init","off","connect","bindActionCreators","Actions","Authorization","accessGranted","nextProps","nextState","redirect","routeState","redirectUrl","withRouter","token","success","newstate","console","reducers","combineReducers","store","createStore","applyMiddleware","thunk","blue","pink","createTheme","defaultTheme","generateClassName","createGenerateClassName","productionPrefix","App","ThemeProvider","StylesProvider","history","createBrowserHistory","hostname","debug","join","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/chunk-blinkmind.6cd4e7b6.chunk.js","sourcesContent":["const MockAdapter = require('axios-mock-adapter');\r\nconst axios = require('axios');\r\nconst mock = new MockAdapter(axios);\r\nexport default mock;","import __ from 'lodash';\n\n/**\n * You can extend Lodash with mixins\n * And use it as below\n * import _ from '@lodash'\n */\nconst _ = __.runInContext();\n\n_.mixin({\n    // Immutable Set for setting state\n    setIn: (state, name, value) => {\n        return _.setWith(_.clone(state), name, value, _.clone);\n    }\n});\n\nexport default _;\n","import mock from './../mock';\r\nimport _ from '@lodash';\r\n// import jwt from 'jsonwebtoken';\r\n\r\nconst jwtConfig = {\r\n    \"secret\": \"some-secret-code-goes-here\",\r\n    \"expiresIn\": \"2 days\" // A numeric value is interpreted as a seconds count. If you use a string be sure you provide the time units (days, hours, etc)\r\n};\r\nconst jwt_secret = process.env.JWT_SECRET;\r\n\r\nfunction generateGUID() {\r\n    function S4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\r\n    }\r\n\r\n    return S4() + S4();\r\n}\r\n\r\nlet authDB = {\r\n    users: [\r\n        {\r\n            uuid: 'XgbuVEXBU5gtSKdbQRP1Zbbby1i1',\r\n            from: 'custom-db',\r\n            password: \"admin\",\r\n            role: \"admin\",\r\n            data: {\r\n                'displayName': 'Abbott Keitch',\r\n                'photoURL': '/assets/images/avatars/Abbott.jpg',\r\n                'email': 'admin@admin.com',\r\n                settings: {\r\n                    layout: {\r\n                        style: 'layout1',\r\n                        config: {\r\n                            scroll: 'content',\r\n                            navbar: {\r\n                                display: true,\r\n                                folded: true,\r\n                                position: 'left'\r\n                            },\r\n                            toolbar: {\r\n                                display: true,\r\n                                style: 'fixed',\r\n                                position: 'below'\r\n                            },\r\n                            footer: {\r\n                                display: true,\r\n                                style: 'fixed',\r\n                                position: 'below'\r\n                            },\r\n                            mode: 'fullwidth'\r\n                        }\r\n                    },\r\n                    customScrollbars: true,\r\n                    theme: {\r\n                        main: 'defaultDark',\r\n                        navbar: 'defaultDark',\r\n                        toolbar: 'defaultDark',\r\n                        footer: 'defaultDark'\r\n                    }\r\n                },\r\n                shortcuts: [\r\n                    'calendar',\r\n                    'mail',\r\n                    'contacts'\r\n                ]\r\n            }\r\n        },\r\n        {\r\n            uuid: 'XgbuVEXBU6gtSKdbTYR1Zbbby1i3',\r\n            from: 'custom-db',\r\n            password: \"staff\",\r\n            role: \"staff\",\r\n            data: {\r\n                'displayName': 'Arnold Matlock',\r\n                'photoURL': '/assets/images/avatars/Arnold.jpg',\r\n                'email': 'staff@staff.com',\r\n                settings: {\r\n                    layout: {\r\n                        style: 'layout2',\r\n                        config: {\r\n                            mode: 'boxed',\r\n                            scroll: 'content',\r\n                            navbar: {\r\n                                display: true\r\n                            },\r\n                            toolbar: {\r\n                                display: true,\r\n                                position: 'below'\r\n                            },\r\n                            footer: {\r\n                                display: true,\r\n                                style: 'fixed'\r\n                            }\r\n                        }\r\n                    },\r\n                    customScrollbars: true,\r\n                    theme: {\r\n                        main: 'greeny',\r\n                        navbar: 'mainThemeDark',\r\n                        toolbar: 'mainThemeDark',\r\n                        footer: 'mainThemeDark'\r\n                    }\r\n                },\r\n                shortcuts: [\r\n                    'calendar',\r\n                    'mail',\r\n                    'contacts',\r\n                    'todo'\r\n                ]\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nmock.onGet('/api/auth').reply((config) => {\r\n    const data = JSON.parse(config.data);\r\n    const { email, password } = data;\r\n\r\n    const user = _.cloneDeep(authDB.users.find(_user => _user.data.email === email));\r\n\r\n    const error = {\r\n        email: user ? null : 'Check your username/email',\r\n        password: user && user.password === password ? null : 'Check your password'\r\n    };\r\n    if (!error.email && !error.password && !error.displayName) {\r\n        delete user['password'];\r\n\r\n        // const access_token = jwt.sign({ id: user.uuid }, jwtConfig.secret, { expiresIn: jwtConfig.expiresIn });\r\n        const access_token = JSON.stringify({ id: user.uuid });\r\n        \r\n        const response = {\r\n            \"user\": user,\r\n            \"access_token\": access_token\r\n        };\r\n\r\n        return [200, response];\r\n    }\r\n    else {\r\n        return [200, { error }];\r\n    }\r\n});\r\n\r\nmock.onGet('/api/auth/access-token').reply((config) => {\r\n    const data = JSON.parse(config.data);\r\n    const { access_token } = data;\r\n    try {\r\n        // const { id } = jwt.verify(access_token, jwtConfig.secret);\r\n        const { id } = JSON.parse(access_token);\r\n\r\n        const user = _.cloneDeep(authDB.users.find(_user => _user.uuid === id));\r\n        delete user['password'];\r\n\r\n        // const updatedAccessToken = jwt.sign({ id: user.uuid }, jwtConfig.secret, { expiresIn: jwtConfig.expiresIn });\r\n        const updatedAccessToken = JSON.stringify({ id: user.uuid });\r\n\r\n        const response = {\r\n            \"user\": user,\r\n            \"access_token\": updatedAccessToken\r\n        };\r\n\r\n        return [200, response];\r\n    } catch (e) {\r\n        const error = \"Invalid access token detected\";\r\n        return [401, { error }];\r\n    }\r\n});\r\n\r\n// mock.onPost('/api/auth/register').reply((request) => {\r\n//     const data = JSON.parse(request.data);\r\n//     const { displayName, password, email } = data;\r\n//     const isEmailExists = authDB.users.find(_user => _user.data.email === email);\r\n//     const error = {\r\n//         email: isEmailExists ? 'The email is already in use' : null,\r\n//         displayName: displayName !== '' ? null : 'Enter display name',\r\n//         password: null\r\n//     };\r\n//     if (!error.displayName && !error.password && !error.email) {\r\n//         const newUser = {\r\n//             uuid: generateGUID(),\r\n//             from: 'custom-db',\r\n//             password: password,\r\n//             role: \"admin\",\r\n//             data: {\r\n//                 displayName: displayName,\r\n//                 photoURL: 'assets/images/avatars/Abbott.jpg',\r\n//                 email: email,\r\n//                 settings: {},\r\n//                 shortcuts: []\r\n//             }\r\n//         };\r\n\r\n//         authDB.users = [\r\n//             ...authDB.users,\r\n//             newUser\r\n//         ];\r\n\r\n//         const user = _.cloneDeep(newUser);\r\n//         delete user['password'];\r\n\r\n//         const access_token = jwt.sign({ id: user.uuid }, jwtConfig.secret, { expiresIn: jwtConfig.expiresIn });\r\n\r\n//         const response = {\r\n//             \"user\": user,\r\n//             \"access_token\": access_token\r\n//         };\r\n\r\n//         return [200, response];\r\n//     }\r\n//     else {\r\n//         return [200, { error }];\r\n//     }\r\n// });\r\n\r\n// mock.onPost('/api/auth/user/update').reply((config) => {\r\n//     const data = JSON.parse(config.data);\r\n//     const { user } = data;\r\n\r\n//     authDB.users = authDB.users.map((_user) => {\r\n//         if (user.uuid === user.id) {\r\n//             return _.merge(_user, user);\r\n//         }\r\n//         return _user\r\n//     });\r\n\r\n//     return [200, user];\r\n// });\r\n","import mock from './mock';\r\nimport './db/auth-db';\r\n\r\nmock.onAny().passThrough();","import React, { useEffect, useState } from \"react\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport TopBarProgress from \"react-topbar-progress-indicator\"\r\n\r\nTopBarProgress.config({\r\n   barColors: {\r\n      \"0\": \"rgb(247 87 140)\",\r\n      \"0.5\": \"rgb(247 87 140)\",\r\n      \"1.0\": \"rgb(247 87 140)\",\r\n   },\r\n   shadowBlur: 5\r\n});\r\n\r\nconst ProgressBar = ({ children }) => {\r\n   const [progress, setProgress] = useState(false)\r\n   const [prevLoc, setPrevLoc] = useState(\"\")\r\n   const location = useLocation()\r\n\r\n   useEffect(() => {\r\n      setProgress(false)\r\n   }, [prevLoc])\r\n   \r\n   useEffect(() => {\r\n      setPrevLoc(location.pathname)\r\n      setProgress(true)\r\n      if (location.pathname === prevLoc) {\r\n         setPrevLoc('')\r\n      }\r\n   }, [location])\r\n\r\n   return (\r\n      <>\r\n         {progress && <TopBarProgress color=\"#f11946\" />}\r\n         {children}\r\n      </>\r\n   )\r\n}\r\n\r\nexport default ProgressBar","import { Box } from \"@material-ui/core\";\r\nimport { styled } from \"@material-ui/core/styles\";\r\n\r\nexport default styled(Box) (\r\n    () => {\r\n    return {\r\n        // display: 'flex',\r\n        justifyContent: 'space-between',\r\n        background: 'white'\r\n    }\r\n});","import * as React from 'react';\r\nimport { useLocation, useNavigate, NavLink } from 'react-router-dom';\r\nimport {\r\n    Box,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    styled\r\n} from '@material-ui/core';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport DeviceHubIcon from '@material-ui/icons/DeviceHub';\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\nimport StarOutlineIcon from '@material-ui/icons/StarOutline';\r\nimport LanguageIcon from '@material-ui/icons/Language';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport { withStyles } from '@material-ui/styles';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        minHeight: 48,\r\n        fontSize: 15,\r\n        borderRadius: 0,\r\n        cursor: 'pointer',\r\n        marginBottom: '2px',\r\n        '&.open': { borderRadius: '10px' },\r\n        '&.active': {\r\n            backgroundColor: theme.palette.primary.main,\r\n            color: theme.palette.secondary.contrastText + '!important',\r\n            pointerEvents: 'none',\r\n            '& .list-item-text-primary': {\r\n                color: 'inherit'\r\n            },\r\n            '& .list-item-icon': {\r\n                color: 'inherit'\r\n            }\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.primary.light,\r\n        },\r\n        '& .list-item-icon': {},\r\n        '& .list-item-text': {\r\n            padding: '0 0 0 16px'\r\n        },\r\n        color: 'inherit!important',\r\n        textDecoration: 'none!important',\r\n    }\r\n});\r\n\r\nconst NavBar = styled('nav', { shouldForwardProp: (prop) => prop !== 'open' })(\r\n    ({ theme, open }) => ({\r\n        padding: '15px',\r\n        ...(!open && { padding: '15px 0' }),\r\n    }),\r\n);\r\n\r\nconst data = [\r\n    {\r\n        label: 'My map',\r\n        link: '/dashboard',\r\n        icon: <DeviceHubIcon />\r\n    },\r\n    {\r\n        label: 'Recent',\r\n        link: '/recent',\r\n        icon: <AccessTimeIcon />\r\n    },\r\n    {\r\n        label: 'Favorites',\r\n        link: '/favorites',\r\n        icon: <StarOutlineIcon />\r\n    },\r\n    {\r\n        label: 'Public',\r\n        link: '/public',\r\n        icon: <LanguageIcon />\r\n    },\r\n    {\r\n        label: 'Trash',\r\n        link: '/trash',\r\n        icon: <DeleteOutlineIcon />\r\n    }\r\n];\r\n\r\nfunction CustomizedList({ classes, open }) {\r\n    const location = useLocation();\r\n\r\n    return (\r\n        <Box >\r\n            <NavBar open={open}>\r\n                {\r\n                    data.map((item) => {\r\n                        return (\r\n                            <ListItem \r\n                                button\r\n                                key={item.label}\r\n                                component={NavLink}\r\n                                to={item.link}\r\n                                className={classNames(classes.root, { 'open': open, 'active': (location.pathname === item.link) })}\r\n                                onClick={() => { }}\r\n                            >\r\n                                <ListItemIcon style={{ color: 'inherit', paddingRight: 1 }}>\r\n                                    {item.icon}\r\n                                </ListItemIcon>\r\n                                <ListItemText\r\n                                    primary={item.label}\r\n                                    primaryTypographyProps={{ fontWeight: 'medium' }}\r\n                                />\r\n                            </ListItem>\r\n                        )\r\n                    })\r\n                }\r\n            </NavBar>\r\n        </Box>\r\n    );\r\n}\r\n\r\nCustomizedList.propTypes = {\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(CustomizedList);","import jwtService from './jwtService.js';\n\nexport default jwtService;\n","import axios from 'axios';\nimport jwtDecode from 'jwt-decode';\n\nclass Emitter {\n    _events = {};\n    on(event_name, callback) {\n        if (!this._events[event_name]) this._events[event_name] = [];\n        this._events[event_name].push(callback);\n    }\n    off(event_name, callback) {\n        const events = this._events[event_name] || [];\n        const index = events.indexOf(callback);\n        events.splice(index, 1);\n    }\n    emit(event_name, data) {\n        const events = this._events[event_name] || [];\n        events.forEach(event => {\n            event(data);\n        });\n    }\n}\n\nclass jwtService extends Emitter {\n\n    init() {\n        this.setInterceptors();\n        this.handleAuthentication();\n    }\n\n    setInterceptors = () => {\n        axios.interceptors.response.use(response => {\n            return response;\n        }, err => {\n            return new Promise((resolve, reject) => {\n                if (err.response.status === 401 && err.config && !err.config.__isRetryRequest) {\n                    // if you ever get an unauthorized response, logout the user\n                    this.emit(\"onAutoLogout\", \"Invalid access_token\");\n\n                    this.setSession(null);\n                }\n                throw err;\n            });\n        });\n    };\n\n    handleAuthentication = () => {\n\n        let access_token = this.getAccessToken();\n\n        // if (!access_token) {\n        //     return;\n        // }\n        if (this.isAuthTokenValid(access_token)) {\n            this.setSession(access_token);\n            this.emit(\"onAutoLogin\", true);\n        }\n        else {\n            this.setSession(null);\n            this.emit(\"onAutoLogout\", 'access_token expired');\n        }\n    };\n\n    // createUser = (data) => {\n    //     return new Promise((resolve, reject) => {\n    //         axios.post('/api/auth/register', data)\n    //             .then(response => {\n    //                 if ( response.data.user )\n    //                 {\n    //                     this.setSession(response.data.access_token);\n    //                     resolve(response.data.user);\n    //                 }\n    //                 else\n    //                 {\n    //                     reject(response.data.error);\n    //                 }\n    //             });\n    //     });\n    // };\n\n    signInWithEmailAndPassword = (email, password) => {\n        return new Promise((resolve, reject) => {\n            axios.get('/api/auth', {\n                data: {\n                    email,\n                    password\n                }\n            }).then(response => {\n                if ( response.data.user )\n                {\n                    this.setSession(response.data.access_token);\n                    resolve(response.data.user);\n                }\n                else\n                {\n                    reject(response.data.error);\n                }\n            });\n        });\n    };\n\n    signInWithToken = () => {\n        return new Promise((resolve, reject) => {\n            // setTimeout(() => {\n            //     this.setSession(\"sdfsdfdsfdsfsdfsdf\");\n            //     resolve({\n            //         username: 'ODC'\n            //     });\n            // }, 2000)\n            axios.get('/api/auth/access-token', {\n                data: {\n                    access_token: this.getAccessToken()\n                }\n            }).then(response => {\n                if (response.data.user) {\n                    this.setSession(response.data.access_token);\n                    resolve(response.data.user);\n                }\n                else {\n                    reject(response.error);\n                }\n            });\n        });\n    };\n\n    // updateUserData = (user) => {\n    //     return axios.post('/api/auth/user/update', {\n    //         user: user\n    //     });\n    // };\n\n    setSession = access_token => {\n        if (access_token) {\n            localStorage.setItem('jwt_access_token', access_token);\n            axios.defaults.headers.common['Authorization'] = 'Bearer ' + access_token;\n        }\n        else {\n            localStorage.removeItem('jwt_access_token');\n            delete axios.defaults.headers.common['Authorization'];\n        }\n    };\n\n    logout = () => {\n        this.setSession(null);\n    };\n\n    isAuthTokenValid = access_token => {\n        if (!access_token) {\n            return false;\n        }\n        try {\n            return true;\n\n            const decoded = jwtDecode(access_token);\n            const currentTime = Date.now() / 1000;\n            if (decoded.exp < currentTime) {\n                console.warn('access token expired');\n                return false;\n            }\n            else {\n                return true;\n            }\n        } catch (e) {\n            return false;\n        }\n    };\n\n    getAccessToken = () => {\n        return window.localStorage.getItem('jwt_access_token');\n    };\n}\n\nconst instance = new jwtService();\n\nexport default instance;\n","import jwtService from 'services/jwtService';\r\n\r\nexport const TYPE_SET_USER_DATA = \"TYPE_SET_USER_DATA\";\r\nexport const TYPE_LOGOUT_USER = \"TYPE_LOGOUT_USER\";\r\nexport const TYPE_LOGIN_ERROR = 'TYPE_LOGIN_ERROR';\r\nexport const TYPE_LOGIN_SUCCESS = 'TYPE_LOGIN_SUCCESS';\r\n\r\nexport function actionLogout() {\r\n    return (dispatch) => {\r\n        jwtService.logout();\r\n        dispatch({\r\n            type: TYPE_LOGOUT_USER,\r\n        });\r\n    }\r\n}\r\n\r\nexport const actionSetUserData = (user) => ({\r\n    type: TYPE_SET_USER_DATA,\r\n    user\r\n})\r\n\r\nexport function actionLogin({ email, password }) {\r\n    return (dispatch) =>\r\n        jwtService.signInWithEmailAndPassword(email, password)\r\n            .then((user) => {\r\n                dispatch(actionSetUserData(user));\r\n\r\n                return dispatch({\r\n                    type: TYPE_LOGIN_SUCCESS\r\n                });\r\n            }\r\n            )\r\n            .catch(error => {\r\n                return dispatch({\r\n                    type: TYPE_LOGIN_ERROR,\r\n                    error\r\n                });\r\n            });\r\n}","export const selectAuth = state => state.auth;\r\nexport const selectAuthItem = key => state => state.auth[key];","import * as React from 'react';\r\nimport clsx from 'clsx';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { styled, useTheme } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Toolbar,\r\n  CssBaseline,\r\n  Typography,\r\n  IconButton,\r\n  Avatar,\r\n  ListItemIcon,\r\n  Menu,\r\n  MenuItem,\r\n  Divider,\r\n  Tooltip,\r\n  ListItemText,\r\n  Drawer as MaterialDrawer,\r\n  AppBar as MaterialAppBar,\r\n} from '@material-ui/core';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\r\nimport AddToPhotosIcon from '@material-ui/icons/AddToPhotos';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\n\r\nimport SideBarList from './config';\r\nimport { routes } from '../../../setup/routes';\r\nimport { actionLogout } from 'store/actions';\r\nimport { selectAuthItem } from 'store/selectors';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst openedMixin = (theme) => ({\r\n  width: drawerWidth,\r\n  transition: theme.transitions.create('width', {\r\n    easing: theme.transitions.easing.sharp,\r\n    duration: theme.transitions.duration.enteringScreen,\r\n  }),\r\n  backgroundColor: '#293033',\r\n  color: 'white',\r\n  overflowX: 'hidden',\r\n});\r\n\r\nconst closedMixin = (theme) => ({\r\n  transition: theme.transitions.create('width', {\r\n    easing: theme.transitions.easing.sharp,\r\n    duration: theme.transitions.duration.leavingScreen,\r\n  }),\r\n  backgroundColor: '#293033',\r\n  color: 'white',\r\n  overflowX: 'hidden',\r\n  width: `calc(${theme.spacing(7)}px + 1px)`,\r\n  [theme.breakpoints.up('sm')]: {\r\n    width: `calc(${theme.spacing(7)}px + 1px)`,\r\n  },\r\n});\r\n\r\nconst DrawerHeader = styled('div')(({ theme }) => ({\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'space-between',\r\n  padding: theme.spacing(3, 1),\r\n  // necessary for content to be below app bar\r\n  ...theme.mixins.toolbar,\r\n}));\r\n\r\nconst AppBar = styled(MaterialAppBar, {\r\n  shouldForwardProp: (prop) => prop !== 'open',\r\n})(({ theme, open }) => ({\r\n  zIndex: theme.zIndex.drawer + 1,\r\n  transition: theme.transitions.create(['width', 'margin'], {\r\n    easing: theme.transitions.easing.sharp,\r\n    duration: theme.transitions.duration.leavingScreen,\r\n  }),\r\n  ...(open && {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  }),\r\n}));\r\n\r\nconst Drawer = styled(MaterialDrawer, { shouldForwardProp: (prop) => prop !== 'open' })(\r\n  ({ theme, open }) => ({\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: 'nowrap',\r\n    boxSizing: 'border-box',\r\n    ...(open && {\r\n      ...openedMixin(theme),\r\n      '& .MuiDrawer-paper': openedMixin(theme),\r\n    }),\r\n    ...(!open && {\r\n      ...closedMixin(theme),\r\n      '& .MuiDrawer-paper': closedMixin(theme),\r\n    }),\r\n  }),\r\n);\r\n\r\nexport default function SideBar(props) {\r\n\r\n  const theme = useTheme();\r\n  const [open, setOpen] = React.useState(true);\r\n\r\n  const location = useLocation();\r\n\r\n  function search(routes, path) {\r\n    for (let i = 0; i < routes.length; i++) {\r\n      const route = routes[i];\r\n      if (route.path == path) return route;\r\n      if (route.children) {\r\n        let child_route = search(route.children, path);\r\n        if (child_route) return child_route;\r\n      }\r\n    }\r\n  }\r\n\r\n  const currentRoute = search(routes, location.pathname);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Box style={{ display: 'flex' }}>\r\n      <CssBaseline />\r\n      <AppBar position=\"fixed\"\r\n        open={open}\r\n        style={{\r\n          backgroundColor: '#293033',\r\n          color: 'black',\r\n          boxShadow: 'none',\r\n        }}\r\n      >\r\n        <Toolbar style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          backgroundColor: 'white',\r\n          ...(open && { borderTopLeftRadius: 20 })\r\n        }}>\r\n          <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              onClick={handleDrawerOpen}\r\n              edge=\"start\"\r\n              style={{\r\n                marginRight: '0px',\r\n                marginLeft: '-20px',\r\n                width: '52px',\r\n                height: '52px',\r\n                ...(open && { display: 'none' }),\r\n              }}\r\n            >\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h5\" noWrap component=\"div\" style={{\r\n              padding: theme.spacing(4, 2),\r\n            }}>\r\n              {currentRoute && currentRoute.name}\r\n            </Typography>\r\n          </div>\r\n          <AccountMenu />\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer variant=\"permanent\" open={open}>\r\n        <DrawerHeader>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            {/* <img src='/assets/images/logo/logo.png' alt='logo' style={{ width: '150px' }} /> */}\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" style={{ width: '120px', marginLeft: '10px', color: 'white' }} viewBox=\"0 0 95 36\">\r\n              <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(0 2)\">\r\n                <path fill=\"white\" fillRule=\"nonzero\" d=\"M39,10.728 L41.352,10.728 L41.352,12.8 L41.408,12.8 C41.4640003,12.6133324 41.6086655,12.3800014 41.842,12.1 C42.0753345,11.8199986 42.3739982,11.5540013 42.738,11.302 C43.1020018,11.0499987 43.5313309,10.8353342 44.026,10.658 C44.5206691,10.4806658 45.0666637,10.392 45.664,10.392 C46.6533383,10.392 47.4839966,10.5973313 48.156,11.008 C48.8280034,11.4186687 49.3786645,12.0346626 49.808,12.856 C50.2373355,12.0346626 50.8439961,11.4186687 51.628,11.008 C52.4120039,10.5973313 53.2053293,10.392 54.008,10.392 C55.0346718,10.392 55.8746634,10.5599983 56.528,10.896 C57.1813366,11.2320017 57.6946648,11.6753306 58.068,12.226 C58.4413352,12.7766694 58.6979993,13.4019965 58.838,14.102 C58.9780007,14.8020035 59.048,15.5253296 59.048,16.272 L59.048,24 L56.528,24 L56.528,16.608 C56.528,16.1039975 56.4953337,15.618669 56.43,15.152 C56.3646663,14.685331 56.2293344,14.2746684 56.024,13.92 C55.8186656,13.5653316 55.5293352,13.2806677 55.156,13.066 C54.7826648,12.8513323 54.2880031,12.744 53.672,12.744 C52.4586606,12.744 51.5906693,13.1173296 51.068,13.864 C50.5453307,14.6106704 50.284,15.5719941 50.284,16.748 L50.284,24 L47.764,24 L47.764,17.056 C47.764,16.4213302 47.7313337,15.8426693 47.666,15.32 C47.6006663,14.7973307 47.470001,14.3446686 47.274,13.962 C47.077999,13.5793314 46.7980018,13.2806677 46.434,13.066 C46.0699982,12.8513323 45.5800031,12.744 44.964,12.744 C44.5159978,12.744 44.0820021,12.8326658 43.662,13.01 C43.2419979,13.1873342 42.8733349,13.4533316 42.556,13.808 C42.2386651,14.1626684 41.9866676,14.6153306 41.8,15.166 C41.6133324,15.7166694 41.52,16.3653296 41.52,17.112 L41.52,24 L39,24 L39,10.728 Z M61.780333,10.728 L64.300333,10.728 L64.300333,24 L61.780333,24 L61.780333,10.728 Z M61.192333,5.968 C61.192333,5.46399748 61.3743312,5.03000182 61.738333,4.666 C62.1023348,4.30199818 62.5363305,4.12 63.040333,4.12 C63.5443355,4.12 63.9783312,4.30199818 64.342333,4.666 C64.7063348,5.03000182 64.888333,5.46399748 64.888333,5.968 C64.888333,6.47200252 64.7063348,6.90599818 64.342333,7.27 C63.9783312,7.63400182 63.5443355,7.816 63.040333,7.816 C62.5363305,7.816 62.1023348,7.63400182 61.738333,7.27 C61.3743312,6.90599818 61.192333,6.47200252 61.192333,5.968 Z M67.032666,10.728 L69.552666,10.728 L69.552666,12.772 L69.608666,12.772 C69.9260009,12.0626631 70.4766621,11.4886689 71.260666,11.05 C72.0446699,10.6113311 72.9499942,10.392 73.976666,10.392 C74.6113358,10.392 75.2226631,10.489999 75.810666,10.686 C76.3986689,10.882001 76.9119971,11.1853313 77.350666,11.596 C77.7893349,12.0066687 78.1393314,12.5339968 78.400666,13.178 C78.6620006,13.8220032 78.792666,14.5826623 78.792666,15.46 L78.792666,24 L76.272666,24 L76.272666,16.16 C76.272666,15.5439969 76.1886668,15.0166689 76.020666,14.578 C75.8526652,14.1393311 75.6286674,13.784668 75.348666,13.514 C75.0686646,13.243332 74.7466678,13.0473339 74.382666,12.926 C74.0186642,12.8046661 73.640668,12.744 73.248666,12.744 C72.7259967,12.744 72.2406682,12.8279992 71.792666,12.996 C71.3446638,13.1640008 70.9526677,13.4299982 70.616666,13.794 C70.2806643,14.1580018 70.0193336,14.6199972 69.832666,15.18 C69.6459984,15.7400028 69.552666,16.4026628 69.552666,17.168 L69.552666,24 L67.032666,24 L67.032666,10.728 Z M94.628999,24 L92.108999,24 L92.108999,22.096 L92.052999,22.096 C91.5676632,22.8053369 90.9003366,23.355998 90.050999,23.748 C89.2016614,24.140002 88.3290035,24.336 87.432999,24.336 C86.4063272,24.336 85.4776698,24.1586684 84.646999,23.804 C83.8163282,23.4493316 83.1070019,22.9546698 82.518999,22.32 C81.9309961,21.6853302 81.4783339,20.9480042 81.160999,20.108 C80.8436641,19.2679958 80.684999,18.3533383 80.684999,17.364 C80.684999,16.3746617 80.8436641,15.4553376 81.160999,14.606 C81.4783339,13.7566624 81.9309961,13.0193365 82.518999,12.394 C83.1070019,11.7686635 83.8163282,11.2786684 84.646999,10.924 C85.4776698,10.5693316 86.4063272,10.392 87.432999,10.392 C88.3850038,10.392 89.2809948,10.5926647 90.120999,10.994 C90.9610032,11.3953353 91.6049968,11.9413299 92.052999,12.632 L92.108999,12.632 L92.108999,2.832 L94.628999,2.832 L94.628999,24 Z M87.740999,21.984 C88.4130024,21.984 89.019663,21.8673345 89.560999,21.634 C90.102335,21.4006655 90.5596638,21.0833353 90.932999,20.682 C91.3063342,20.2806647 91.5956646,19.7953362 91.800999,19.226 C92.0063334,18.6566638 92.108999,18.0360034 92.108999,17.364 C92.108999,16.6919966 92.0063334,16.0713362 91.800999,15.502 C91.5956646,14.9326638 91.3063342,14.4473353 90.932999,14.046 C90.5596638,13.6446647 90.102335,13.3273345 89.560999,13.094 C89.019663,12.8606655 88.4130024,12.744 87.740999,12.744 C87.0689956,12.744 86.462335,12.8606655 85.920999,13.094 C85.379663,13.3273345 84.9223342,13.6446647 84.548999,14.046 C84.1756638,14.4473353 83.8863334,14.9326638 83.680999,15.502 C83.4756646,16.0713362 83.372999,16.6919966 83.372999,17.364 C83.372999,18.0360034 83.4756646,18.6566638 83.680999,19.226 C83.8863334,19.7953362 84.1756638,20.2806647 84.548999,20.682 C84.9223342,21.0833353 85.379663,21.4006655 85.920999,21.634 C86.462335,21.8673345 87.0689956,21.984 87.740999,21.984 Z\" />\r\n                <path fill=\"white\" d=\"M0.103704557,3.33964011 L1.09358565,3.33964011 C1.15086009,3.33964011 1.19729021,3.38607022 1.19729021,3.44334466 L1.19729021,3.89365166 C1.2527205,3.8153062 1.30815005,3.73696191 1.38020954,3.65861645 C1.45226904,3.58027099 1.53818483,3.51032074 1.63795952,3.44876359 C1.7377342,3.38720645 1.85136477,3.33684226 1.97885465,3.29766953 C2.10634452,3.2584968 2.24491839,3.23891073 2.39458041,3.23891073 C2.67727535,3.23891073 2.92809405,3.29766895 3.14704405,3.41518714 C3.36599405,3.53270533 3.53089695,3.717374 3.64175771,3.96919869 C3.78587669,3.70618179 3.96047977,3.51871511 4.16557217,3.40679302 C4.37066458,3.29487094 4.62286902,3.23891073 4.92219307,3.23891073 C5.19380193,3.23891073 5.42244881,3.2850779 5.60814058,3.37741362 C5.79383235,3.46974934 5.94072065,3.5956598 6.04880989,3.75514877 C6.15689913,3.91463774 6.2345005,4.10210442 6.28161632,4.31755444 C6.32873214,4.53300445 6.3522897,4.76384029 6.3522897,5.01006888 L6.3522897,7.31547516 C6.3522897,7.37274961 6.30585959,7.41917972 6.24858514,7.41917972 L5.20881696,7.41917972 C5.15154252,7.41917972 5.1051124,7.37274961 5.1051124,7.31547516 L5.1051124,5.04364534 C5.1051124,4.85337779 5.06492598,4.6896942 4.98455193,4.55258964 C4.90417788,4.41548509 4.7614468,4.34693384 4.55635439,4.34693384 C4.41223541,4.34693384 4.29167614,4.37071692 4.19467298,4.41828381 C4.09766981,4.4658507 4.02006845,4.53160394 3.96186655,4.6155455 C3.90366465,4.69948706 3.86209249,4.79741742 3.83714882,4.9093395 C3.81220515,5.02126159 3.7997335,5.13877802 3.7997335,5.26189231 L3.7997335,7.31547516 C3.7997335,7.37274961 3.75330339,7.41917972 3.69602894,7.41917972 L2.65626076,7.41917972 C2.59898631,7.41917972 2.5525562,7.37274961 2.5525562,7.31547516 L2.5525562,5.26189231 C2.5525562,5.18914295 2.54978472,5.09960663 2.54424169,4.99328065 C2.53869865,4.88695467 2.51929831,4.7862263 2.48604008,4.69109253 C2.45278185,4.59595876 2.39873804,4.51481646 2.32390703,4.44766321 C2.24907602,4.38050996 2.13960266,4.34693384 1.99548368,4.34693384 C1.83473558,4.34693384 1.70447614,4.37631294 1.60470146,4.43507204 C1.50492677,4.49383113 1.42871115,4.57217542 1.37605228,4.67010724 C1.32339342,4.76803907 1.28874996,4.87856047 1.27212084,5.00167476 C1.25549173,5.12478906 1.2471773,5.25349752 1.2471773,5.38780403 L1.2471773,7.31547516 C1.2471773,7.37274961 1.20074719,7.41917972 1.14347274,7.41917972 L0.103704557,7.41917972 C0.0464301116,7.41917972 2.08918844e-17,7.37274961 1.38777878e-17,7.31547516 L0,3.44334466 C1.84208665e-17,3.38607022 0.0464301116,3.33964011 0.103704557,3.33964011 Z M10.7410276,6.79948023 C10.6900458,6.85803924 10.6480969,6.9030308 10.6151809,6.93445493 C10.4544665,7.08788518 10.2684537,7.21308495 10.0571399,7.31005623 C9.75227281,7.44995884 9.43632439,7.51990909 9.10928515,7.51990909 C8.79887503,7.51990909 8.50648416,7.46954491 8.23210379,7.36881503 C7.95772341,7.26808515 7.71937635,7.12398763 7.51705547,6.93651814 C7.31473459,6.74904865 7.15537464,6.52380883 7.03897084,6.26079193 C6.92256704,5.99777503 6.86436602,5.70398396 6.86436602,5.37940991 C6.86436602,5.05483586 6.92256704,4.7610448 7.03897084,4.4980279 C7.15537464,4.235011 7.31473459,4.00977118 7.51705547,3.82230169 C7.71937635,3.63483219 7.95772341,3.49073467 8.23210379,3.39000479 C8.50648416,3.28927492 8.79887503,3.23891073 9.10928515,3.23891073 C9.39752312,3.23891073 9.65942774,3.28927492 9.89500685,3.39000479 C10.130586,3.49073467 10.3301323,3.63483219 10.493652,3.82230169 C10.6571716,4.00977118 10.7832738,4.235011 10.8719624,4.4980279 C10.960651,4.7610448 11.0049946,5.05483586 11.0049946,5.37940991 L11.0049946,5.63566055 C11.0049946,5.71202647 10.9430878,5.77393329 10.8667219,5.77393329 L8.11154331,5.77393329 C8.16143066,6.01456577 8.26951827,6.20622947 8.43580941,6.34893013 C8.60210055,6.49163079 8.80718988,6.56298005 9.05108355,6.56298005 C9.25617595,6.56298005 9.42939329,6.51681288 9.57074075,6.42447716 C9.65799274,6.36747949 9.73837958,6.3003538 9.81190213,6.22309924 C9.82992443,6.20416213 9.85236285,6.17824023 9.87921739,6.14533355 L9.87909053,6.14523003 C9.91415624,6.10226164 9.97679326,6.09442192 10.0213673,6.12742251 L10.7244644,6.64753712 C10.7706482,6.68172948 10.7803692,6.74688724 10.7461768,6.79307104 C10.7445456,6.79527444 10.7428278,6.7974125 10.7410276,6.79948023 Z M23.9458574,6.79948023 C23.8948756,6.85803924 23.8529267,6.9030308 23.8200107,6.93445493 C23.6592963,7.08788518 23.4732835,7.21308495 23.2619697,7.31005623 C22.9571026,7.44995884 22.6411542,7.51990909 22.314115,7.51990909 C22.0037048,7.51990909 21.711314,7.46954491 21.4369336,7.36881503 C21.1625532,7.26808515 20.9242062,7.12398763 20.7218853,6.93651814 C20.5195644,6.74904865 20.3602044,6.52380883 20.2438006,6.26079193 C20.1273968,5.99777503 20.0691958,5.70398396 20.0691958,5.37940991 C20.0691958,5.05483586 20.1273968,4.7610448 20.2438006,4.4980279 C20.3602044,4.235011 20.5195644,4.00977118 20.7218853,3.82230169 C20.9242062,3.63483219 21.1625532,3.49073467 21.4369336,3.39000479 C21.711314,3.28927492 22.0037048,3.23891073 22.314115,3.23891073 C22.6023529,3.23891073 22.8642575,3.28927492 23.0998367,3.39000479 C23.3354158,3.49073467 23.5349621,3.63483219 23.6984818,3.82230169 C23.8620014,4.00977118 23.9881036,4.235011 24.0767922,4.4980279 C24.1654808,4.7610448 24.2098245,5.05483586 24.2098245,5.37940991 L24.2098245,5.63566055 C24.2098245,5.71202647 24.1479176,5.77393329 24.0715517,5.77393329 L21.3163731,5.77393329 C21.3662605,6.01456577 21.4743481,6.20622947 21.6406392,6.34893013 C21.8069304,6.49163079 22.0120197,6.56298005 22.2559134,6.56298005 C22.4610058,6.56298005 22.6342231,6.51681288 22.7755706,6.42447716 C22.8628226,6.36747949 22.9432094,6.3003538 23.0167319,6.22309924 C23.0347542,6.20416213 23.0571927,6.17824023 23.0840472,6.14533355 L23.0839203,6.14523003 C23.1189861,6.10226164 23.1816231,6.09442192 23.2261971,6.12742251 L23.9292942,6.64753712 C23.975478,6.68172948 23.985199,6.74688724 23.9510067,6.79307104 C23.9493754,6.79527444 23.9476576,6.7974125 23.9458574,6.79948023 Z M9.75781735,4.91773362 C9.76336039,4.70508166 9.69407345,4.523211 9.54995446,4.37211618 C9.40583548,4.22102137 9.22014649,4.14547509 8.99288194,4.14547509 C8.85430599,4.14547509 8.73236098,4.16785917 8.62704326,4.21262801 C8.52172554,4.25739684 8.43165253,4.31475605 8.35682152,4.38470735 C8.2819905,4.45465866 8.22378948,4.53580095 8.18221669,4.62813667 C8.14064391,4.72047239 8.11708635,4.81700374 8.11154331,4.91773362 L9.75781735,4.91773362 Z M11.6374357,3.33964011 L12.6772039,3.33964011 C12.7344784,3.33964011 12.7809085,3.38607022 12.7809085,3.44334466 L12.7809085,7.31547516 C12.7809085,7.37274961 12.7344784,7.41917972 12.6772039,7.41917972 L11.6374357,7.41917972 C11.5801613,7.41917972 11.5337312,7.37274961 11.5337312,7.31547516 L11.5337312,3.44334466 C11.5337312,3.38607022 11.5801613,3.33964011 11.6374357,3.33964011 Z M12.1599787,2.96363316 C11.7581626,2.96363316 11.4324263,2.63446141 11.4324263,2.22840749 C11.4324263,1.82235356 11.7581626,1.49318182 12.1599787,1.49318182 C12.5617947,1.49318182 12.887531,1.82235356 12.887531,2.22840749 C12.887531,2.63446141 12.5617947,2.96363316 12.1599787,2.96363316 Z M15.7207921,4.53999847 C15.5378718,4.31055819 15.2967533,4.19583978 14.9974292,4.19583978 C14.8921115,4.19583978 14.7895669,4.22102187 14.6897922,4.27138681 C14.5900175,4.32175175 14.5401309,4.40849006 14.5401309,4.53160435 C14.5401309,4.63233423 14.5914032,4.7064815 14.6939494,4.75404839 C14.7964956,4.80161527 14.9267551,4.84358543 15.0847317,4.8799601 C15.2427082,4.91633478 15.4117684,4.95550692 15.5919171,4.99747771 C15.7720658,5.03944849 15.9411259,5.10520173 16.0991025,5.19473939 C16.2570791,5.28427706 16.3873385,5.4059905 16.4898847,5.55988337 C16.5924309,5.71377624 16.6437033,5.91942999 16.6437033,6.17685078 C16.6437033,6.43986768 16.586888,6.65671347 16.4732557,6.82739465 C16.3596234,6.99807583 16.2141209,7.13517833 16.0367437,7.23870626 C15.8593664,7.34223419 15.6598201,7.41498245 15.4380986,7.45695323 C15.216377,7.49892401 14.9974303,7.51990909 14.7812518,7.51990909 C14.4985569,7.51990909 14.2130947,7.47933794 13.9248568,7.39819443 C13.6366188,7.31705092 13.3927288,7.1729534 13.1931794,6.96589754 L13.9498003,6.11809198 C14.0662041,6.26359069 14.1950778,6.37411209 14.3364253,6.4496595 C14.4777727,6.52520691 14.6426756,6.56298005 14.8311389,6.56298005 C14.9752579,6.56298005 15.1055174,6.54199497 15.2219212,6.50002419 C15.338325,6.45805341 15.396526,6.38110813 15.396526,6.26918604 C15.396526,6.16286006 15.3452536,6.08311677 15.2427074,6.02995378 C15.1401612,5.97679079 15.0099018,5.93202263 14.8519252,5.89564795 C14.6939486,5.85927327 14.5248885,5.82010113 14.3447398,5.77813035 C14.1645911,5.73615957 13.9955309,5.67320434 13.8375544,5.58926277 C13.6795778,5.50532121 13.5493183,5.38640578 13.4467721,5.23251291 C13.3442259,5.07862004 13.2929536,4.8729663 13.2929536,4.6155455 C13.2929536,4.37491302 13.3414545,4.16786026 13.4384576,3.99438103 C13.5354608,3.8209018 13.6629487,3.67820328 13.8209253,3.5662812 C13.9789019,3.45435911 14.1604337,3.37181781 14.3655261,3.31865482 C14.5706185,3.26549183 14.7784793,3.23891073 14.9891147,3.23891073 C15.2551805,3.23891073 15.5240139,3.27808288 15.7956227,3.35642834 C16.0672316,3.43477379 16.2972642,3.5746743 16.4857275,3.77613406 L15.7207921,4.53999847 Z M19.6877764,4.34693384 L18.6939649,4.34693384 L18.6939649,5.70678037 C18.6939649,5.81870246 18.6995079,5.92082983 18.710594,6.01316555 C18.72168,6.10550127 18.7466233,6.18524456 18.7854246,6.25239781 C18.8242259,6.31955106 18.8838126,6.37131425 18.9641867,6.40768893 C19.0445607,6.44406361 19.1512626,6.46225067 19.2842955,6.46225067 C19.350812,6.46225067 19.4381135,6.45525565 19.5462027,6.44126539 C19.5791299,6.43700354 19.6140824,6.42797053 19.6510603,6.41416635 L19.6509039,6.41374753 C19.7047927,6.39363033 19.7647864,6.42100762 19.7849037,6.47489642 C19.7892533,6.48654813 19.7914809,6.49888472 19.7914809,6.51132184 L19.7915411,7.3160312 C19.7915411,7.36247464 19.7606798,7.40326185 19.7159856,7.41588783 C19.564084,7.45879954 19.4451309,7.48507918 19.3591262,7.49472675 C19.2094641,7.51151506 19.0625758,7.51990909 18.9184568,7.51990909 C18.7078214,7.51990909 18.513818,7.49752501 18.3364408,7.45275618 C18.1590636,7.40798734 18.0038608,7.33663808 17.8708279,7.23870626 C17.737795,7.14077443 17.6338646,7.01346497 17.5590336,6.85677405 C17.4842026,6.70008313 17.4467876,6.50981844 17.4467876,6.28597427 L17.4467876,4.34693384 L16.7522987,4.34693384 C16.6950243,4.34693384 16.6485942,4.30050373 16.6485942,4.24322928 L16.6485942,3.44334466 C16.6485942,3.38607022 16.6950243,3.33964011 16.7522987,3.33964011 L17.4467876,3.33964011 L17.4467876,2.23459219 C17.4467876,2.17731774 17.4932177,2.13088763 17.5504922,2.13088763 L18.5902604,2.13088763 C18.6475348,2.13088763 18.6939649,2.17731774 18.6939649,2.23459219 L18.6939649,3.33964011 L19.6877764,3.33964011 C19.7450508,3.33964011 19.7914809,3.38607022 19.7914809,3.44334466 L19.7914809,4.24322928 C19.7914809,4.30050373 19.7450508,4.34693384 19.6877764,4.34693384 Z M22.9475731,4.91773362 C22.9531162,4.70508166 22.8838292,4.523211 22.7397103,4.37211618 C22.5955913,4.22102137 22.4099023,4.14547509 22.1826377,4.14547509 C22.0440618,4.14547509 21.9221168,4.16785917 21.8167991,4.21262801 C21.7114813,4.25739684 21.6214083,4.31475605 21.5465773,4.38470735 C21.4717463,4.45465866 21.4135453,4.53580095 21.3719725,4.62813667 C21.3303997,4.72047239 21.3068421,4.81700374 21.3012991,4.91773362 L22.9475731,4.91773362 Z M24.8105313,3.33964011 L25.8502995,3.33964011 C25.9075739,3.33964011 25.954004,3.38607022 25.954004,3.44334466 L25.954004,3.99438103 L25.9706331,3.99438103 C26.103666,3.74255634 26.2616402,3.55369065 26.4445604,3.42777831 C26.6274807,3.30186596 26.8575133,3.23891073 27.1346652,3.23891073 C27.2067247,3.23891073 27.2787831,3.24170874 27.3508426,3.24730485 C27.3815179,3.24968708 27.4197268,3.25511159 27.4654691,3.26357839 L27.4654859,3.26348777 C27.5146895,3.27259523 27.550391,3.31551145 27.550391,3.36555081 L27.5505483,4.29591044 C27.5505483,4.35327175 27.5040477,4.39977227 27.4466864,4.39977227 C27.4382235,4.39977227 27.4297922,4.3987379 27.4215802,4.39669218 C27.3667174,4.38302504 27.3223519,4.37343402 27.2884838,4.36791912 C27.2025667,4.35392886 27.1124936,4.34693384 27.018262,4.34693384 C26.7799114,4.34693384 26.5914509,4.38050996 26.452875,4.44766321 C26.314299,4.51481646 26.2075971,4.6085498 26.1327661,4.72886604 C26.0579351,4.84918229 26.0094343,4.99327981 25.9872621,5.16116294 C25.96509,5.32904606 25.954004,5.51371474 25.954004,5.71517449 L25.954004,7.31547516 C25.954004,7.37274961 25.9075739,7.41917972 25.8502995,7.41917972 L24.8105313,7.41917972 C24.7532569,7.41917972 24.7068267,7.37274961 24.7068267,7.31547516 L24.7068267,3.44334466 C24.7068267,3.38607022 24.7532569,3.33964011 24.8105313,3.33964011 Z\" opacity=\".3\" transform=\"translate(39 25)\" />\r\n                <path fill=\"#F7578C\" d=\"M19.9978604,1.05457478 C31.5962188,4.16759596 33.6583755,9.76840829 30.9202182,20.0046146 C28.182061,30.2408209 23.6004979,34.0584464 12.0021396,30.9454252 C0.403781249,27.832404 -1.65837547,22.2315917 1.07978177,11.9953854 C3.817939,1.75917906 8.3995021,-2.05844639 19.9978604,1.05457478 Z\" />\r\n                <path fill=\"#FFF\" d=\"M3.01357681,11.1746032 C1.54183651,8.09304546 1.47500454,5.07092644 3.27296549,3.27296549 C5.07092644,1.47500454 8.09304546,1.54183651 11.1746032,3.01357681 C14.2561609,1.54183651 17.2782799,1.47500454 19.0762409,3.27296549 C20.8742018,5.07092644 20.8073698,8.09304546 19.3356295,11.1746032 C20.8073698,14.2561609 20.8742018,17.2782799 19.0762409,19.0762409 C17.2782799,20.8742018 14.2561609,20.8073698 11.1746032,19.3356295 C8.09304546,20.8073698 5.07092644,20.8742018 3.27296549,19.0762409 C1.47500454,17.2782799 1.54183651,14.2561609 3.01357681,11.1746032 Z M4.45796849,8.75207162 C5.03061803,7.95515432 5.69195143,7.1752897 6.43362057,6.43362057 C7.1752897,5.69195143 7.95515432,5.03061803 8.75207162,4.45796849 C7.07868768,3.95072223 5.64489185,4.06169421 4.85329303,4.85329303 C4.06169421,5.64489185 3.95072223,7.07868768 4.45796849,8.75207162 Z M17.8912379,13.5971347 C17.3185883,14.394052 16.6572549,15.1739167 15.9155858,15.9155858 C15.1739167,16.6572549 14.394052,17.3185883 13.5971347,17.8912379 C15.2705187,18.3984841 16.7043145,18.2875121 17.4959133,17.4959133 C18.2875121,16.7043145 18.3984841,15.2705187 17.8912379,13.5971347 Z M4.45796849,13.5971347 C3.95072223,15.2705187 4.06169421,16.7043145 4.85329303,17.4959133 C5.64489185,18.2875121 7.07868768,18.3984841 8.75207162,17.8912379 C7.95515432,17.3185883 7.1752897,16.6572549 6.43362057,15.9155858 C5.69195143,15.1739167 5.03061803,14.394052 4.45796849,13.5971347 Z M5.54454992,11.1746032 C6.16864691,12.236581 6.99599105,13.3173012 8.0139481,14.3352582 C9.03190516,15.3532153 10.1126254,16.1805594 11.1746032,16.8046564 C12.236581,16.1805594 13.3173012,15.3532153 14.3352582,14.3352582 C15.3532153,13.3173012 16.1805594,12.236581 16.8046564,11.1746032 C16.1805594,10.1126254 15.3532153,9.03190516 14.3352582,8.0139481 C13.3173012,6.99599105 12.236581,6.16864691 11.1746032,5.54454992 C10.1126254,6.16864691 9.03190516,6.99599105 8.0139481,8.0139481 C6.99599105,9.03190516 6.16864691,10.1126254 5.54454992,11.1746032 Z M13.5971347,4.45796849 C14.394052,5.03061803 15.1739167,5.69195143 15.9155858,6.43362057 C16.6572549,7.1752897 17.3185883,7.95515432 17.8912379,8.75207162 C18.3984841,7.07868768 18.2875121,5.64489185 17.4959133,4.85329303 C16.7043145,4.06169421 15.2705187,3.95072223 13.5971347,4.45796849 Z\" transform=\"translate(5 5)\" />\r\n              </g>\r\n            </svg>\r\n          </div>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </DrawerHeader>\r\n        <SideBarList open={open} />\r\n      </Drawer>\r\n        {props.children}\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction AccountMenu() {\r\n  const selectAuth = useSelector(selectAuthItem('currentUser'));\r\n  const currentUser = selectAuth.data;\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const handleLogout = () => {\r\n    dispatch(actionLogout());\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <Box style={{ display: 'flex', alignItems: 'center', textAlign: 'center' }}>\r\n        <Typography style={{ minWidth: 30 }}>\r\n          <IconButton>\r\n            <MoreHorizIcon />\r\n          </IconButton>\r\n        </Typography>\r\n        <Typography style={{ minWidth: 30 }}>\r\n          <IconButton>\r\n            <SearchIcon />\r\n          </IconButton>\r\n        </Typography>\r\n        <Typography style={{ minWidth: 30 }}>\r\n          <IconButton>\r\n            <NotificationsNoneIcon />\r\n          </IconButton>\r\n        </Typography>\r\n        <Tooltip title={currentUser.displayName}>\r\n          <IconButton\r\n            onClick={handleClick}\r\n            size=\"small\"\r\n            style={{ ml: 2 }}\r\n            aria-controls={open ? 'account-menu' : undefined}\r\n            aria-haspopup=\"true\"\r\n            aria-expanded={open ? 'true' : undefined}\r\n          >\r\n            <Avatar style={{ width: 32, height: 32 }} alt={currentUser.displayName} src={currentUser.photoURL}></Avatar>\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'right',\r\n        }}\r\n        transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'right',\r\n        }}\r\n        id=\"account-menu\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        onClick={handleClose}\r\n        PaperProps={{\r\n          elevation: 0,\r\n          style: {\r\n            overflow: 'visible',\r\n            filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n            marginTop: 1,\r\n            '&:before': {\r\n              content: '\"\"',\r\n              display: 'block',\r\n              position: 'absolute',\r\n              top: 0,\r\n              right: 14,\r\n              width: 10,\r\n              height: 10,\r\n              bgcolor: 'background.paper',\r\n              transform: 'translateY(-50%) rotate(45deg)',\r\n              zIndex: 0,\r\n            },\r\n          },\r\n        }}\r\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n      >\r\n        <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n          <Avatar style={{ marginTop: '10px', width: '80px', height: '80px', border: '1px solid grey', '& img': { borderRadius: '100%' } }} src={currentUser.photoURL} />\r\n          <div style={{ margin: '15px', fontSize: '20px' }}>{currentUser.displayName}</div>\r\n          <div style={{\r\n            padding: '0px 20px',\r\n            width: '250px',\r\n            fontSize: '17px',\r\n            lineHeight: '25px',\r\n            fontWeight: 400,\r\n            letterSpacing: 'normal',\r\n            color: 'rgb(138, 148, 153)',\r\n            whiteSpace: 'nowrap',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            textAlign: 'center',\r\n            marginBottom: '10px'\r\n          }}>{currentUser.email}</div>\r\n        </Box>\r\n        <MenuItem onClick={() => navigate('/account/me')}>\r\n          <ListItemIcon>\r\n            <AccountCircleIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary='Account' />\r\n        </MenuItem>\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <SettingsIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary='Preferences' />\r\n        </MenuItem>\r\n        <Divider />\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <HelpOutlineIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary='Help' />\r\n        </MenuItem>\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <AddToPhotosIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary='Apps' />\r\n        </MenuItem>\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <FavoriteBorderIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary='Spread the love' />\r\n        </MenuItem>\r\n        <MenuItem onClick={handleLogout}>\r\n          <ListItemIcon>\r\n            <ExitToAppIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary='Logout' />\r\n        </MenuItem>\r\n      </Menu>\r\n    </React.Fragment >\r\n  );\r\n}","import React  from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport MindMap from '../../components/MindMapBox';\r\nimport SideBar from '../../components/layout/Sidebar';\r\n\r\nexport default function MainLayout() {\r\n    return (\r\n        <MindMap>\r\n            <SideBar>\r\n                <Outlet />\r\n            </SideBar>\r\n        </MindMap>\r\n    )\r\n}","import * as React from 'react';\r\nimport { useLocation, useNavigate, NavLink } from 'react-router-dom';\r\nimport {\r\n    Box,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    styled\r\n} from '@material-ui/core';\r\nimport classNames from 'classnames';\r\nimport DeviceHubIcon from '@material-ui/icons/DeviceHub';\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport LanguageIcon from '@material-ui/icons/Language';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport { withStyles } from '@material-ui/styles';\r\n\r\nconst styles = (theme) => ({\r\n    root: {\r\n        minHeight: 48,\r\n        fontSize: 15,\r\n        borderRadius: 0,\r\n        cursor: 'pointer',\r\n        marginBottom: '2px',\r\n        '&.open': { borderRadius: '15px' },\r\n        '&.active': {\r\n            backgroundColor: theme.palette.primary.main,\r\n            color: theme.palette.secondary.contrastText + '!important',\r\n            pointerEvents: 'none',\r\n            '& .list-item-text-primary': {\r\n                color: 'inherit'\r\n            },\r\n            '& .list-item-icon': {\r\n                color: 'inherit'\r\n            }\r\n        },\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.primary.light,\r\n        },\r\n        '& .list-item-icon': {},\r\n        '& .list-item-text': {\r\n            padding: '0 0 0 16px'\r\n        },\r\n        color: 'inherit!important',\r\n        textDecoration: 'none!important',\r\n    }\r\n});\r\n\r\nconst NavBar = styled('nav', { shouldForwardProp: (prop) => prop !== 'open' })(\r\n    ({ theme, open }) => ({\r\n        padding: '15px',\r\n        ...(!open && { padding: '10px 0' }),\r\n    }),\r\n);\r\n\r\nconst data = [\r\n    {\r\n        label: 'Me',\r\n        link: 'me',\r\n        active: true,\r\n        icon: <DeviceHubIcon />\r\n    },\r\n    {\r\n        label: 'MindMeister',\r\n        link: 'mindmeister',\r\n        active: false,\r\n        icon: <AccessTimeIcon />\r\n    },\r\n    {\r\n        label: 'Plan',\r\n        link: 'plan',\r\n        active: false,\r\n        icon: <StarBorderIcon />\r\n    },\r\n    {\r\n        label: 'Settings',\r\n        link: 'settings',\r\n        active: true,\r\n        icon: <LanguageIcon />\r\n    },\r\n    {\r\n        label: 'Integrations',\r\n        link: '/integrations',\r\n        active: false,\r\n        icon: <DeleteOutlineIcon />\r\n    }\r\n];\r\n\r\nfunction CustomizedList({ classes, open }) {\r\n    const location = useLocation();\r\n\r\n    return (\r\n        <Box >\r\n            <NavBar open={open}>\r\n                {\r\n                    data.map((item) => {\r\n                        return (\r\n                            <ListItem \r\n                                button\r\n                                key={item.label}\r\n                                component={NavLink}\r\n                                to={item.link}\r\n                                className={classNames(classes.root, { 'open': open, 'active': (location.pathname === item.link) })}\r\n                                onClick={() => { }}\r\n                                disabled={!item.active}\r\n                            >\r\n                                <ListItemIcon style={{ color: 'inherit', paddingRight: 1 }}>\r\n                                    {item.icon}\r\n                                </ListItemIcon>\r\n                                <ListItemText\r\n                                    primary={item.label}\r\n                                    primaryTypographyProps={{ fontWeight: 'medium' }}\r\n                                />\r\n                            </ListItem>\r\n                        )\r\n                    })\r\n                }\r\n            </NavBar>\r\n        </Box>\r\n    );\r\n}\r\n\r\nCustomizedList.propTypes = {\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(CustomizedList);","import * as React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { styled, useTheme } from '@material-ui/core/styles';\r\nimport {\r\n    Box,\r\n    Button,\r\n    Toolbar,\r\n    CssBaseline,\r\n    Typography,\r\n    IconButton,\r\n    Avatar,\r\n    useMediaQuery,\r\n    Drawer as MaterialDrawer,\r\n    AppBar as MaterialAppBar,\r\n} from '@material-ui/core';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\n\r\nimport AccountSideBarList from './config';\r\nimport { routes } from '../../../setup/routes';\r\nimport { selectAuthItem } from 'store/selectors';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst openedMixin = (theme) => ({\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    backgroundColor: '#293033',\r\n    color: 'white',\r\n    overflowX: 'hidden',\r\n});\r\n\r\nconst closedMixin = (theme) => ({\r\n    transition: theme.transitions.create('width', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    backgroundColor: '#293033',\r\n    color: 'white',\r\n    overflowX: 'hidden',\r\n    width: `calc(${theme.spacing(7)}px + 1px)`,\r\n    [theme.breakpoints.up('sm')]: {\r\n        width: `calc(${theme.spacing(7)}px + 1px)`,\r\n    },\r\n});\r\n\r\nconst DrawerHeader = styled('div')(({ theme }) => ({\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: theme.spacing(3, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n}));\r\n\r\nconst AppBar = styled(MaterialAppBar, {\r\n    shouldForwardProp: (prop) => prop !== 'open',\r\n})(({ theme, open }) => ({\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    left: `calc(${theme.spacing(7)}px + 1px)`,\r\n    width: `calc(100vw - ${theme.spacing(7)}px - 1px)`,\r\n    ...(open && {\r\n        marginLeft: drawerWidth,\r\n        left: 0,\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        transition: theme.transitions.create(['width', 'margin'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    }),\r\n}));\r\n\r\nconst Drawer = styled(MaterialDrawer, { shouldForwardProp: (prop) => prop !== 'open' })(\r\n    ({ theme, open }) => ({\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n        whiteSpace: 'nowrap',\r\n        boxSizing: 'border-box',\r\n        ...(open && {\r\n            ...openedMixin(theme),\r\n            '& .MuiDrawer-paper': openedMixin(theme),\r\n        }),\r\n        ...(!open && {\r\n            ...closedMixin(theme),\r\n            '& .MuiDrawer-paper': closedMixin(theme),\r\n        }),\r\n    }),\r\n);\r\n\r\nexport default function AccountSidebar(props) {\r\n\r\n    const theme = useTheme();\r\n    const [open, setOpen] = React.useState(true);\r\n\r\n    const selectAuth = useSelector(selectAuthItem('currentUser'));\r\n    const currentUser = selectAuth.data;\r\n\r\n    const navigate = useNavigate();\r\n    const matches = useMediaQuery('(min-width:800px)');\r\n\r\n    const location = useLocation();\r\n\r\n    function search(routes, path) {\r\n        for (let i = 0; i < routes.length; i++) {\r\n            const route = routes[i];\r\n            if (route.path == path) return route;\r\n            if (route.children) {\r\n                let child_route = search(route.children, path);\r\n                if (child_route) return child_route;\r\n            }\r\n        }\r\n    }\r\n\r\n    const currentRoute = search(routes, location.pathname);\r\n\r\n\r\n    React.useEffect(() => {\r\n        setOpen(matches);\r\n    }, [matches]);\r\n\r\n    const handleDrawerToggle = () => {\r\n        setOpen(!open);\r\n    };\r\n\r\n    return (\r\n        <Box style={{ display: 'flex' }}>\r\n            <CssBaseline />\r\n            <AppBar position=\"fixed\"\r\n                open={open}\r\n                style={{\r\n                    backgroundColor: '#293033',\r\n                    color: 'black',\r\n                    boxShadow: 'none',\r\n                }}\r\n            >\r\n                <Toolbar style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    backgroundColor: 'white',\r\n                    minHeight: '64px',\r\n                    borderTopLeftRadius: 20,\r\n                    // ...(open && { borderTopLeftRadius: 20 })\r\n                }}>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerToggle}\r\n                        edge=\"start\"\r\n                        style={{\r\n                            marginRight: '30px',\r\n                            color: 'black',\r\n                        }}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Box style={{ display: 'flex', justifyContent: 'space-between', flex: '1' }}>\r\n                        <Typography variant=\"h6\" noWrap component=\"div\">\r\n                            {currentRoute.name}\r\n                        </Typography>\r\n                        <Typography variant=\"h6\" noWrap component=\"div\" style={{}}>\r\n                            <Button onClick={() => navigate('/dashboard')}>Back to Mainpage</Button>\r\n                        </Typography>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Drawer variant=\"permanent\" open={open}>\r\n                <DrawerHeader>\r\n                    <div style={{ display: 'flex', width: '100%', alignItems: 'center', justifyContent: 'center', flexDirection: 'column' }}>\r\n                        <Avatar style={{\r\n                            width: '130px', height: '130px', ...(!open && { width: '45px', height: '45px' }), mt: 2, border: '5px double grey', '& img': { borderRadius: '100%' },\r\n                        }} src={currentUser.photoURL} />\r\n                        <div style={{ marginTop: '30px', fontSize: '17px', ...(!open && { display: 'none' }) }} >{currentUser.displayName}</div>\r\n                    </div>\r\n                </DrawerHeader>\r\n                <AccountSideBarList open={open} />\r\n            </Drawer>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n}","import React  from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport MindMap from '../../components/MindMapBox';\r\nimport AccountSidebar from '../../components/layout/AccountSidebar';\r\nimport Footer from '../../components/layout/Footer';\r\n\r\nexport default function MainLayout() {\r\n    return (\r\n        <MindMap>\r\n            <AccountSidebar>\r\n                <Outlet />\r\n            </AccountSidebar>\r\n        </MindMap>\r\n    )\r\n}","import * as React from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport {\r\n    Box,\r\n    Grid,\r\n    styled,\r\n    Menu,\r\n    alpha,\r\n    Button,\r\n    MenuItem,\r\n    Divider\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\nimport InputIcon from '@material-ui/icons/Input';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport classNames from 'classnames';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport SendIcon from '@material-ui/icons/Send';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        height: '100vh',\r\n        padding: 30\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        padding: theme.spacing(5, 2),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n    },\r\n    Item: {\r\n        ...theme.typography.body2,\r\n        flex: 'auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        backgroundColor: 'rgb(0 0 0 / 9%)',\r\n        textAlign: 'center',\r\n        boxShadow: 'none',\r\n        borderRadius: 15,\r\n        fontSize: 11,\r\n        margin: 3,\r\n        flexGrow: 1,\r\n        flexShrink: 1,\r\n        height: '100px',\r\n        color: theme.palette.text.secondary,\r\n        '&:hover': {\r\n            backgroundColor: '#d3d3d3'\r\n        }\r\n    }\r\n}));\r\n\r\nconst Dashboard = (props) => {\r\n    const classes = useStyles();\r\n    const { type } = props;\r\n    const location = useLocation();\r\n    const currentPath = location.pathname;\r\n\r\n    return (\r\n        <Box component=\"main\" className={classNames(classes.root, '')}>\r\n            <div className={classNames(classes.drawerHeader)} />\r\n            <Grid container spacing={1} style={{ cursor: 'pointer' }}>\r\n                <Grid item xs={12} xl={6} sm={3} md={2} style={{ ...((currentPath !== '/dashboard') && { display: 'none' }) }}>\r\n                    <div className={classNames(classes.Item, '')}>\r\n                        <CustomizedMenus />\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} xl={6} sm={3} md={2}>\r\n                    <div className={classNames(classes.Item, '')}>\r\n                        <div style={{}}>\r\n                            <svg height={50} viewBox=\"0 0 80 60\"><g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(7 8)\"><path stroke=\"#96DB0B\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.467\" d=\"M34.835 13.193l.615-2.955A7.333 7.333 0 0 1 42.63 4.4h11.637\"></path><path stroke=\"#FA0\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.467\" d=\"M34.842 30.844l.608 2.918a7.333 7.333 0 0 0 7.18 5.838h11.637\"></path><path stroke=\"#2BD9D9\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.467\" d=\"M31.518 13.11l-.43-2.582A7.333 7.333 0 0 0 23.854 4.4H12.467\"></path><path stroke=\"#D01F2E\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.467\" d=\"M31.493 31.044l-.405 2.428a7.333 7.333 0 0 1-7.234 6.128H12.467\"></path><path stroke=\"#FFD426\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.467\" d=\"M42.088 22H63.8\"></path><path stroke=\"#A179F2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.467\" d=\"M2.2 22h21\"></path><rect width=\"10\" height=\"4\" x=\"28\" y=\"20\" fill=\"#3D474D\" rx=\"2\"></rect><rect width=\"15\" height=\"8.8\" x=\"41.8\" fill=\"#96DB0B\" rx=\"4.4\"></rect><rect width=\"15\" height=\"9\" x=\"10\" fill=\"#2BD9D9\" rx=\"4.5\"></rect><rect width=\"15\" height=\"9\" x=\"51.333\" y=\"17.6\" fill=\"#FFD426\" rx=\"4.5\"></rect><rect width=\"15\" height=\"9\" y=\"17.6\" fill=\"#A179F2\" rx=\"4.5\"></rect><rect width=\"14.667\" height=\"8.8\" x=\"41.8\" y=\"35.2\" fill=\"#FA0\" rx=\"4.4\"></rect><rect width=\"15\" height=\"9\" x=\"9\" y=\"35\" fill=\"#D01F2E\" rx=\"4.5\"></rect></g></svg>\r\n                        </div>\r\n                        <div>Mind Map</div>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} xl={6} sm={3} md={2}>\r\n                    <div className={classNames(classes.Item, '')}>\r\n                        <div style={{}}>\r\n                            <svg height={50} viewBox=\"0 0 80 60\"><g fill=\"none\" fillRule=\"evenodd\"><g stroke=\"#B2BBC0\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.47\"><path d=\"M40 14v6H22a5 5 0 0 0-5 5v3m23-14v6h18a5 5 0 0 1 5 5v3M40 14v14\"></path></g><path fill=\"#FFD426\" d=\"M35.564 26h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#FA0\" d=\"M58.564 26h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#96DB0B\" d=\"M12.564 26h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#FFD426\" d=\"M35.564 35h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#3D474D\" d=\"M35.564 7h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54V9.563c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#FA0\" d=\"M58.564 35h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#96DB0B\" d=\"M12.564 35h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#FFD426\" d=\"M35.564 44h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#FA0\" d=\"M58.564 44h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path><path fill=\"#96DB0B\" d=\"M12.564 44h8.872c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v1.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267h-8.873c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54v-1.873c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757.326-.174.65-.267 1.54-.267z\"></path></g></svg>\r\n                        </div>\r\n                        <div>Org Chart</div>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} xl={6} sm={3} md={2}>\r\n                    <div className={classNames(classes.Item, '')}>\r\n                        <div style={{}}>\r\n                            <svg height={50} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 80 60\">\r\n                                <g fill=\"none\" fillRule=\"evenodd\">\r\n                                    <path d=\"m10.836 21.189.614-2.951a7.333 7.333 0 0 1 7.18-5.838h11.637M10.84 38.839l.61 2.923A7.333 7.333 0 0 0 18.63 47.6h11.637M17.994 30H39.8M47.267 30l.859-4.152A7.333 7.333 0 0 1 55.307 20h3.96m-12 10 .859 4.152A7.333 7.333 0 0 0 55.307 40h3.96M43 30h17\" stroke=\"#B2BBC0\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <rect fill=\"#D01F2E\" x=\"4\" y=\"28\" width=\"10\" height=\"4\" rx=\"2\" />\r\n                                    <rect fill=\"#3D474D\" x=\"17.8\" y=\"8\" width=\"15\" height=\"8.8\" rx=\"3\" />\r\n                                    <rect fill=\"#3D474D\" x=\"27.333\" y=\"25.6\" width=\"15\" height=\"9\" rx=\"3\" />\r\n                                    <rect fill=\"#3D474D\" x=\"17.8\" y=\"43.2\" width=\"14.667\" height=\"8.8\" rx=\"3\" />\r\n                                    <rect fill=\"#3ECB3D\" x=\"59\" y=\"17\" width=\"15\" height=\"6\" rx=\"2\" />\r\n                                    <rect fill=\"#FFAB00\" x=\"59\" y=\"27\" width=\"15\" height=\"6\" rx=\"2\" />\r\n                                    <rect fill=\"#8A9499\" x=\"59\" y=\"37\" width=\"15\" height=\"6\" rx=\"2\" />\r\n                                </g>\r\n                            </svg>\r\n                        </div>\r\n                        <div>Project Retrospective</div>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} xl={6} sm={3} md={2}>\r\n                    <div className={classNames(classes.Item, '')}>\r\n                        <div style={{}}>\r\n                            <svg height={50} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 80 60\">\r\n                                <g fill=\"none\" fillRule=\"evenodd\">\r\n                                    <path d=\"m41.845 21.143.605-2.905a7.333 7.333 0 0 1 7.18-5.838h11.637\" stroke=\"#4070FF\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <path d=\"m41.846 38.863.604 2.9a7.333 7.333 0 0 0 7.18 5.837h11.637\" stroke=\"#F7578C\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <path d=\"m38.516 21.097-.428-2.57a7.333 7.333 0 0 0-7.234-6.127H19.467h0\" stroke=\"#FFD426\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <path d=\"m38.518 38.891-.43 2.581a7.333 7.333 0 0 1-7.234 6.128H19.467h0\" stroke=\"#D01F2E\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <path stroke=\"#A179F2\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M49.002 30H70.8\" />\r\n                                    <path stroke=\"#FA0\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9.2 30H31\" />\r\n                                    <path fill=\"#3D474D\" d=\"M35 28h10v4H35z\" />\r\n                                    <path fill=\"#4070FF\" d=\"M48.8 8h15v8.8h-15z\" />\r\n                                    <path fill=\"#FFD426\" d=\"M17 8h15v9H17z\" />\r\n                                    <path fill=\"#A179F2\" d=\"M58.333 25.6h15v9h-15z\" />\r\n                                    <path fill=\"#FA0\" d=\"M7 25.6h15v9H7z\" />\r\n                                    <path fill=\"#F7578C\" d=\"M48.8 43.2h14.667V52H48.8z\" />\r\n                                    <path fill=\"#D01F2E\" d=\"M16 43h15v9H16z\" />\r\n                                </g>\r\n                            </svg>\r\n                        </div>\r\n                        <div>Product Launch</div>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} xl={6} sm={3} md={2}>\r\n                    <div className={classNames(classes.Item, '')}>\r\n                        <div style={{}}>\r\n                            <svg height={50} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 80 60\">\r\n                                <g fill=\"none\" fillRule=\"evenodd\">\r\n                                    <path d=\"m41.837 21.18.613-2.942a7.333 7.333 0 0 1 7.18-5.838h11.637\" stroke=\"#4070FF\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <path d=\"m41.846 38.863.604 2.9a7.333 7.333 0 0 0 7.18 5.837h11.637\" stroke=\"#F7578C\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                    <path stroke=\"#A179F2\" strokeWidth=\"1.467\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M48.983 30H70.8\" />\r\n                                    <rect fill=\"#3D474D\" x=\"35\" y=\"28\" width=\"10\" height=\"4\" rx=\"2\" />\r\n                                    <rect fill=\"#4070FF\" x=\"48.8\" y=\"8\" width=\"15\" height=\"8.8\" rx=\"4.4\" />\r\n                                    <rect fill=\"#A179F2\" x=\"58.333\" y=\"25.6\" width=\"15\" height=\"9\" rx=\"4.5\" />\r\n                                    <rect fill=\"#F7578C\" x=\"48.8\" y=\"43.2\" width=\"14.667\" height=\"8.8\" rx=\"4.4\" />\r\n                                    <g transform=\"matrix(-1 0 0 1 38.333 8)\">\r\n                                        <path d=\"m.001 13.164.61-2.926A7.333 7.333 0 0 1 7.79 4.4h11.636\" stroke=\"#96DB0B\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                        <path d=\"M5.406 16.642c2.13-.522 6.716-.736 13.754-.642\" stroke=\"#FFD426\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                        <path d=\"M5.28 27.496c2.134.54 6.76.764 13.88.674\" stroke=\"#FA0\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                        <path d=\"m0 30.83.61 2.932A7.333 7.333 0 0 0 7.79 39.6h11.637\" stroke=\"#D01F2E\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                                        <rect fill=\"#96DB0B\" x=\"6.96\" width=\"15\" height=\"8.8\" rx=\"4.4\" />\r\n                                        <rect fill=\"#FFD426\" x=\"12.494\" y=\"11\" width=\"15\" height=\"9\" rx=\"4.5\" />\r\n                                        <rect fill=\"#FA0\" x=\"12.494\" y=\"24\" width=\"15\" height=\"9\" rx=\"4.5\" />\r\n                                        <rect fill=\"#D01F2E\" x=\"6.96\" y=\"35.2\" width=\"14.667\" height=\"8.8\" rx=\"4.4\" />\r\n                                    </g>\r\n                                </g>\r\n                            </svg>\r\n                        </div>\r\n                        <div>Monthly Blog Schedule</div>\r\n                    </div>\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n// const StyledMenu = styled((props) => (\r\n//     <Menu\r\n//       elevation={0}\r\n//       anchorOrigin={{\r\n//         vertical: 'bottom',\r\n//         horizontal: 'left',\r\n//       }}\r\n//       transformOrigin={{\r\n//         vertical: 'top',\r\n//         horizontal: 'left',\r\n//       }}\r\n//       {...props}\r\n//     />\r\n//   ))(({ theme }) => ({\r\n//     '& .MuiPaper-root': {\r\n//       borderRadius: 6,\r\n//       marginTop: theme.spacing(1),\r\n//       minWidth: 180,\r\n//       color:\r\n//         theme.palette.mode === 'light' ? 'rgb(55, 65, 81)' : theme.palette.grey[300],\r\n//       boxShadow:\r\n//         'rgb(128 128 128 / 25%) 5px 5px 6px 3px, rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px',\r\n//       '& .MuiMenu-list': {\r\n//         padding: '4px 0',\r\n//       },\r\n//       '& .MuiMenuItem-root': {\r\n//         '& .MuiSvgIcon-root': {\r\n//           fontSize: 18,\r\n//           color: theme.palette.text.secondary,\r\n//           marginRight: theme.spacing(1.5),\r\n//         },\r\n//         '&:active': {\r\n//           backgroundColor: alpha(\r\n//             theme.palette.primary.main,\r\n//             theme.palette.action.selectedOpacity,\r\n//           ),\r\n//         },\r\n//       },\r\n//     },\r\n//   }));\r\n\r\n//   function CustomizedMenus() {\r\n//     const navigate = useNavigate();\r\n//     const [anchorEl, setAnchorEl] = React.useState(null);\r\n//     const open = Boolean(anchorEl);\r\n//     const handleClick = (event) => {\r\n//       setAnchorEl(event.currentTarget);\r\n//     };\r\n//     const handleClose = () => {\r\n//       setAnchorEl(null);\r\n//     };\r\n\r\n//     const useStyles = makeStyles((theme) => ({\r\n//       Button: {\r\n//         textAlign: 'center',\r\n//         fontSize: '20px',\r\n//         backgroundColor: theme.palette.primary.dark,\r\n//         '&:hover': {\r\n//           backgroundColor: theme.palette.primary.light,\r\n//           boxShadow: '0px 9px 20px -4px #36c4efd4',\r\n//         },\r\n//         boxShadow: 'none',\r\n//         borderRadius: '15px',\r\n//         padding: 0,\r\n//         margin: 0,\r\n//         flexGrow: 1,\r\n//         flexShrink: 1,\r\n//         height: '100px',\r\n//         width: '100%',\r\n//       }\r\n//     }));\r\n//     const classes = useStyles();\r\n\r\n//     return (\r\n//       <div>\r\n//         <Button\r\n//           variant=\"contained\"\r\n//           id=\"main-sub-button\"\r\n//           className={classes.Button}\r\n//           aria-controls={open ? 'main-sub-menu' : undefined}\r\n//           aria-haspopup=\"true\"\r\n//           aria-expanded={open ? 'true' : undefined}\r\n//           disableElevation\r\n//           onClick={handleClick}\r\n//         >\r\n//           <AddIcon style={{ width: '50px', height: '50px' }} />\r\n//         </Button>\r\n//         <StyledMenu\r\n//           id=\"main-sub-menu\"\r\n//           MenuListProps={{\r\n//             'aria-labelledby': 'main-sub-button',\r\n//           }}\r\n//           anchorEl={anchorEl}\r\n//           open={open}\r\n//           onClose={handleClose}\r\n//         >\r\n//           <MenuItem onClick={() => navigate('/mindmap')} disableRipple>\r\n//             <EditIcon />\r\n//             New mind map\r\n//           </MenuItem>\r\n//           <MenuItem onClick={handleClose} disableRipple>\r\n//             <InsertDriveFileIcon />\r\n//             New from template\r\n//           </MenuItem>\r\n//           <MenuItem onClick={handleClose} disableRipple>\r\n//             <CreateNewFolderIcon />\r\n//             New folder\r\n//           </MenuItem>\r\n//           <Divider style={{ my: 0.5 }} />\r\n//           <MenuItem onClick={handleClose} disableRipple>\r\n//             <InputIcon />\r\n//             Import\r\n//           </MenuItem>\r\n//         </StyledMenu>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\nconst StyledMenu = withStyles((theme) => (\r\n    {\r\n        paper: {\r\n            borderRadius: '4px',\r\n            boxShadow: '3px 2px 10px 0px grey',\r\n            '& ul': {\r\n                padding: '5px 0',\r\n            },\r\n            '& li': {\r\n                '& div': {\r\n                    minWidth: 0,\r\n                },\r\n                '& svg': {\r\n                    fontSize: 18,\r\n                    color: theme.palette.text.secondary,\r\n                    marginRight: theme.spacing(1.5),\r\n                },\r\n                '&:hover': {\r\n                    backgroundColor: theme.palette.primary.light,\r\n                },\r\n                '&:active': {\r\n                    backgroundColor: alpha(\r\n                        theme.palette.primary.dark,\r\n                        theme.palette.action.selectedOpacity,\r\n                    ),\r\n                },\r\n            }\r\n        },\r\n\r\n    }\r\n))((props) => (\r\n    <Menu\r\n        elevation={0}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n        }}\r\n        transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'left',\r\n        }}\r\n        {...props}\r\n    />\r\n));\r\n\r\nconst StyledMenuItem = withStyles((theme) => ({\r\n    root: {\r\n        '&:focus': {\r\n            backgroundColor: theme.palette.primary.main,\r\n            '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n                color: theme.palette.common.white,\r\n            },\r\n        },\r\n    },\r\n}))(MenuItem);\r\n\r\nfunction CustomizedMenus() {\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n    const useStyles = makeStyles((theme) => ({\r\n        Button: {\r\n            textAlign: 'center',\r\n            fontSize: '20px',\r\n            '&:hover': {\r\n                boxShadow: `0px 9px 20px -4px ${theme.palette.primary.dark}`,\r\n            },\r\n            boxShadow: 'none',\r\n            borderRadius: '15px',\r\n            padding: 0,\r\n            margin: 0,\r\n            flexGrow: 1,\r\n            flexShrink: 1,\r\n            height: '100px',\r\n            width: '100%',\r\n        }\r\n    }));\r\n    const navigate = useNavigate();\r\n    const classes = useStyles();\r\n    return (\r\n        <div>\r\n            <Button\r\n                className={classes.Button}\r\n                aria-controls=\"customized-menu\"\r\n                aria-haspopup=\"true\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n            >\r\n                <AddIcon style={{ width: '50px', height: '50px' }} />\r\n            </Button>\r\n            <Menu\r\n                id=\"customized-menu\"\r\n                color='primary'\r\n                anchorEl={anchorEl}\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'left',\r\n                }}\r\n            >\r\n                <MenuItem onClick={() => navigate('/mindmap')}>\r\n                    <ListItemIcon>\r\n                        <EditIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"New mind map\" />\r\n                </MenuItem>\r\n                <MenuItem onClick={handleClose}>\r\n                    <ListItemIcon>\r\n                        <InsertDriveFileIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"New from template\" />\r\n                </MenuItem>\r\n                <MenuItem onClick={handleClose}>\r\n                    <ListItemIcon>\r\n                        <CreateNewFolderIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"New folder\" />\r\n                </MenuItem>\r\n                <Divider style={{ my: 0.5 }} />\r\n                <MenuItem onClick={handleClose}>\r\n                    <ListItemIcon>\r\n                        <InputIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText primary=\"Import\" />\r\n                </MenuItem>\r\n            </Menu>\r\n        </div>\r\n    );\r\n}\r\nexport default Dashboard;","import debug from 'debug';\nimport memoizeOne from 'memoize-one';\nimport warning from 'tiny-warning';\nimport { Model } from './models';\nimport { CorePlugin } from './plugins/core';\nimport { ModelChangeCallback, OnChangeFunction } from './types';\n\nconst log = debug('core:controller');\n\nexport interface IControllerOption {\n  plugins?: Array<any>;\n  model?: Model;\n  readOnly?: boolean;\n  onChange?: OnChangeFunction;\n}\n\nexport interface IControllerRunContext {\n  controller: Controller;\n  model?: Model;\n  topicKey?: KeyType;\n  getRef?: Function;\n}\n\nexport interface IDiagram {\n  getDiagramProps(): IDiagramProps;\n  openNewModel(newModel: Model);\n}\n\nexport interface IDiagramProps {\n  model: Model;\n  controller: Controller;\n}\n\nfunction registerPlugin(controller: Controller, plugin: any) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(p => registerPlugin(controller, p));\n    return;\n  }\n\n  if (plugin == null) {\n    return;\n  }\n\n  for (const key in plugin) {\n    const fn = plugin[key];\n    controller.middleware[key] = controller.middleware[key] || [];\n    controller.middleware[key].push(fn);\n  }\n}\n\n// modified from koa-compose\nfunction compose(middleware) {\n  if (!Array.isArray(middleware))\n    throw new TypeError('Middleware stack must be an array!');\n  for (const fn of middleware) {\n    if (typeof fn !== 'function')\n      throw new TypeError('Middleware must be composed of functions!');\n  }\n\n  return function(context, next) {\n    // last called middleware #\n    let index = -1;\n    return dispatch(0);\n    function dispatch(i) {\n      if (i <= index) throw new Error('next() called multiple times');\n      index = i;\n      let fn = middleware[i];\n      if (i === middleware.length) fn = next;\n      if (!fn) return null;\n      try {\n        return fn(context, dispatch.bind(null, i + 1));\n      } catch (err) {\n        throw err;\n      }\n    }\n  };\n}\n\nexport class Controller {\n  middleware: Map<string, Function[]>;\n  private readonly onChange: OnChangeFunction;\n  public readOnly: boolean;\n  public currentModel: Model;\n\n  constructor(options: IControllerOption = {}) {\n    const { plugins = [], onChange, readOnly } = options;\n    this.readOnly = readOnly;\n    this.onChange = onChange;\n    this.middleware = new Map();\n    const corePlugin = CorePlugin({ plugins });\n    registerPlugin(this, corePlugin);\n  }\n\n  run(key: string, ...args: any[]) {\n    const { middleware } = this;\n    const fns = middleware[key] || [];\n    warning(fns.length !== 0, `the middleware function ${key} is not found!`);\n    const composedFn = memoizeOne(compose)(fns);\n    // @ts-ignore\n    return composedFn(...args);\n  }\n\n  getValue(propKey: string, arg?) {\n    return this.run('getValue', { ...arg, propKey });\n  }\n\n  change(model: Model, callback?: ModelChangeCallback) {\n    this.onChange(model, callback);\n    this.currentModel = model;\n  }\n}\n","import { Model } from '../models';\n\nexport type KeyType = string;\n\nexport type KeyPath = KeyType[];\n\nexport const TopicDirection = {\n  LEFT: 'L', // 从右向左\n  RIGHT: 'R', // 从左向右\n  BOTTOM: 'B', // 从上往下\n  MAIN: 'M' // root\n};\n\nexport enum DiagramLayoutType {\n  LEFT_TO_RIGHT,\n  RIGHT_TO_LEFT,\n  LEFT_AND_RIGHT,\n  TOP_TO_BOTTOM\n}\n\nexport const TopicVisualLevel = {\n  ROOT: 0,\n  PRIMARY: 1,\n  NORMAL: 2\n};\n\nexport const BlockType = {\n  CONTENT: 'CONTENT',\n  DESC: 'DESC'\n};\n\nexport const FocusMode = {\n  NORMAL: 'NORMAL',\n  EDITING_CONTENT: 'EDITING_CONTENT',\n  EDITING_DESC: 'EDITING_DESC',\n  SHOW_POPUP: 'SHOW_POPUP',\n  DRAGGING: 'DRAGGING'\n};\n\nexport type ModelChangeCallback = () => void;\n\nexport type OnChangeFunction = (\n  model: Model,\n  callback?: ModelChangeCallback\n) => void;\n\nexport const TopicRelationship = {\n  ANCESTOR: 'ANCESTOR',\n  DESCENDANT: 'DESCENDANT',\n  SIBLING: 'SIBLING',\n  NONE: 'NONE'\n};\n\nexport const OpType = {\n  TOGGLE_COLLAPSE: 'TOGGLE_COLLAPSE',\n  COLLAPSE_ALL: 'COLLAPSE_ALL',\n  EXPAND_ALL: 'EXPAND_ALL',\n  EXPAND_TO: 'EXPAND_TO',\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  FOCUS_TOPIC: 'FOCUS_TOPIC',\n  SET_FOCUS_MODE: 'SET_FOCUS_MODE',\n  SET_STYLE: 'SET_STYLE',\n  CLEAR_ALL_CUSTOM_STYLE: 'CLEAR_ALL_CUSTOM_STYLE',\n  SET_THEME: 'SET_THEME',\n  SET_TOPIC_BLOCK: 'SET_TOPIC_BLOCK',\n  DELETE_TOPIC_BLOCK: 'DELETE_TOPIC_BLOCK',\n  // SET_TOPIC_CONTENT: 'SET_TOPIC_CONTENT',\n  // SET_TOPIC_DESC: 'SET_TOPIC_DESC',\n  START_EDITING_CONTENT: 'START_EDITING_CONTENT',\n  START_EDITING_DESC: 'START_EDITING_DESC',\n  DRAG_AND_DROP: 'DRAG_AND_DROP',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT',\n  SET_LAYOUT_DIR: 'SET_LAYOUT_DIR'\n};\n","export function CorePlugin(options: any = {}) {\n  const { plugins = [] } = options;\n  return [...plugins];\n}\n","import { KeyType } from '@blink-mind/core';\n\nexport function getLinkKey(fromKey: KeyType, toKey: KeyType) {\n  return `link-${fromKey}-${toKey}`;\n}\n\nexport type Point = {\n  x: number;\n  y: number;\n};\n\nexport function centerY(rect: ClientRect) {\n  return (rect.top + rect.bottom) / 2;\n}\n\nexport function centerX(rect: ClientRect) {\n  return (rect.left + rect.right) / 2;\n}\n\nexport function centerPointX(p1, p2) {\n  return (p1.x + p2.x) / 2;\n}\n\nexport function centerPointY(p1, p2) {\n  return (p1.y + p2.y) / 2;\n}\n\nexport function center(rect) {\n  return [(rect.left + rect.right) / 2, (rect.top + rect.bottom) / 2];\n}\nexport function getRelativeRect(\n  el: HTMLElement,\n  rel: HTMLElement,\n  scale: number = 1\n) {\n  const rect = el.getBoundingClientRect();\n  const relRect = rel.getBoundingClientRect();\n\n  const relCenter = center(relRect);\n  const elCenter = center(rect);\n  elCenter[0] = (elCenter[0] - relCenter[0]) / scale;\n  elCenter[1] = (elCenter[1] - relCenter[1]) / scale;\n  const width = rect.width / scale;\n  const height = rect.height / scale;\n  return {\n    left: elCenter[0] - width / 2,\n    right: elCenter[0] + width / 2,\n    top: elCenter[1] - height / 2,\n    bottom: elCenter[1] + height / 2,\n    width,\n    height\n  };\n}\n\nexport function getRelativeVector(el: HTMLElement, rel: HTMLElement) {\n  const rect = el.getBoundingClientRect();\n  const relRect = rel.getBoundingClientRect();\n  const relCenter = center(relRect);\n  const elCenter = center(rect);\n  return [elCenter[0] - relCenter[0], elCenter[1] - relCenter[1]];\n}\n\nexport * from './icon';\nexport * from './keys';\nexport * from './events';\nexport * from './file';\nexport * from './css';\n","import { List, Record } from 'immutable';\nimport { KeyType } from '../types';\n\ntype BlockRecordType = {\n  type: string;\n  key?: KeyType;\n  data: any;\n};\n\nconst defaultBlockRecord: BlockRecordType = {\n  type: null,\n  key: null,\n  data: null\n};\n\nexport class Block extends Record(defaultBlockRecord) {\n  get data() {\n    return this.get('data');\n  }\n\n  get type() {\n    return this.get('type');\n  }\n\n  static create(obj: BlockRecordType): Block {\n    return new Block(obj);\n  }\n\n  static createList(obj: any): List<Block> {\n    if (List.isList(obj) || Array.isArray(obj)) {\n      // @ts-ignore\n      return List(obj.map(Block.create));\n    }\n    throw new Error(\n      `Block.createList only accepts Array or List, but you passed it: ${obj}`\n    );\n  }\n}\n","import { List, Record } from 'immutable';\nimport { BlockType, KeyType } from '../types';\nimport { Block } from './block';\nimport { Relation } from './relation';\n\ntype TopicRecordType = {\n  key: KeyType;\n  parentKey?: KeyType;\n  collapse?: boolean;\n  subKeys?: List<KeyType>;\n  blocks?: List<Block>;\n  relations?: List<Relation>;\n  style?: string;\n};\n\ntype CreateTopicArg = {\n  key: KeyType;\n  parentKey?: KeyType;\n  collapse?: boolean;\n  content?: any;\n  subKeys?: List<KeyType> | KeyType[];\n  style?: string;\n};\n\nconst defaultTopicRecord: TopicRecordType = {\n  key: null,\n  parentKey: null,\n  collapse: false,\n  subKeys: null,\n  blocks: null,\n  relations: null,\n  style: null\n};\n\nexport class Topic extends Record(defaultTopicRecord) {\n  get key() {\n    return this.get('key');\n  }\n  get parentKey() {\n    return this.get('parentKey');\n  }\n  get collapse() {\n    return this.get('collapse');\n  }\n  get subKeys(): List<KeyType> {\n    return this.get('subKeys');\n  }\n  get blocks(): List<Block> {\n    return this.get('blocks');\n  }\n  get relations() {\n    return this.get('relations');\n  }\n  get style() {\n    return this.get('style');\n  }\n\n  getBlock(type: string): { index: number; block: Block } {\n    const index = this.blocks.findIndex(b => b.type === type);\n    if (index === -1) return { index, block: null };\n    return { index, block: this.blocks.get(index) };\n  }\n\n  static fromJSON(obj) {\n    const {\n      key,\n      parentKey = null,\n      blocks,\n      subKeys = [],\n      collapse = false\n    } = obj;\n    return new Topic({\n      key,\n      parentKey,\n      collapse,\n      subKeys: List(subKeys),\n      blocks: Block.createList(blocks)\n    });\n  }\n\n  static create({\n    key,\n    parentKey = null,\n    content = '',\n    subKeys = [],\n    collapse = false\n  }: CreateTopicArg): Topic {\n    const block = Block.create({\n      type: BlockType.CONTENT,\n      data: content,\n      key: null\n    });\n    const blocks = List([block]);\n    return new Topic({\n      key,\n      parentKey,\n      blocks,\n      subKeys: List(subKeys),\n      collapse\n    });\n  }\n}\n","import { KeyPath, KeyType, TopicRelationship } from '../../types';\nimport { Model } from '../model';\n\nexport function getAllSubTopicKeys(model: Model, topicKey: KeyType): KeyType[] {\n  const item = model.getTopic(topicKey);\n\n  let res = [];\n  if (item.subKeys.size > 0) {\n    const subKeys = item.subKeys.toArray();\n    res.push(...subKeys);\n    res = subKeys.reduce((acc, key) => {\n      acc.push(...getAllSubTopicKeys(model, key));\n      return acc;\n    }, res);\n  }\n  return res;\n}\n\nexport function getKeyPath(\n  model: Model,\n  topicKey: KeyType,\n  reverse: boolean = false\n): KeyPath {\n  const res = [topicKey];\n  let item = model.getTopic(topicKey);\n  while (item.parentKey) {\n    reverse ? res.push(item.parentKey) : res.unshift(item.parentKey);\n    item = model.getParentTopic(item.key);\n  }\n  return res;\n}\n\nexport function getRelationship(\n  model: Model,\n  srcKey: KeyType,\n  dstKey: KeyType\n): string {\n  const srcTopic = model.getTopic(srcKey);\n  const dstTopic = model.getTopic(dstKey);\n  if (srcTopic && dstTopic) {\n    if (srcTopic.parentKey == dstTopic.parentKey)\n      return TopicRelationship.SIBLING;\n    let pTopic = srcTopic;\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === dstTopic.key)\n        return TopicRelationship.DESCENDANT;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n    pTopic = dstTopic;\n    while (pTopic.parentKey) {\n      if (pTopic.parentKey === srcTopic.key) return TopicRelationship.ANCESTOR;\n      pTopic = model.getParentTopic(pTopic.key);\n    }\n  }\n  return TopicRelationship.NONE;\n}\n","import debug from 'debug';\nimport { FocusMode, TopicRelationship } from '../../types';\nimport { createKey } from '../../utils';\nimport { Block } from '../block';\nimport { Topic } from '../topic';\nimport { getAllSubTopicKeys, getKeyPath, getRelationship } from '../utils';\nimport {\n  BaseModifierArg,\n  DeleteBlockArg,\n  ModifierResult,\n  SetBlockDataArg,\n  SetFocusModeArg,\n  SetLayoutDirArg,\n  SetThemeArg,\n  SetTopicStyleArg,\n  SetZoomFactorArg\n} from './types';\n\nconst log = debug('modifier');\n\nfunction toggleCollapse({ model, topicKey }: BaseModifierArg): ModifierResult {\n  let topic = model.getTopic(topicKey);\n  if (topic && topic.subKeys.size !== 0) {\n    topic = topic.merge({\n      collapse: !topic.collapse\n    });\n    model = model.updateIn(\n      ['topics', topic.key, 'collapse'],\n      collapse => !collapse\n    );\n  }\n  model = focusTopic({ model, topicKey, focusMode: FocusMode.NORMAL });\n  return model;\n}\n\nfunction collapseAll({ model }: BaseModifierArg): ModifierResult {\n  log('collapseAll');\n  const topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log(model);\n  model = model.withMutations(m => {\n    topicKeys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], true);\n    });\n  });\n  log(model);\n  return model;\n}\n\nfunction expandAll({ model }: BaseModifierArg): ModifierResult {\n  const topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log(model);\n  model = model.withMutations(m => {\n    topicKeys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  log(model);\n  return model;\n}\n\nfunction expandTo({ model, topicKey }: BaseModifierArg): ModifierResult {\n  const keys = getKeyPath(model, topicKey).filter(t => t !== topicKey);\n  model = model.withMutations(m => {\n    keys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  // 要让这个节点在视口中可见\n  if (\n    getRelationship(model, topicKey, model.editorRootTopicKey) !==\n    TopicRelationship.DESCENDANT\n  ) {\n    model = model.set('editorRootTopicKey', model.rootTopicKey);\n  }\n  return model;\n}\n\nfunction focusTopic({\n  model,\n  topicKey,\n  focusMode\n}: SetFocusModeArg): ModifierResult {\n  log('focus topic');\n  if (topicKey !== model.focusKey) model = model.set('focusKey', topicKey);\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction setFocusMode({ model, focusMode }: SetFocusModeArg): ModifierResult {\n  log('setFocusMode');\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction addChild({ model, topicKey }: BaseModifierArg): ModifierResult {\n  log('addChild:', topicKey);\n  let topic = model.getTopic(topicKey);\n  if (topic) {\n    const child = Topic.create({ key: createKey(), parentKey: topic.key });\n    topic = topic\n      .set('collapse', false)\n      .update('subKeys', subKeys => subKeys.push(child.key));\n    model = model.update('topics', topics =>\n      topics.set(topicKey, topic).set(child.key, child)\n    );\n    return focusTopic({\n      model,\n      topicKey: child.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n  return model;\n}\n\nfunction addSibling({ model, topicKey }: BaseModifierArg): ModifierResult {\n  if (topicKey === model.rootTopicKey) return model;\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const pItem = model.getTopic(topic.parentKey);\n    const idx = pItem.subKeys.indexOf(topicKey);\n    const sibling = Topic.create({ key: createKey(), parentKey: pItem.key });\n    model = model\n      .update('topics', topics => topics.set(sibling.key, sibling))\n      .updateIn(['topics', pItem.key, 'subKeys'], subKeys =>\n        subKeys.insert(idx + 1, sibling.key)\n      );\n    return focusTopic({\n      model,\n      topicKey: sibling.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n  return model;\n}\n\nfunction deleteTopic({ model, topicKey }: BaseModifierArg): ModifierResult {\n  if (topicKey === model.editorRootTopicKey) return model;\n  const item = model.getTopic(topicKey);\n  if (item) {\n    model = model.withMutations(m => {\n      m.update('topics', topics => {\n        topics = topics.delete(topicKey);\n        const deleteKeys = getAllSubTopicKeys(model, topicKey);\n        topics = topics.withMutations(t => {\n          deleteKeys.forEach(dKey => {\n            t.delete(dKey);\n          });\n        });\n        return topics;\n      });\n      m.updateIn(['topics', item.parentKey, 'subKeys'], subKeys =>\n        subKeys.delete(subKeys.indexOf(topicKey))\n      );\n      if (m.focusKey === topicKey)\n        m.set('focusKey', null).set('focusMode', null);\n    });\n  }\n\n  return model;\n}\n\n/**\n * setBlockData of one topic\n * @param model\n * @param topicKey\n * @param blockType\n * @param focusMode\n * @param data\n */\nfunction setBlockData({\n  model,\n  topicKey,\n  blockType,\n  focusMode,\n  data\n}: SetBlockDataArg): ModifierResult {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const { index, block } = topic.getBlock(blockType);\n    if (index === -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], blocks =>\n        blocks.push(\n          Block.create({\n            type: blockType,\n            data: data\n          })\n        )\n      );\n    } else {\n      if (block.data !== data) {\n        model = model.updateIn(\n          ['topics', topicKey, 'blocks', index, 'data'],\n          dt => data\n        );\n      }\n    }\n    if (focusMode) {\n      model = focusTopic({\n        model,\n        topicKey,\n        focusMode\n      });\n    }\n  }\n  return model;\n}\n\nfunction deleteBlock({ model, topicKey, blockType }: DeleteBlockArg) {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const { index } = topic.getBlock(blockType);\n    if (index !== -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], blocks =>\n        blocks.delete(index)\n      );\n    }\n    model = focusTopic({\n      model,\n      topicKey: null,\n      focusMode: null\n    });\n  }\n  return model;\n}\n\nfunction setStyle({\n  model,\n  topicKey,\n  style\n}: SetTopicStyleArg): ModifierResult {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    if (style !== topic.style) {\n      model = model.updateIn(['topics', topicKey, 'style'], s => style);\n    }\n  }\n  return model;\n}\n\nfunction setTheme({ model, theme }: SetThemeArg): ModifierResult {\n  model = model.setIn(['config', 'theme'], theme);\n  return model;\n}\n\nfunction setLayoutDir({ model, layoutDir }: SetLayoutDirArg): ModifierResult {\n  if (model.config.layoutDir === layoutDir) return model;\n  model = model.setIn(['config', 'layoutDir'], layoutDir);\n  return model;\n}\n\nfunction setEditorRootTopicKey({\n  model,\n  topicKey\n}: BaseModifierArg): ModifierResult {\n  if (model.editorRootTopicKey !== topicKey)\n    model = model.set('editorRootTopicKey', topicKey);\n  if (model.getTopic(topicKey).collapse)\n    model = model.setIn(['topics', topicKey, 'collapse'], false);\n  return model;\n}\n\nfunction setZoomFactor({\n  model,\n  zoomFactor\n}: SetZoomFactorArg): ModifierResult {\n  if (model.zoomFactor !== zoomFactor)\n    model = model.set('zoomFactor', zoomFactor);\n  return model;\n}\n\nexport default {\n  addChild,\n  addSibling,\n  toggleCollapse,\n  collapseAll,\n  expandAll,\n  expandTo,\n  focusTopic,\n  setFocusMode,\n  deleteTopic,\n  setBlockData,\n  deleteBlock,\n  setStyle,\n  setTheme,\n  setLayoutDir,\n  setEditorRootTopicKey,\n  setZoomFactor\n};\n","import { ThemeType } from './types';\n\nexport const defaultTheme: ThemeType = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      fontSize: '34px',\n      borderRadius: '35px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      fontSize: '17px',\n      padding: '4px 10px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'white'\n    }\n  }\n};\n","export type LinkStyle = {\n  lineType?: string;\n  lineWidth?: string;\n  lineColor?: string;\n  lineRadius?: number;\n};\n\nexport type TopicContentStyle = {\n  [key: string]: any;\n  background?: string;\n  color?: string;\n  fontSize?: string;\n  lineHeight?: string;\n  border?: string;\n  borderRadius?: string;\n  borderWidth?: string;\n  borderStyle?: string;\n  borderColor?: string;\n  padding?: string;\n};\n\nexport type TopicStyle = {\n  contentStyle?: TopicContentStyle;\n  linkStyle?: LinkStyle;\n  subLinkStyle?: LinkStyle;\n};\n\nexport type ThemeType = {\n  name: string;\n  background: string;\n  highlightColor: string;\n  randomColor?: boolean;\n  marginH: number;\n  marginV: number;\n\n  contentStyle?: TopicContentStyle;\n  linkStyle?: LinkStyle;\n\n  rootTopic?: TopicStyle;\n  primaryTopic?: TopicStyle;\n  normalTopic?: TopicStyle;\n};\n\nexport function isThemeType(obj: any): boolean {\n  return (\n    obj.name != null && obj.background != null && obj.highlightColor != null\n  );\n}\n\nexport interface Themes {\n  [fieldName: string]: ThemeType;\n}\n","import { Record } from 'immutable';\nimport { defaultTheme, ThemeType } from '../configs/theme';\nimport { DiagramLayoutType } from '../types';\n\ntype ConfigRecordType = {\n  readOnly?: boolean;\n  allowUndo?: boolean;\n  layoutDir?: DiagramLayoutType;\n  theme?: ThemeType;\n};\n\nconst defaultConfigRecord: ConfigRecordType = {\n  readOnly: false,\n  allowUndo: true,\n  layoutDir: DiagramLayoutType.LEFT_AND_RIGHT,\n  theme: defaultTheme\n};\n\nexport class Config extends Record(defaultConfigRecord) {\n  get layoutDir(): DiagramLayoutType {\n    return this.get('layoutDir');\n  }\n\n  get readOnly(): boolean {\n    return this.get('readOnly');\n  }\n\n  get allowUndo(): boolean {\n    return this.get('allowUndo');\n  }\n\n  get theme(): ThemeType {\n    return this.get('theme');\n  }\n\n  static fromJSON(obj) {\n    return new Config(obj);\n  }\n}\n","import { Map, Record } from 'immutable';\nimport isPlainObject from 'is-plain-object';\nimport { FocusMode, KeyType } from '../types';\nimport { createKey } from '../utils';\nimport { Config } from './config';\nimport { Topic } from './topic';\n\nexport type ExtData = Map<string, any>;\n\ntype ModelRecordType = {\n  topics: Map<KeyType, Topic>;\n  extData: ExtData; //用于插件做数据扩展\n  config: Config;\n  rootTopicKey: KeyType;\n  editorRootTopicKey?: KeyType;\n  focusKey?: KeyType;\n  focusMode?: string;\n  zoomFactor: number;\n  formatVersion?: string;\n};\n\nconst defaultModelRecord: ModelRecordType = {\n  topics: Map(),\n  extData: Map(),\n  config: new Config(),\n  rootTopicKey: null,\n  editorRootTopicKey: null,\n  focusKey: null,\n  focusMode: null,\n  formatVersion: null,\n  zoomFactor: 1\n};\n\nexport class Model extends Record(defaultModelRecord) {\n  static isModel(obj) {\n    return obj instanceof Model;\n  }\n  static create(attrs: any = null): Model {\n    if (attrs == null) return Model.createEmpty();\n    let res: Model;\n    if (Model.isModel(attrs)) {\n      res = attrs;\n    }\n\n    if (isPlainObject(attrs)) {\n      res = Model.fromJSON(attrs);\n    }\n    if (res) {\n      if (res.focusKey == null) {\n        res = res.set('focusKey', res.rootTopicKey);\n      }\n      if (res.focusMode == null) {\n        res = res.set('focusMode', FocusMode.NORMAL);\n      }\n      return res;\n    }\n\n    throw new Error(\n      `\\`Value.create\\` only accepts objects or values, but you passed it: ${attrs}`\n    );\n  }\n\n  static createEmpty(): Model {\n    const model = new Model();\n    const rootTopic = Topic.create({ key: createKey(), content: 'RootTopic' });\n    return model\n      .update('topics', topics => topics.set(rootTopic.key, rootTopic))\n      .set('rootTopicKey', rootTopic.key)\n      .set('editorRootTopicKey', rootTopic.key)\n      .set('focusKey', rootTopic.key)\n      .set('focusMode', FocusMode.NORMAL);\n  }\n\n  static fromJSON(object) {\n    let model = new Model();\n    const { topics = [], config = {}, rootTopicKey } = object;\n    let { editorRootTopicKey } = object;\n\n    if (editorRootTopicKey === undefined) editorRootTopicKey = rootTopicKey;\n\n    model = model.merge({\n      rootTopicKey,\n      editorRootTopicKey\n    });\n\n    model = model.withMutations(model => {\n      topics.forEach(topic => {\n        model.update('topics', topics =>\n          topics.set(topic.key, Topic.fromJSON(topic))\n        );\n      });\n      model.set('config', Config.fromJSON(config));\n    });\n\n    return model;\n  }\n\n  toJS() {\n    const obj = {\n      rootTopicKey: this.rootTopicKey,\n      topics: Object.values(this.topics.toJS()),\n      config: this.config,\n      extData: this.extData,\n      zoomFactor: this.zoomFactor\n    };\n    return obj;\n  }\n\n  get extData(): Map<string, any> {\n    return this.get('extData');\n  }\n\n  get topics(): Map<KeyType, Topic> {\n    return this.get('topics');\n  }\n\n  get config(): Config {\n    return this.get('config');\n  }\n\n  get formatVersion(): string {\n    return this.get('formatVersion');\n  }\n\n  get rootTopicKey(): KeyType {\n    return this.get('rootTopicKey');\n  }\n\n  get editorRootTopicKey(): KeyType {\n    return this.get('editorRootTopicKey');\n  }\n\n  get focusKey(): KeyType {\n    return this.get('focusKey');\n  }\n\n  get focusMode(): KeyType {\n    return this.get('focusMode');\n  }\n\n  get editingContentKey(): KeyType {\n    return this.focusMode === FocusMode.EDITING_CONTENT ? this.focusKey : null;\n  }\n\n  get editingDescKey(): KeyType {\n    return this.focusMode === FocusMode.EDITING_DESC ? this.focusKey : null;\n  }\n\n  getTopic(key: KeyType): Topic {\n    return this.topics.get(key);\n  }\n\n  getExtDataItem<T>(key: string, c: new () => T): T {\n    return this.extData.get(key) || new c();\n  }\n\n  getParentTopic(key: KeyType): Topic {\n    const topic = this.getTopic(key);\n    return topic.parentKey ? this.getTopic(topic.parentKey) : null;\n  }\n\n  getTopicVisualLevel(key: KeyType): number {\n    let topic = this.getTopic(key);\n    let level = 0;\n    while (topic && topic.key !== this.editorRootTopicKey) {\n      level++;\n      topic = this.getParentTopic(topic.key);\n    }\n    return level;\n  }\n\n  get rootTopic() {\n    return this.getTopic(this.rootTopicKey);\n  }\n\n  get zoomFactor() {\n    return this.get('zoomFactor');\n  }\n}\n","import debug from 'debug';\nimport { ThemeType } from '../configs/theme/types';\nimport {\n  DiagramLayoutType,\n  FocusMode,\n  KeyType,\n  TopicRelationship\n} from '../types';\nimport { createKey } from '../utils';\nimport { Block } from './block';\nimport { Model } from './model';\nimport { Topic } from './topic';\nimport { getAllSubTopicKeys, getKeyPath, getRelationship } from './utils';\n\nconst log = debug('modifier');\n\nexport type ModifierArg =\n  | BaseModifierArg\n  | SetTopicArg\n  | SetBlockDataArg\n  | SetFocusModeArg\n  | SetTopicStyleArg\n  | SetZoomFactorArg\n  | SetThemeArg\n  | SetLayoutDirArg;\n\nexport type BaseModifierArg = {\n  model: Model;\n  topicKey?: KeyType;\n};\n\nexport type SetTopicArg = BaseModifierArg & {\n  topic: Topic;\n};\n\nexport type SetBlockDataArg = BaseModifierArg & {\n  blockType: string;\n  data: any;\n  focusMode?: string;\n};\n\nexport type DeleteBlockArg = BaseModifierArg & {\n  blockType: string;\n};\n\nexport type SetFocusModeArg = BaseModifierArg & {\n  focusMode: string;\n};\n\nexport type SetTopicStyleArg = BaseModifierArg & {\n  style: string;\n};\n\nexport type SetZoomFactorArg = BaseModifierArg & {\n  zoomFactor: number;\n};\n\nexport type SetThemeArg = BaseModifierArg & {\n  theme: ThemeType;\n};\n\nexport type SetLayoutDirArg = BaseModifierArg & {\n  layoutDir: DiagramLayoutType;\n};\n\nexport type ModifierResult = Model;\n\nfunction toggleCollapse({ model, topicKey }: BaseModifierArg): ModifierResult {\n  let topic = model.getTopic(topicKey);\n  if (topic && topic.subKeys.size !== 0) {\n    topic = topic.merge({\n      collapse: !topic.collapse\n    });\n    model = model.updateIn(\n      ['topics', topic.key, 'collapse'],\n      collapse => !collapse\n    );\n  }\n  model = focusTopic({ model, topicKey, focusMode: FocusMode.NORMAL });\n  return model;\n}\n\nfunction collapseAll({ model }: BaseModifierArg): ModifierResult {\n  const topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log(model);\n  model = model.withMutations(m => {\n    topicKeys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], true);\n    });\n  });\n  model = focusTopic({\n    model,\n    topicKey: model.editorRootTopicKey,\n    focusMode: FocusMode.NORMAL\n  });\n  return model;\n}\n\nfunction expandAll({ model }: BaseModifierArg): ModifierResult {\n  const topicKeys = getAllSubTopicKeys(model, model.editorRootTopicKey);\n  log(model);\n  model = model.withMutations(m => {\n    topicKeys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  log(model);\n  return model;\n}\n\nfunction expandTo({ model, topicKey }: BaseModifierArg): ModifierResult {\n  const keys = getKeyPath(model, topicKey).filter(t => t !== topicKey);\n  model = model.withMutations(m => {\n    keys.forEach(topicKey => {\n      m.setIn(['topics', topicKey, 'collapse'], false);\n    });\n  });\n  // 要让这个节点在视口中可见\n  if (\n    getRelationship(model, topicKey, model.editorRootTopicKey) !==\n    TopicRelationship.DESCENDANT\n  ) {\n    model = model.set('editorRootTopicKey', model.rootTopicKey);\n  }\n  return model;\n}\n\nfunction focusTopic({\n  model,\n  topicKey,\n  focusMode\n}: SetFocusModeArg): ModifierResult {\n  log('focus topic');\n  if (topicKey !== model.focusKey) model = model.set('focusKey', topicKey);\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction setFocusMode({ model, focusMode }: SetFocusModeArg): ModifierResult {\n  log('setFocusMode');\n  if (focusMode !== model.focusMode) model = model.set('focusMode', focusMode);\n  return model;\n}\n\nfunction addChild({ model, topicKey }: BaseModifierArg): ModifierResult {\n  log('addChild:', topicKey);\n  let topic = model.getTopic(topicKey);\n  if (topic) {\n    const child = Topic.create({ key: createKey(), parentKey: topic.key });\n    topic = topic\n      .set('collapse', false)\n      .update('subKeys', subKeys => subKeys.push(child.key));\n    model = model.update('topics', topics =>\n      topics.set(topicKey, topic).set(child.key, child)\n    );\n    return focusTopic({\n      model,\n      topicKey: child.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n  return model;\n}\n\nfunction addSibling({ model, topicKey }: BaseModifierArg): ModifierResult {\n  if (topicKey === model.rootTopicKey) return model;\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const pItem = model.getTopic(topic.parentKey);\n    const idx = pItem.subKeys.indexOf(topicKey);\n    const sibling = Topic.create({ key: createKey(), parentKey: pItem.key });\n    model = model\n      .update('topics', topics => topics.set(sibling.key, sibling))\n      .updateIn(['topics', pItem.key, 'subKeys'], subKeys =>\n        subKeys.insert(idx + 1, sibling.key)\n      );\n    return focusTopic({\n      model,\n      topicKey: sibling.key,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  }\n  return model;\n}\n\nfunction deleteTopic({ model, topicKey }: BaseModifierArg): ModifierResult {\n  if (topicKey === model.editorRootTopicKey) return model;\n  const item = model.getTopic(topicKey);\n  if (item) {\n    model = model.withMutations(m => {\n      m.update('topics', topics => {\n        topics = topics.delete(topicKey);\n        const deleteKeys = getAllSubTopicKeys(model, topicKey);\n        topics = topics.withMutations(t => {\n          deleteKeys.forEach(dKey => {\n            t.delete(dKey);\n          });\n        });\n        return topics;\n      });\n      m.updateIn(['topics', item.parentKey, 'subKeys'], subKeys =>\n        subKeys.delete(subKeys.indexOf(topicKey))\n      );\n      if (m.focusKey === topicKey)\n        m.set('focusKey', null).set('focusMode', null);\n    });\n  }\n\n  return model;\n}\n\n/**\n * setBlockData of one topic\n * @param model\n * @param topicKey\n * @param blockType\n * @param focusMode\n * @param data\n */\nfunction setBlockData({\n  model,\n  topicKey,\n  blockType,\n  focusMode,\n  data\n}: SetBlockDataArg): ModifierResult {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const { index, block } = topic.getBlock(blockType);\n    if (index === -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], blocks =>\n        blocks.push(\n          Block.create({\n            type: blockType,\n            data: data\n          })\n        )\n      );\n    } else {\n      if (block.data !== data) {\n        model = model.updateIn(\n          ['topics', topicKey, 'blocks', index, 'data'],\n          dt => data\n        );\n      }\n    }\n    if (focusMode) {\n      model = focusTopic({\n        model,\n        topicKey,\n        focusMode\n      });\n    }\n  }\n  return model;\n}\n\nfunction deleteBlock({ model, topicKey, blockType }: DeleteBlockArg) {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    const { index } = topic.getBlock(blockType);\n    if (index !== -1) {\n      model = model.updateIn(['topics', topicKey, 'blocks'], blocks =>\n        blocks.delete(index)\n      );\n    }\n    model = focusTopic({\n      model,\n      topicKey: null,\n      focusMode: null\n    });\n  }\n  return model;\n}\n\nfunction setStyle({\n  model,\n  topicKey,\n  style\n}: SetTopicStyleArg): ModifierResult {\n  const topic = model.getTopic(topicKey);\n  if (topic) {\n    if (style !== topic.style) {\n      model = model.updateIn(['topics', topicKey, 'style'], s => style);\n    }\n  }\n  return model;\n}\n\nfunction clearAllCustomStyle({ model }: BaseModifierArg): ModifierResult {\n  model = model.withMutations(model => {\n    model.topics.keySeq().forEach(key => {\n      model.setIn(['topics', key, 'style'], null);\n    });\n  });\n  return model;\n}\n\nfunction setTheme({ model, theme }: SetThemeArg): ModifierResult {\n  model = model.setIn(['config', 'theme'], theme);\n  return model;\n}\n\nfunction setLayoutDir({ model, layoutDir }: SetLayoutDirArg): ModifierResult {\n  if (model.config.layoutDir === layoutDir) return model;\n  model = model.setIn(['config', 'layoutDir'], layoutDir);\n  return model;\n}\n\nfunction setEditorRootTopicKey({\n  model,\n  topicKey\n}: BaseModifierArg): ModifierResult {\n  if (model.editorRootTopicKey !== topicKey)\n    model = model.set('editorRootTopicKey', topicKey);\n  if (model.getTopic(topicKey).collapse)\n    model = model.setIn(['topics', topicKey, 'collapse'], false);\n  return model;\n}\n\nfunction setZoomFactor({\n  model,\n  zoomFactor\n}: SetZoomFactorArg): ModifierResult {\n  if (model.zoomFactor !== zoomFactor)\n    model = model.set('zoomFactor', zoomFactor);\n  return model;\n}\n\nexport default {\n  addChild,\n  addSibling,\n  toggleCollapse,\n  collapseAll,\n  expandAll,\n  expandTo,\n  focusTopic,\n  setFocusMode,\n  deleteTopic,\n  setBlockData,\n  deleteBlock,\n  setStyle,\n  clearAllCustomStyle,\n  setTheme,\n  setLayoutDir,\n  setEditorRootTopicKey,\n  setZoomFactor\n};\n","import { Controller, KeyType, Model } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport plainSerializer from 'slate-plain-serializer';\nimport { Editor } from 'slate-react';\nimport styled from 'styled-components';\nconst log = debug('node:text-editor');\n\ninterface ContentProps {\n  readOnly?: boolean;\n}\n\nconst Content = styled.div<ContentProps>`\n  padding: 6px;\n  background-color: ${props => (props.readOnly ? null : 'white')};\n  cursor: ${props => (props.readOnly ? 'pointer' : 'text')};\n  min-width: 50px;\n`;\n\ninterface Props {\n  controller: Controller;\n  model: Model;\n  readOnly: boolean;\n  topicKey: KeyType;\n  saveRef?: Function;\n}\n\ninterface State {\n  content: any;\n}\n\nexport class SimpleTextEditor extends React.PureComponent<Props, State> {\n  state = {\n    content: null\n  };\n\n  onMouseDown = e => {\n    e.stopPropagation();\n  };\n\n  onMouseMove = e => {\n    // log('onMouseMove');\n    // e.stopPropagation();\n  };\n  onChange({ value }) {\n    log('onChange', value);\n    this.setState({ content: value });\n  }\n\n  onKeyDown = e => {};\n\n  componentDidMount() {\n    const { readOnly } = this.props;\n    if (readOnly) return;\n    document.addEventListener('click', this._handleClick);\n  }\n\n  componentWillUnmount() {\n    const { readOnly } = this.props;\n    if (readOnly) return;\n    document.removeEventListener('click', this._handleClick);\n  }\n\n  _handleClick = event => {\n    const wasOutside = !this.root.contains(event.target);\n    wasOutside && this.onClickOutSide(event);\n  };\n\n  onClickOutSide(e) {}\n\n  getCustomizeProps() {\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.initState();\n  }\n\n  getContent() {\n    const { block } = this.getCustomizeProps();\n    let content = block.data;\n    if (content == null) return null;\n    if (typeof content === 'string') {\n      content = plainSerializer.deserialize(content);\n    }\n    return content;\n  }\n\n  initState() {\n    const content = this.getContent();\n    this.state = {\n      content\n    };\n  }\n\n  root;\n\n  rootRef = saveRef => ref => {\n    saveRef(ref);\n    this.root = ref;\n  };\n\n  render() {\n    const { topicKey, saveRef } = this.props;\n    const {\n      readOnly,\n      getRefKeyFunc,\n      placeholder,\n      style\n    } = this.getCustomizeProps();\n    log(readOnly);\n    const key = getRefKeyFunc(topicKey);\n    const content = readOnly ? this.getContent() : this.state.content;\n    const { onMouseDown, onMouseMove, onKeyDown } = this;\n    const editorProps = {\n      value: content,\n      readOnly,\n      onChange: this.onChange.bind(this),\n      placeholder,\n      style\n    };\n\n    const contentProps = {\n      key,\n      readOnly,\n      ref: this.rootRef(saveRef(key)),\n      onMouseDown,\n      onMouseMove,\n      onKeyDown\n    };\n    return (\n      <Content {...contentProps}>\n        <Editor {...editorProps} autoFocus />\n      </Content>\n    );\n  }\n}\n","import { BlockType, FocusMode, OpType } from '@blink-mind/core';\nimport debug from 'debug';\nimport { SimpleTextEditor } from './simple-text-editor';\nconst log = debug('node:topic-content-editor');\n\nfunction contentEditorRefKey(key) {\n  return `content-editor-${key}`;\n}\n\nexport class TopicContentEditor extends SimpleTextEditor {\n  constructor(props) {\n    super(props);\n  }\n  getCustomizeProps() {\n    const { model, topicKey, readOnly } = this.props;\n    const block = model.getTopic(topicKey).getBlock(BlockType.CONTENT).block;\n    const getRefKeyFunc = contentEditorRefKey;\n    const style = {\n      whiteSpace: 'pre'\n    };\n    return {\n      block,\n      readOnly,\n      getRefKeyFunc,\n      placeholder: 'new',\n      style\n    };\n  }\n\n  onKeyDown = e => {\n    if (e.nativeEvent.ctrlKey && e.nativeEvent.code === 'Enter') {\n      this.save();\n    }\n  };\n\n  onClickOutSide(e) {\n    log('onClickOutSide');\n    this.save();\n  }\n\n  save() {\n    const { model, topicKey } = this.props;\n    const readOnly = model.editingContentKey !== topicKey;\n    if (readOnly) return;\n    const { controller } = this.props;\n    controller.run('operation', {\n      ...this.props,\n      opType: OpType.SET_TOPIC_BLOCK,\n      blockType: BlockType.CONTENT,\n      data: this.state.content,\n      focusMode: FocusMode.NORMAL\n    });\n  }\n}\n","import { BlockType } from '@blink-mind/core';\nimport { descEditorRefKey } from '@blink-mind/renderer-react';\nimport { RichTextEditor } from './rich-text-editor';\n\nexport class TopicDescEditor extends RichTextEditor {\n  initState() {\n    super.initState();\n    const { controller, topicKey } = this.props;\n    const key = `topic-desc-data-${topicKey}`;\n    const value = this.state.content;\n    controller.run('setTempValue', { key, value });\n  }\n\n  getCustomizeProps() {\n    const { model, topicKey } = this.props;\n    const block = model.getTopic(topicKey).getBlock(BlockType.DESC).block;\n    const readOnly = model.editingDescKey !== topicKey;\n    //TODO\n    const getRefKeyFunc = descEditorRefKey;\n    return {\n      block,\n      readOnly,\n      getRefKeyFunc,\n      placeholder: 'write topic notes here'\n    };\n  }\n\n  onChange(value) {\n    const { controller, topicKey } = this.props;\n    const key = `topic-desc-data-${topicKey}`;\n    controller.run('setTempValue', { key, value });\n    this.setState({\n      content: value\n    });\n  }\n}\n","import { BlockType } from '@blink-mind/core';\nimport * as React from 'react';\nimport plainSerializer from 'slate-plain-serializer';\nimport { TopicContentEditor } from './components/topic-content-editor';\nimport { TopicDescEditor } from './components/topic-desc-editor';\n\nexport default function SimpleTextEditorPlugin() {\n  return {\n    getTopicTitle(props) {\n      const { model, controller, topicKey, maxLength } = props;\n      const topic = model.getTopic(topicKey);\n      const block = topic.getBlock(BlockType.CONTENT).block;\n      let text = controller.run('serializeBlockData', { ...props, block });\n      if (maxLength != null) {\n        text =\n          text.length > maxLength ? text.substr(0, maxLength) + '...' : text;\n      }\n      return text;\n    },\n\n    renderTopicContentEditor(props) {\n      return <TopicContentEditor {...props} />;\n    },\n\n    renderTopicDescEditor(props) {\n      return <TopicDescEditor {...props} />;\n    },\n\n    isBlockEmpty(props, next) {\n      const { block, controller } = props;\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return (\n          block.data == null ||\n          controller.run('serializeBlockData', props) === ''\n        );\n      }\n      return next();\n    },\n\n    serializeBlockData(props, next) {\n      const { block } = props;\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return typeof block.data === 'string'\n          ? block.data\n          : plainSerializer.serialize(block.data);\n      }\n      return next();\n    }\n  };\n}\n","import * as React from 'react';\n\nimport { BaseProps } from './base-props';\n\nexport class BaseWidget<\n  P extends BaseProps = BaseProps,\n  S = any\n> extends React.PureComponent<P, S> {\n  constructor(props: P) {\n    super(props);\n  }\n\n  operation(opType: string, arg: any) {\n    this.props.controller.run('operation', {\n      opType,\n      ...arg\n    });\n  }\n\n  run(name: string, arg: any) {\n    this.props.controller.run(name, arg);\n  }\n\n  get topic() {\n    return this.props.model.getTopic(this.props.topicKey);\n  }\n}\n","import * as React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport styled from 'styled-components';\n\nimport debug from 'debug';\nconst log = debug('node:drag-scroll-widget');\n\nconst DragScrollView = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n`;\n\nconst DragScrollContent = styled.div`\n  position: relative;\n  width: max-content;\n`;\n\nconst useWindowListener = false;\n\ninterface DragScrollWidgetProps {\n  mouseKey?: 'left' | 'right';\n  needKeyPressed?: boolean;\n  canDragFunc?: () => Boolean;\n  enableMouseWheel: boolean;\n  zoomFactor: number;\n  children: (\n    setViewBoxScroll: (left: number, top: number) => void,\n    setViewBoxScrollDelta: (left: number, top: number) => void\n  ) => React.ReactNode;\n}\n\nexport class DragScrollWidget extends React.Component<\n  DragScrollWidgetProps,\n  any\n> {\n  constructor(props: DragScrollWidgetProps) {\n    super(props);\n    this.state = {\n      widgetStyle: {\n        width: '10000px',\n        height: '10000px'\n      }\n    };\n  }\n\n  static defaultProps = {\n    mouseKey: 'left',\n    needKeyPressed: false\n  };\n\n  contentResizeCallback = (\n    entries: ResizeObserverEntry[],\n    observer: ResizeObserver\n  ) => {\n    if (this.oldContentRect) {\n      const widgetStyle = {\n        width: this.content.clientWidth + this.viewBox.clientWidth * 2,\n        height: this.content.clientHeight + this.viewBox.clientHeight * 2\n      };\n      this.bigView.style.width = widgetStyle.width + 'px';\n      this.bigView.style.height = widgetStyle.height + 'px';\n    }\n    this.oldContentRect = entries[0].contentRect;\n  };\n\n  contentResizeObserver = new ResizeObserver(this.contentResizeCallback);\n  // oldScroll: { left: number; top: number };\n  oldContentRect: any;\n  content: HTMLElement;\n  contentRef = ref => {\n    if (ref) {\n      this.content = ref;\n      this.contentResizeObserver.observe(this.content);\n    }\n  };\n\n  viewBox: HTMLElement;\n  viewBoxRef = ref => {\n    if (ref) {\n      this.viewBox = ref;\n      if (!this.props.enableMouseWheel) {\n        log('addEventListener onwheel');\n        this.viewBox.addEventListener(\n          'wheel',\n          function(e) {\n            log('onwheel');\n            (e.ctrlKey || e.altKey) && e.preventDefault();\n          },\n          {\n            passive: false\n          }\n        );\n      }\n      this.setViewBoxScroll(\n        this.viewBox.clientWidth,\n        this.viewBox.clientHeight\n      );\n    }\n  };\n\n  bigView: HTMLElement;\n  bigViewRef = ref => {\n    if (ref) {\n      this.bigView = ref;\n    }\n  };\n\n  setWidgetStyle = () => {\n    if (this.content && this.viewBox && this.bigView) {\n      this.bigView.style.width =\n        (this.content.clientWidth + this.viewBox.clientWidth) * 2 + 'px';\n      this.bigView.style.height =\n        (this.content.clientHeight + this.viewBox.clientHeight) * 2 + 'px';\n\n      this.content.style.left = this.viewBox.clientWidth + 'px';\n      this.content.style.top = this.viewBox.clientHeight + 'px';\n    }\n  };\n\n  setViewBoxScroll = (left: number, top: number) => {\n    log(`setViewBoxScroll ${left} ${top}`);\n    if (this.viewBox) {\n      this.viewBox.scrollLeft = left;\n      this.viewBox.scrollTop = top;\n    }\n  };\n\n  setViewBoxScrollDelta = (deltaLeft: number, deltaTop: number) => {\n    log(`setViewBoxScrollDelta ${deltaLeft} ${deltaTop}`);\n    if (this.viewBox) {\n      this.viewBox.scrollLeft += deltaLeft;\n      this.viewBox.scrollTop += deltaTop;\n    }\n  };\n\n  onMouseDown = e => {\n    // log('Drag Scroll onMouseDown');\n    // log(e.nativeEvent.target);\n\n    // mouseKey 表示鼠标按下那个键才可以进行拖动，左键或者右键\n    // needKeyPressed 为了支持是否需要按下ctrl键，才可以进行拖动\n    // canDragFunc是一个函数，它是为了支持使用者以传入函数的方式，这个函数的返回值表示当前的内容是否可以被拖拽而移动\n    const { mouseKey, needKeyPressed, canDragFunc } = this.props;\n    if (canDragFunc && !canDragFunc()) return;\n    if (\n      (e.button === 0 && mouseKey === 'left') ||\n      (e.button === 2 && mouseKey === 'right')\n    ) {\n      if (needKeyPressed) {\n        if (!e.ctrlKey) return;\n      }\n      this._lastCoordX = this.viewBox.scrollLeft + e.nativeEvent.clientX;\n      this._lastCoordY = this.viewBox.scrollTop + e.nativeEvent.clientY;\n\n      const ele = useWindowListener ? window : this.viewBox;\n      ele.addEventListener('mousemove', this.onMouseMove);\n      ele.addEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  onMouseUp = e => {\n    const ele = useWindowListener ? window : this.viewBox;\n    ele.removeEventListener('mousemove', this.onMouseMove);\n    ele.removeEventListener('mouseup', this.onMouseUp);\n  };\n\n  // _lastCoordX和_lastCorrdY 是为了在拖动过程中 计算 viewBox的scrollLeft和scrollTop值用到\n  // _lastCoordX和_lastCorrdY 记录下拖动开始时刻viewBox的scroll值和鼠标位置值\n  _lastCoordX: number;\n  _lastCoordY: number;\n\n  onMouseMove = (e: MouseEvent) => {\n    this.viewBox.scrollLeft = this._lastCoordX - e.clientX;\n    this.viewBox.scrollTop = this._lastCoordY - e.clientY;\n    // log(`onMouseMove ${this.viewBox.scrollLeft} ${this.viewBox.scrollTop}`);\n  };\n\n  handleContextMenu = e => {\n    e.preventDefault();\n  };\n\n  componentDidMount(): void {\n    this.setWidgetStyle();\n    document.addEventListener('contextmenu', this.handleContextMenu);\n  }\n\n  componentWillUnmount(): void {\n    document.removeEventListener('contextmenu', this.handleContextMenu);\n  }\n\n  setZoomFactor(zoomFactor) {\n    this.bigView.style.transform = `scale(${zoomFactor})`;\n    this.bigView.style.transformOrigin = '50% 50%';\n  }\n\n  render() {\n    const style = {\n      ...this.state.widgetStyle\n      // zoom:this.props.zoomFactor,\n      // transform: `scale(${this.props.zoomFactor})`,\n      // transformOrigin: '50% 50%'\n    };\n    return (\n      <DragScrollView ref={this.viewBoxRef} onMouseDown={this.onMouseDown}>\n        <div style={style} ref={this.bigViewRef}>\n          <DragScrollContent\n            ref={this.contentRef}\n            style={this.state.contentStyle}\n          >\n            {this.props.children(\n              this.setViewBoxScroll,\n              this.setViewBoxScrollDelta\n            )}\n          </DragScrollContent>\n        </div>\n      </DragScrollView>\n    );\n  }\n}\n","import debug from 'debug';\nimport * as React from 'react';\n\nconst log = debug('node:save-ref');\n\ninterface SaveRefProps {\n  children: (\n    saveRef: Function,\n    getRef: Function,\n    deleteRef: Function,\n    registerRefListener: Function\n  ) => React.ReactNode;\n}\n\ntype RefListener = (name: string, ref: HTMLElement) => void;\n\n//TODO 可能会引起内存泄露,在删除一个topic时\nexport class SaveRef extends React.Component<SaveRefProps> {\n  getRef = name => {\n    log(this);\n    return this[name];\n  };\n\n  saveRef = name => {\n    return node => {\n      if (node) {\n        this[name] = node;\n        this.fireListener(name, node);\n      }\n    };\n  };\n\n  deleteRef = name => {\n    log('deleteRef:', name);\n    delete this[name];\n  };\n\n  observers: Map<string, [RefListener]> = new Map();\n\n  fireListener = (name: string, ref: HTMLElement) => {\n    if (this.observers.has(name)) {\n      const listeners = this.observers.get(name);\n      for (const listener of listeners) {\n        listener(name, ref);\n      }\n    }\n  };\n\n  registerRefListener = (name, listener: RefListener) => {\n    if (!this.observers.has(name)) {\n      this.observers.set(name, [listener]);\n    } else {\n      this.observers.get(name).push(listener);\n    }\n  };\n\n  render() {\n    return this.props.children(\n      this.saveRef,\n      this.getRef,\n      this.deleteRef,\n      this.registerRefListener.bind(this)\n    );\n  }\n}\n","import { Checkbox } from '@blueprintjs/core';\nimport styled from 'styled-components';\n\nexport const Flex = styled.div`\n  display: flex;\n  flex-direction: ${props =>\n    props.flexDirection ? props.flexDirection : 'row'};\n  align-items: ${props => props.alignItems};\n  justify-content: ${props => props.justifyContent};\n`;\n\nexport const Margin = styled.div`\n  margin: ${props => props.margin};\n`;\n\nexport const ShowMenuIcon = styled.a`\n  font-size: 20px !important;\n`;\n\nexport const IconBg = styled.div`\n  padding: 5px;\n  cursor: pointer;\n`;\n\nexport const Btn = styled.div`\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n`;\n\nexport const StyledCheckbox = styled(Checkbox)`\n  margin-bottom: 0px !important;\n`;\n\nexport const CloseIcon = styled(Btn)`\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n`;\n\nexport const Title = styled.div`\n  height: 16px;\n`;\n\nexport const TopicBlockIcon = styled.span`\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n`;\n\nexport const ZIndex = styled.div`\n  z-index: ${props => props.zIndex};\n`;\n\nexport const PanelTabRoot = styled.div`\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n`;\n","import { FocusMode, OpType } from '@blink-mind/core';\n\nimport debug from 'debug';\n\nconst log = debug('plugin:event');\n\nexport function EventPlugin() {\n  const eventListeners = {};\n  return {\n    handleTopicClick(props) {\n      log('handleTopicClick');\n      const { controller, model, topicKey } = props;\n      log(model.zoomFactor);\n      //TODO\n      if (model.editingDescKey !== null) return;\n      if (model.editingContentKey === topicKey) return;\n      if (\n        model.focusKey === topicKey &&\n        model.focusMode === FocusMode.EDITING_CONTENT\n      )\n        return;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.NORMAL\n      });\n    },\n\n    handleTopicDoubleClick(props) {\n      const { controller, model } = props;\n      if (model.editingDescKey !== null) return;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.EDITING_CONTENT\n      });\n    },\n\n    handleTopicContextMenu(props) {\n      const { controller } = props;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.SHOW_POPUP\n      });\n    },\n\n    handleActiveModalClose(props) {\n      const { controller } = props;\n      const activeModalProps = controller.run('getActiveModalProps', props);\n      if (activeModalProps == null) return null;\n      if (activeModalProps.name === 'edit-desc') {\n        return function() {\n          controller.run('operation', {\n            ...props,\n            focusMode: FocusMode.NORMAL,\n            opType: OpType.FOCUS_TOPIC\n          });\n        };\n      }\n    },\n\n    addEventListener(props) {\n      const { key, listener, once, controller } = props;\n      if (!eventListeners[key]) eventListeners[key] = [];\n      if (once) {\n        only.origin = listener;\n        eventListeners[key].push(only);\n      } else {\n        eventListeners[key].push(listener);\n      }\n\n      function only() {\n        listener();\n        controller.run('removeEventListener', {\n          key,\n          listener\n        });\n      }\n    },\n\n    removeEventListener(props) {\n      const { key, listener } = props;\n      if (eventListeners[key]) {\n        eventListeners[key] = eventListeners[key].filter(fn => {\n          return fn !== listener && fn.origin !== listener;\n        });\n      }\n    },\n\n    fireEvent(props) {\n      const { key } = props;\n      if (eventListeners[key]) {\n        eventListeners[key].forEach(fn => fn());\n      }\n    }\n  };\n}\n","import * as React from 'react';\nexport const IconName = {\n  SHOW_MENU: 'show-menu',\n  CLOSE: 'close',\n  COLOR_PICKER: 'color-picker',\n  NOTES: 'notes',\n  PLUS: 'plus',\n  MINUS: 'minus',\n  COLLAPSE_ALL: 'collapse',\n  EXPAND_ALL: 'expand',\n  CENTER: 'center',\n  TRASH: 'trash',\n  SEARCH: 'search',\n  THEME: 'theme',\n  EXPORT: 'export',\n  OPEN_FILE: 'openfile'\n};\n\nexport function iconClassName(name) {\n  return `icon iconfont bm-${name}`;\n}\n\nexport function Icon(iconName) {\n  return <span className={iconClassName(iconName)} />;\n}\n","export function contentRefKey(key) {\n  return `content-${key}`;\n}\n\nexport function contentEditorRefKey(key) {\n  return `content-editor-${key}`;\n}\n\nexport function descEditorRefKey(key) {\n  return `desc-editor-${key}`;\n}\n\nexport function topicWidgetRefKey(key) {\n  return `topic-widget-${key}`;\n}\n\nexport function topicRefKey(key) {\n  return `topic-${key}`;\n}\n\nexport function linksRefKey(key) {\n  return `links-${key}`;\n}\n\nexport function linksSvgRefKey(key) {\n  return `links-svg-${key}`;\n}\n\nexport function collapseRefKey(key) {\n  return `collapse-${key}`;\n}\n\nexport function dropAreaRefKey(key, dir) {\n  return `dropArea-${dir}-${key}`;\n}\n\nexport const RefKey = {\n  DIAGRAM_ROOT_KEY: 'DIAGRAM-ROOT',\n  DRAG_SCROLL_WIDGET_KEY: 'DragScrollWidget',\n  SVG_HIGHLIGHT_KEY: 'svg-highlight',\n  FOCUS_HIGHLIGHT_KEY: 'focus-highlight',\n  DROP_EFFECT_KEY: 'drop-effect'\n};\nexport const EventKey = {\n  CENTER_ROOT_TOPIC: 'CENTER_ROOT_TOPIC'\n};\n\nexport const PropKey = {\n  DIAGRAM_CUSTOMIZE_BASE_Z_INDEX: 'DIAGRAM_CUSTOMIZE_BASE_Z_INDEX',\n  TOPIC_CONTEXT_MENU_ENABLED: 'TOPIC_CONTEXT_MENU_ENABLED',\n  TOPIC_TITLE: 'TOPIC_TITLE'\n};\n","export const cancelEvent = e => {\n  e.stopPropagation();\n};\n","export function browserDownloadFile(url: string, filename: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  link.click();\n}\n\nexport function browserDownloadText(text: string, filename: string) {\n  const url = `data:text/plain,${encodeURIComponent(text)}`;\n  browserDownloadFile(url, filename);\n}\n\nexport function browserOpenFile(accept: string): Promise<any> {\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.accept = accept;\n\n  return new Promise<string>((resolve, reject) => {\n    input.addEventListener('change', evt => {\n      //@ts-ignore\n      const file = evt.target.files[0];\n      const fr = new FileReader();\n\n      fr.onload = (evt: ProgressEvent<FileReader>) => {\n        const txt = evt.target.result;\n        //@ts-ignore\n        resolve(txt);\n      };\n      fr.onerror = (evt: ProgressEvent<FileReader>) => {\n        reject(evt.target.error);\n      };\n      fr.readAsText(file);\n    });\n    input.click();\n  });\n}\n","export function paddingCss(arg: {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n}) {\n  const { top = 0, right = 0, bottom = 0, left = 0 } = arg;\n  return `${top}px ${right}px ${bottom}px ${left}px`;\n}\n","import { OpType } from '@blink-mind/core';\n\nexport interface HotKeyItem {\n  label: string;\n  combo: string;\n  onKeyDown: (e: KeyboardEvent) => any;\n}\n\nexport type HotKeyMap = Map<string, HotKeyItem>;\n\nexport interface HotKeysConfig {\n  topicHotKeys: HotKeyMap;\n  globalHotKeys: HotKeyMap;\n}\n\nexport const HotKeyName = {\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  EDIT_CONTENT: 'EDIT_CONTENT',\n  EDIT_NOTES: 'EDIT_NOTES',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT'\n};\n\nfunction op(opType: string, props) {\n  const { topicKey, model, controller } = props;\n  if (topicKey === undefined) {\n    props = { ...props, topicKey: model.focusKey };\n  }\n  controller.run('operation', { ...props, opType });\n}\n\nexport function HotKeyPlugin() {\n  return {\n    customizeHotKeys(props): HotKeysConfig {\n      const handleKeyDown = opType => e => {\n        // log('HotKeyPlugin', opType);\n        op(opType, props);\n      };\n      const topicHotKeys = new Map<string, HotKeyItem>([\n        [\n          HotKeyName.ADD_CHILD,\n          {\n            label: 'add child',\n            combo: 'tab',\n            onKeyDown: handleKeyDown(OpType.ADD_CHILD)\n          }\n        ],\n        [\n          HotKeyName.ADD_SIBLING,\n          {\n            label: 'add sibling',\n            combo: 'enter',\n            onKeyDown: handleKeyDown(OpType.ADD_SIBLING)\n          }\n        ],\n        [\n          HotKeyName.DELETE_TOPIC,\n          {\n            label: 'delete topic',\n            combo: 'del',\n            onKeyDown: handleKeyDown(OpType.DELETE_TOPIC)\n          }\n        ],\n        [\n          HotKeyName.EDIT_CONTENT,\n          {\n            label: 'edit content',\n            combo: 'space',\n            onKeyDown: handleKeyDown(OpType.START_EDITING_CONTENT)\n          }\n        ],\n        [\n          HotKeyName.EDIT_NOTES,\n          {\n            label: 'edit notes',\n            combo: 'alt + d',\n            onKeyDown: handleKeyDown(OpType.START_EDITING_DESC)\n          }\n        ],\n        [\n          HotKeyName.SET_EDITOR_ROOT,\n          {\n            label: 'set editor root',\n            combo: 'alt + shift + f',\n            onKeyDown: handleKeyDown(OpType.SET_EDITOR_ROOT)\n          }\n        ]\n      ]);\n      const globalHotKeys = new Map();\n      return {\n        topicHotKeys,\n        globalHotKeys\n      };\n    }\n  };\n}\n","import {\n  BaseModifierArg,\n  BlockType,\n  FocusMode,\n  getAllSubTopicKeys,\n  Model,\n  ModelModifier,\n  OpType\n} from '@blink-mind/core';\nimport debug from 'debug';\nimport { List, Stack } from 'immutable';\nimport {\n  collapseRefKey,\n  contentEditorRefKey,\n  contentRefKey,\n  descEditorRefKey,\n  dropAreaRefKey,\n  linksRefKey,\n  linksSvgRefKey,\n  topicRefKey,\n  topicWidgetRefKey\n} from '../utils';\nconst log = debug('plugin:operation');\n\nexport function OperationPlugin() {\n  const startEditingContent = ({ model, topicKey }: BaseModifierArg) => {\n    return ModelModifier.focusTopic({\n      model,\n      topicKey,\n      focusMode: FocusMode.EDITING_CONTENT\n    });\n  };\n  const startEditingDesc = ({ model, topicKey }: BaseModifierArg) => {\n    const topic = model.getTopic(topicKey);\n    const desc = topic.getBlock(BlockType.DESC);\n    if (desc.block == null || desc.block.data == null) {\n      model = ModelModifier.setBlockData({\n        model,\n        topicKey,\n        blockType: BlockType.DESC,\n        data: ''\n      });\n    }\n    model = ModelModifier.focusTopic({\n      model,\n      topicKey,\n      focusMode: FocusMode.EDITING_DESC\n    });\n    return model;\n  };\n\n  function dragAndDrop(props) {\n    const { srcKey, dstKey, dropDir } = props;\n    let { model } = props;\n    const srcTopic = model.getTopic(srcKey);\n    const dstTopic = model.getTopic(dstKey);\n\n    const srcParentKey = srcTopic.parentKey;\n    const srcParentTopic = model.getTopic(srcParentKey);\n    let srcParentSubKeys = srcParentTopic.subKeys;\n    const srcIndex = srcParentSubKeys.indexOf(srcKey);\n\n    srcParentSubKeys = srcParentSubKeys.delete(srcIndex);\n\n    if (dropDir === 'in') {\n      let dstSubKeys = dstTopic.subKeys;\n      dstSubKeys = dstSubKeys.push(srcKey);\n      model = model.withMutations(m => {\n        m.setIn(['topics', srcParentKey, 'subKeys'], srcParentSubKeys)\n          .setIn(['topics', srcKey, 'parentKey'], dstKey)\n          .setIn(['topics', dstKey, 'subKeys'], dstSubKeys)\n          .setIn(['topics', dstKey, 'collapse'], false);\n      });\n    } else {\n      const dstParentKey = dstTopic.parentKey;\n      const dstParentItem = model.getTopic(dstParentKey);\n      let dstParentSubKeys = dstParentItem.subKeys;\n      const dstIndex = dstParentSubKeys.indexOf(dstKey);\n      //src 和 dst 的父亲相同，这种情况要做特殊处理\n      if (srcParentKey === dstParentKey) {\n        let newDstParentSubKeys = List();\n        dstParentSubKeys.forEach(key => {\n          if (key !== srcKey) {\n            if (key === dstKey) {\n              if (dropDir === 'prev') {\n                newDstParentSubKeys = newDstParentSubKeys\n                  .push(srcKey)\n                  .push(key);\n              } else {\n                newDstParentSubKeys = newDstParentSubKeys\n                  .push(key)\n                  .push(srcKey);\n              }\n            } else {\n              newDstParentSubKeys = newDstParentSubKeys.push(key);\n            }\n          }\n        });\n        model = model.withMutations(m => {\n          m.setIn(['topics', dstParentKey, 'subKeys'], newDstParentSubKeys);\n        });\n      } else {\n        if (dropDir === 'prev') {\n          dstParentSubKeys = dstParentSubKeys.insert(dstIndex, srcKey);\n        } else if (dropDir === 'next') {\n          dstParentSubKeys = dstParentSubKeys.insert(dstIndex + 1, srcKey);\n        }\n        model = model.withMutations(m => {\n          m.setIn(['topics', srcParentKey, 'subKeys'], srcParentSubKeys)\n            .setIn(['topics', srcKey, 'parentKey'], dstParentKey)\n            .setIn(['topics', dstParentKey, 'subKeys'], dstParentSubKeys)\n            .setIn(['topics', dstParentKey, 'collapse'], false);\n        });\n      }\n    }\n    return model;\n  }\n  const OpMap = new Map([\n    [OpType.TOGGLE_COLLAPSE, ModelModifier.toggleCollapse],\n    [OpType.COLLAPSE_ALL, ModelModifier.collapseAll],\n    [OpType.EXPAND_ALL, ModelModifier.expandAll],\n    [OpType.EXPAND_TO, ModelModifier.expandTo],\n    [OpType.ADD_CHILD, ModelModifier.addChild],\n    [OpType.ADD_SIBLING, ModelModifier.addSibling],\n    [OpType.DELETE_TOPIC, ModelModifier.deleteTopic],\n    [OpType.FOCUS_TOPIC, ModelModifier.focusTopic],\n    [OpType.SET_FOCUS_MODE, ModelModifier.setFocusMode],\n    [OpType.SET_STYLE, ModelModifier.setStyle],\n    [OpType.SET_THEME, ModelModifier.setTheme],\n    [OpType.SET_TOPIC_BLOCK, ModelModifier.setBlockData],\n    [OpType.DELETE_TOPIC_BLOCK, ModelModifier.deleteBlock],\n    [OpType.START_EDITING_CONTENT, startEditingContent],\n    [OpType.START_EDITING_DESC, startEditingDesc],\n    [OpType.DRAG_AND_DROP, dragAndDrop],\n    [OpType.SET_EDITOR_ROOT, ModelModifier.setEditorRootTopicKey]\n  ]);\n\n  let undoStack = Stack<Model>();\n  let redoStack = Stack<Model>();\n\n  let enabled = true;\n  let whiteListOperation = new Set<string>();\n\n  return {\n    isOperationEnabled(props) {\n      return enabled;\n    },\n\n    enableOperation() {\n      enabled = true;\n    },\n\n    disableOperation({ whiteList }) {\n      enabled = false;\n      if (whiteList) whiteListOperation = new Set(whiteList);\n      else whiteListOperation.clear();\n    },\n\n    /** plugin can extend Operation Map\n     * for example: A plugin can write a function\n     * getOpMap(props,next) {\n     *   let opMap = next();\n     *   opMap.set(\"OpTypeName\",opFunc);\n     *   return opMap;\n     * }\n     * @param props\n     */\n    getOpMap(props) {\n      return OpMap;\n    },\n    getAllowUndo(props) {\n      const { model, opType } = props;\n      if (opType) {\n        switch (opType) {\n          case OpType.FOCUS_TOPIC:\n          case OpType.START_EDITING_CONTENT:\n          case OpType.START_EDITING_DESC:\n            return false;\n          default:\n            break;\n        }\n      }\n      switch (model.focusMode) {\n        case 'EDITING_DESC':\n        case 'EDITING_CONTENT':\n          return false;\n      }\n      return model.config.allowUndo;\n    },\n\n    getUndoRedoStack() {\n      return {\n        undoStack,\n        redoStack\n      };\n    },\n\n    setUndoStack(props) {\n      log('setUndoStack', props.undoStack);\n      undoStack = props.undoStack;\n    },\n\n    setRedoStack(props) {\n      log('setRedoStack', props.redoStack);\n      redoStack = props.redoStack;\n    },\n\n    canUndo(props) {\n      const { controller } = props;\n      const { undoStack } = controller.run('getUndoRedoStack', props);\n      const allowUndo = controller.run('getAllowUndo', props);\n      return undoStack.size > 0 && allowUndo;\n    },\n\n    canRedo(props) {\n      const { controller } = props;\n      const { redoStack } = controller.run('getUndoRedoStack', props);\n      const allowUndo = controller.run('getAllowUndo', props);\n      return redoStack.size > 0 && allowUndo;\n    },\n\n    undo(props) {\n      const { controller, model } = props;\n      if (!controller.run('getAllowUndo', props)) {\n        return;\n      }\n      const { undoStack, redoStack } = controller.run(\n        'getUndoRedoStack',\n        props\n      );\n      const newModel = undoStack.peek();\n      if (!newModel) return;\n      controller.run('setUndoStack', {\n        ...props,\n        undoStack: undoStack.shift()\n      });\n      controller.run('setRedoStack', {\n        ...props,\n        redoStack: redoStack.push(model)\n      });\n      log(newModel);\n      controller.change(newModel);\n    },\n\n    redo(props) {\n      const { controller, model } = props;\n      if (!controller.run('getAllowUndo', props)) {\n        return;\n      }\n      const { undoStack, redoStack } = controller.run(\n        'getUndoRedoStack',\n        props\n      );\n      const newModel = redoStack.peek();\n      if (!newModel) return;\n      controller.run('setUndoStack', {\n        ...props,\n        undoStack: undoStack.push(model)\n      });\n      controller.run('setRedoStack', {\n        ...props,\n        redoStack: redoStack.shift()\n      });\n      controller.change(newModel);\n    },\n\n    //TODO 有空重构这个函数\n    operation(props) {\n      const { controller, opType, model, opArray, callback } = props;\n      if (opArray != null && !Array.isArray(opArray)) {\n        throw new Error('operation: the type of opArray must be array!');\n      }\n      if (opType != null && opArray != null) {\n        throw new Error('operation: opType and opArray conflict!');\n      }\n      const isOperationEnabled = controller.run('isOperationEnabled', props);\n      if (!isOperationEnabled) {\n        // warning(\n        //   true,\n        //   `You have disabled operation,but you run operation ${props} now!`\n        // );\n        if (whiteListOperation.size === 0) return;\n\n        if (opArray != null) {\n          const opNotInWhiteList = opArray.filter(\n            op => !whiteListOperation.has(op.opType)\n          );\n          if (opNotInWhiteList && opNotInWhiteList.length > 0) {\n            return;\n          }\n        } else if (!whiteListOperation.has(opType)) {\n          return;\n        }\n      }\n\n      log('operation:', opType);\n      log('operation:', model);\n      log('operation:', props);\n\n      const opMap = controller.run('getOpMap', props);\n      controller.run('beforeOperation', props);\n      if (controller.run('getAllowUndo', props)) {\n        const { undoStack } = controller.run('getUndoRedoStack', props);\n        controller.run('setUndoStack', {\n          ...props,\n          undoStack: undoStack.push(model)\n        });\n      }\n      let newModel;\n\n      if (opArray != null) {\n        newModel = opArray.reduce((acc, cur) => {\n          const { opType } = cur;\n          if (!opMap.has(opType))\n            throw new Error(`opType:${opType} not exist!`);\n          const opFunc = opMap.get(opType);\n          const opFuncProps = { controller, ...cur, model: acc };\n          let res = controller.run('beforeOpFunction', opFuncProps);\n          res = opFunc({ ...opFuncProps, model: res });\n          res = controller.run('afterOpFunction', {\n            ...opFuncProps,\n            model: res\n          });\n          return res;\n        }, model);\n      } else {\n        if (!opMap.has(opType)) throw new Error(`opType:${opType} not exist!`);\n        const opFunc = opMap.get(opType);\n        newModel = controller.run('beforeOpFunction', props);\n        newModel = opFunc({ ...props, model: newModel });\n        newModel = controller.run('afterOpFunction', {\n          ...props,\n          model: newModel\n        });\n      }\n      log('newModel:', newModel);\n      controller.change(newModel, callback);\n      controller.run('afterOperation', props);\n    },\n\n    deleteRefKey(props) {\n      const { model, topicKey, deleteRef } = props;\n      const allSubKeys = getAllSubTopicKeys(model, topicKey);\n      allSubKeys.push(topicKey);\n      for (const key of allSubKeys) {\n        deleteRef(linksRefKey(key));\n        deleteRef(linksSvgRefKey(key));\n        deleteRef(contentRefKey(key));\n        deleteRef(contentEditorRefKey(key));\n        deleteRef(descEditorRefKey(key));\n        deleteRef(topicWidgetRefKey(key));\n        deleteRef(topicRefKey(key));\n        deleteRef(collapseRefKey(key));\n        deleteRef(dropAreaRefKey(key, 'next'));\n        deleteRef(dropAreaRefKey(key, 'prev'));\n      }\n    },\n\n    // 在整个Operation执行之前被调用\n    beforeOperation(props) {},\n    afterOperation(props) {},\n\n    // 在单个OpFunction执行之前被调用\n    beforeOpFunction(props) {\n      const { controller, opType, model, topicKey } = props;\n      if (\n        opType === OpType.DELETE_TOPIC &&\n        topicKey !== model.editorRootTopicKey\n      ) {\n        controller.run('deleteRefKey', props);\n      }\n      return model;\n    },\n\n    afterOpFunction(props) {\n      return props.model;\n    }\n  };\n}\n","import { Menu } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { BaseWidget } from '../../../components/common';\n\nexport class TopicContextMenu extends BaseWidget {\n  render() {\n    const { controller } = this.props;\n    return (\n      <Menu>{controller.run('customizeTopicContextMenu', this.props)}</Menu>\n    );\n  }\n}\n","import { OpType } from '@blink-mind/core';\nimport { MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { Icon } from '../../utils';\nimport { TopicContextMenu } from './components/topic-context-menu';\n\nexport type TopicContextMenuItemConfig = {\n  icon?: string;\n  label?: string;\n  shortcut?: string;\n  opType?: string;\n  rootCanUse?: boolean;\n  hotKey?: string;\n};\n\nconst items: TopicContextMenuItemConfig[] = [\n  {\n    icon: 'edit',\n    label: 'edit',\n    shortcut: 'Space',\n    rootCanUse: true,\n    opType: OpType.START_EDITING_CONTENT\n  },\n  {\n    icon: 'add-sibling',\n    label: 'add sibling',\n    shortcut: 'Enter',\n    opType: OpType.ADD_SIBLING\n  },\n  {\n    icon: 'add-child',\n    label: 'add child',\n    shortcut: 'Tab',\n    rootCanUse: true,\n    opType: OpType.ADD_CHILD\n  },\n  {\n    icon: 'notes',\n    label: 'edit notes',\n    shortcut: 'Alt + D',\n    rootCanUse: true,\n    opType: OpType.START_EDITING_DESC\n  },\n  {\n    icon: 'delete-node',\n    label: 'delete node',\n    shortcut: 'Del',\n    opType: OpType.DELETE_TOPIC\n  },\n  {\n    icon: 'root',\n    label: 'set as editor root',\n    shortcut: 'Alt + Shift + F',\n    opType: OpType.SET_EDITOR_ROOT\n  }\n];\n\nexport function ContextMenuPlugin() {\n  return {\n    renderTopicContextMenu(props) {\n      return <TopicContextMenu {...props} />;\n    },\n    customizeTopicContextMenu(props) {\n      const { topicKey, model, controller } = props;\n      const isRoot = topicKey === model.editorRootTopicKey;\n      function onClickItem(item) {\n        return function(e) {\n          item.opType &&\n            controller.run('operation', { ...props, opType: item.opType });\n        };\n      }\n      return items.map(item =>\n        isRoot && !item.rootCanUse ? null : (\n          <MenuItem\n            key={item.label}\n            icon={Icon(item.icon)}\n            text={item.label}\n            labelElement={<kbd>{item.shortcut}</kbd>}\n            onClick={onClickItem(item)}\n          />\n        )\n      );\n    }\n  };\n}\n","import {\n  FocusMode,\n  getRelationship,\n  OpType,\n  TopicRelationship\n} from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { contentRefKey, dropAreaRefKey, RefKey } from '../../utils';\nimport { TopicDropEffect } from './components/topic-drop-effect';\nconst log = debug('plugin:drag-and-drop');\nconst DropArea = styled.div`\n  height: ${props => `${props.height}px`};\n  width: 100%;\n  margin: 5px 0px;\n`;\n\nexport function DragAndDropPlugin() {\n  let dragTargetKey: KeyType = null;\n  let dragTargetDir: string = null;\n\n  return {\n    renderTopicDropArea(props) {\n      const { topicKey, dropDir, saveRef, controller, model } = props;\n      const onDragEnter = ev => {\n        log('onDragEnter', topicKey, dropDir);\n        controller.run('handleTopicDragEnter', { ...props, ev, dropDir });\n      };\n      const onDragLeave = ev => {\n        log('onDragLeave', topicKey, dropDir);\n        controller.run('handleTopicDragLeave', { ...props, ev, dropDir });\n      };\n      const onDragOver = ev => {\n        ev.preventDefault();\n      };\n      const onDrop = ev => {\n        log('onDrop', topicKey, dropDir);\n        controller.run('handleTopicDrop', { ...props, ev, dropDir });\n      };\n      const eventHandlers = {\n        onDragEnter,\n        onDragLeave,\n        onDragOver,\n        onDrop\n      };\n      return (\n        <DropArea\n          height={model.config.theme.marginV / 2}\n          ref={saveRef(dropAreaRefKey(topicKey, dropDir))}\n          {...eventHandlers}\n        />\n      );\n    },\n\n    renderDragAndDropEffect(props) {\n      log('renderDragAndDropEffect');\n      const { saveRef } = props;\n      return (\n        <TopicDropEffect\n          ref={saveRef(RefKey.DROP_EFFECT_KEY)}\n          {...props}\n        ></TopicDropEffect>\n      );\n    },\n\n    getDragTargetProps(props) {\n      return {\n        key: dragTargetKey,\n        dropDir: dragTargetDir\n      };\n    },\n\n    handleTopicDragStart(props) {\n      const { controller, ev } = props;\n      ev.stopPropagation();\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.DRAGGING\n      });\n    },\n\n    canDrop(props) {\n      const { srcKey, dstKey, model, dropDir } = props;\n      if (\n        srcKey === model.editorRootTopicKey ||\n        srcKey === dstKey ||\n        getRelationship(model, srcKey, dstKey) === TopicRelationship.ANCESTOR\n      )\n        return false;\n      if (dstKey === model.editorRootTopicKey && dropDir !== 'in') return false;\n\n      const srcTopic = model.getTopic(srcKey);\n      if (srcTopic.parentKey === dstKey && dropDir === 'in') return false;\n      return true;\n    },\n\n    handleTopicDragEnter(props) {\n      const { dropDir, topicKey, controller, model } = props;\n      log('handleTopicDragEnter:', topicKey, dropDir);\n      const canDrop = controller.run('canDrop', {\n        ...props,\n        srcKey: model.focusKey,\n        dstKey: topicKey\n      });\n      if (canDrop) {\n        dragTargetKey = topicKey;\n        dragTargetDir = dropDir;\n        controller.change(model);\n      }\n    },\n\n    handleTopicDragLeave(props) {\n      const { controller, model, topicKey, dropDir, getRef, ev } = props;\n      const relatedTarget = ev.nativeEvent.relatedTarget;\n      log('handleTopicDragLeave:', topicKey, dropDir);\n      const content = getRef(contentRefKey(topicKey));\n      if (content == relatedTarget || content.contains(relatedTarget)) {\n        return;\n      }\n      dragTargetKey = null;\n      dragTargetDir = null;\n      controller.change(model);\n    },\n\n    handleTopicDrop(props) {\n      log('handleTopicDrop');\n      const { controller, topicKey, model } = props;\n      props = { ...props, srcKey: model.focusKey, dstKey: topicKey };\n\n      dragTargetKey = null;\n      dragTargetDir = null;\n      if (controller.run('canDrop', props)) {\n        controller.run('operation', {\n          ...props,\n          opType: OpType.DRAG_AND_DROP\n        });\n      }\n    }\n  };\n}\n","import { ModelModifier } from '@blink-mind/core';\nimport {\n  Breadcrumb,\n  Breadcrumbs,\n  PopoverPosition,\n  Tooltip\n} from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget, ZIndex } from '../../../components/common';\nimport { PropKey } from '../../../utils';\n\nconst EditorRootBreadcrumbsRoot = styled(ZIndex)`\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n`;\n\nconst TooltipContent = styled.div`\n  max-width: 600px;\n`;\n\nconst BreadcrumbTitle = styled.span``;\n\nexport class EditorRootBreadcrumbs extends BaseWidget {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false\n    };\n  }\n\n  setEditorRootTopicKey = topicKey => () => {\n    const { model, controller } = this.props;\n    if (model.editorRootTopicKey !== topicKey) {\n      controller.change(\n        ModelModifier.setEditorRootTopicKey({\n          model,\n          topicKey\n        })\n      );\n    }\n  };\n\n  breadcrumbRenderer = props => {\n    const { text, ...breadProps } = props;\n    const needTooltip = text.length > 8;\n    const title = needTooltip ? text.substr(0, 8) + '...' : text;\n    //TODO\n\n    const content = <TooltipContent>{text}</TooltipContent>;\n    const tooltipProps = {\n      content,\n      position: PopoverPosition.BOTTOM_RIGHT\n    };\n    const breadcrumb = (\n      <Breadcrumb {...breadProps}>\n        <BreadcrumbTitle>{title}</BreadcrumbTitle>\n      </Breadcrumb>\n    );\n    return needTooltip ? (\n      <Tooltip {...tooltipProps}>{breadcrumb}</Tooltip>\n    ) : (\n      breadcrumb\n    );\n\n    // return (\n    //   <Breadcrumb {...breadProps}>\n    //     <BreadcrumbTitle>{title}</BreadcrumbTitle>\n    //   </Breadcrumb>\n    // );\n  };\n\n  render() {\n    const props = this.props;\n    const { model, controller, zIndex } = props;\n    const editingRootKey = model.editorRootTopicKey;\n    if (editingRootKey === model.rootTopicKey) return null;\n\n    const items = [];\n    let topic = model.getTopic(editingRootKey);\n    while (topic != null) {\n      const title = controller.getValue(PropKey.TOPIC_TITLE, {\n        ...props,\n        topicKey: topic.key\n      });\n      items.unshift({\n        text: title,\n        onClick: this.setEditorRootTopicKey(topic.key)\n      });\n      topic = model.getTopic(topic.parentKey);\n    }\n    const breadcrumbProps = {\n      items,\n      breadcrumbRenderer: this.breadcrumbRenderer\n    };\n    return (\n      <EditorRootBreadcrumbsRoot zIndex={zIndex}>\n        <Breadcrumbs {...breadcrumbProps} />\n      </EditorRootBreadcrumbsRoot>\n    );\n  }\n}\n","import debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget } from '../../../components/common';\nimport { BaseProps } from '../../../components/common/base-props';\nimport {\n  contentRefKey,\n  dropAreaRefKey,\n  getRelativeRect,\n  RefKey\n} from '../../../utils';\nconst log = debug('node:topic-drop-effect');\n\nconst DropEffectSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\ninterface State {\n  content: any;\n}\n\nexport class TopicDropEffect extends BaseWidget<BaseProps, State> {\n  state = {\n    content: null\n  };\n\n  layout() {\n    const props = this.props;\n    const { getRef, model, zoomFactor, controller } = this.props;\n    const targetProps = controller.run('getDragTargetProps', props);\n    const { key, dropDir } = targetProps;\n    log('layout', dropDir);\n\n    if (key === null) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n    let refKey;\n    if (dropDir === 'in') {\n      refKey = contentRefKey(key);\n    } else {\n      refKey = dropAreaRefKey(key, dropDir);\n    }\n    const content = getRef(refKey);\n    const svg = getRef('svg-drop-effect');\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n    const contentRect = getRelativeRect(content, bigView, zoomFactor);\n    const svgRect = getRelativeRect(svg, bigView, zoomFactor);\n    const padding = 3;\n    const x = contentRect.left - svgRect.left - padding;\n    const y = contentRect.top - svgRect.top - padding;\n    const width = contentRect.width + 2 * padding;\n    const height = contentRect.height + 2 * padding;\n\n    this.setState({\n      content: (\n        <g>\n          <rect\n            x={x}\n            y={y}\n            width={width}\n            height={height}\n            fill=\"none\"\n            stroke={model.config.theme.highlightColor}\n            strokeDasharray=\"5,5\"\n            strokeWidth={2}\n          />\n        </g>\n      )\n    });\n  }\n\n  render() {\n    const { saveRef } = this.props;\n    return (\n      <DropEffectSvg ref={saveRef('svg-drop-effect')}>\n        {this.state.content}\n      </DropEffectSvg>\n    );\n  }\n}\n","import { Controller, FocusMode, Model } from '@blink-mind/core';\nimport { HotKeysConfig } from '@blink-mind/renderer-react';\nimport { Hotkey, Hotkeys, HotkeysTarget } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { DragScrollWidget } from '../../../components/common';\nimport { EventKey, RefKey, topicRefKey } from '../../../utils';\nconst NodeLayer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n`;\n\nconst DIV = styled.div`\n  width: 100%;\n  height: 100%;\n  background: ${props => props.theme.background};\n`;\n\nexport interface MindDragScrollWidgetProps {\n  controller: Controller;\n  model: Model;\n  saveRef?: Function;\n  getRef?: Function;\n}\n\n@HotkeysTarget\nexport class MindDragScrollWidget<\n  P extends MindDragScrollWidgetProps\n> extends React.Component<MindDragScrollWidgetProps> {\n  constructor(props: MindDragScrollWidgetProps) {\n    super(props);\n  }\n\n  renderHotkeys() {\n    const props = this.props;\n    const { controller, model } = props;\n    const hotKeys: HotKeysConfig = controller.run('customizeHotKeys', props);\n    if (hotKeys === null) return null;\n    if (\n      !(\n        hotKeys.topicHotKeys instanceof Map &&\n        hotKeys.globalHotKeys instanceof Map\n      )\n    ) {\n      throw new TypeError('topicHotKeys and globalHotKeys must be a Map');\n    }\n    const children = [];\n    if (\n      model.focusMode === FocusMode.NORMAL ||\n      model.focusMode === FocusMode.SHOW_POPUP\n    ) {\n      hotKeys.topicHotKeys.forEach((v, k) => {\n        children.push(<Hotkey key={k} {...v} global />);\n      });\n    }\n    hotKeys.globalHotKeys.forEach((v, k) => {\n      children.push(<Hotkey key={k} {...v} global />);\n    });\n    return <Hotkeys>{children}</Hotkeys>;\n  }\n\n  componentDidMount(): void {\n    const { getRef, model, controller } = this.props;\n    controller.run('addZoomFactorChangeEventListener', {\n      ...this.props,\n      listener: this.setZoomFactor\n    });\n    const rootTopic: HTMLElement = getRef(\n      topicRefKey(model.editorRootTopicKey)\n    );\n    //TODO\n    const nodeLayer: HTMLElement = getRef('node-layer');\n    const rootTopicRect = rootTopic.getBoundingClientRect();\n    const nodeLayerRect = nodeLayer.getBoundingClientRect();\n    this.dragScrollWidget.setViewBoxScrollDelta(\n      0,\n      rootTopicRect.top -\n        nodeLayerRect.top -\n        this.dragScrollWidget.viewBox.getBoundingClientRect().height / 2 +\n        rootTopicRect.height\n    );\n    this.layout();\n  }\n\n  componentWillUnmount(): void {\n    const { controller } = this.props;\n    controller.run('removeZoomFactorChangeEventListener', {\n      ...this.props,\n      listener: this.setZoomFactor\n    });\n  }\n\n  get dragScrollWidget(): DragScrollWidget {\n    return this.props.getRef(RefKey.DRAG_SCROLL_WIDGET_KEY);\n  }\n\n  componentDidUpdate(): void {\n    const { controller } = this.props;\n    controller.run('fireEvent', {\n      ...this.props,\n      key: EventKey.CENTER_ROOT_TOPIC\n    });\n    this.layout();\n  }\n\n  layout() {\n    const { controller } = this.props;\n    controller.run('layout', this.props);\n  }\n\n  setZoomFactor = zoomFactor => {\n    this.dragScrollWidget.setZoomFactor(zoomFactor);\n  };\n\n  onWheel = e => {\n    if (e.altKey || e.ctrlKey) {\n      const { controller } = this.props;\n      let zoomFactor = controller.run('getZoomFactor', this.props);\n      zoomFactor = zoomFactor - (e.nativeEvent.deltaY > 0 ? 0.1 : -0.1);\n      if (zoomFactor < 0.5) zoomFactor = 0.5;\n      if (zoomFactor > 4) zoomFactor = 4;\n      // console.log('zoomFactor=>', zoomFactor);\n      controller.run('setZoomFactor', { ...this.props, zoomFactor });\n    }\n  };\n\n  render() {\n    const { saveRef, model, controller } = this.props;\n    const nodeKey = model.editorRootTopicKey;\n    return (\n      <DIV onWheel={this.onWheel}>\n        <DragScrollWidget\n          {...this.state}\n          enableMouseWheel={false}\n          zoomFactor={model.zoomFactor}\n          ref={saveRef(RefKey.DRAG_SCROLL_WIDGET_KEY)}\n        >\n          {(\n            setViewBoxScroll: (left: number, top: number) => void,\n            setViewBoxScrollDelta: (left: number, top: number) => void\n          ) => {\n            const rootWidgetProps = {\n              ...this.props,\n              topicKey: nodeKey,\n              setViewBoxScroll,\n              setViewBoxScrollDelta\n            };\n            return (\n              <NodeLayer ref={saveRef('node-layer')}>\n                {controller.run('renderRootWidget', rootWidgetProps)}\n              </NodeLayer>\n            );\n          }}\n        </DragScrollWidget>\n      </DIV>\n    );\n  }\n}\n","import { Classes, Dialog } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { BaseWidget } from '../../../components/common';\nimport { BaseProps } from '../../../components/common/base-props';\n\ninterface Props extends BaseProps {\n  saveRef?: Function;\n}\n\nexport class Modals extends BaseWidget<Props> {\n  handleClose = () => {\n    const { controller } = this.props;\n    const handleActiveModalClose = controller.run(\n      'handleActiveModalClose',\n      this.props\n    );\n\n    handleActiveModalClose && handleActiveModalClose();\n  };\n\n  render() {\n    const { controller } = this.props;\n    const activeModal = controller.run('renderModal', this.props);\n    const activeModalProps = controller.run('getActiveModalProps', this.props);\n    return (\n      <Dialog\n        onClose={this.handleClose}\n        isOpen={activeModal !== null}\n        autoFocus\n        enforceFocus\n        usePortal\n        title={activeModalProps && activeModalProps.title}\n        style={activeModalProps && activeModalProps.style}\n      >\n        <div className={Classes.DIALOG_BODY} style={{ minHeight: 0 }}>\n          {activeModal}\n        </div>\n      </Dialog>\n    );\n  }\n}\n","import { DiagramLayoutType, KeyType, TopicDirection } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseProps } from '../../../components/common/base-props';\nimport { topicRefKey } from '../../../utils';\n\nconst log = debug('RootNode');\n\nconst LayerPart = styled.div`\n  display: flex;\n  position: relative;\n\n  align-items: ${props =>\n    //@ts-ignore\n    props.topicDirection === TopicDirection.LEFT ? 'flex-end' : 'flex-start'};\n  flex-direction: column;\n\n  padding: ${props =>\n    //@ts-ignore\n    props.topicDirection === TopicDirection.LEFT\n      ? '15px 60px 15px 0px'\n      : '15px 0px 15px 60px'};\n`;\n\nconst Topic = styled.div`\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n`;\n\ninterface Props extends BaseProps {\n  setViewBoxScroll?: (left: number, top: number) => void;\n  setViewBoxScrollDelta?: (left: number, top: number) => void;\n}\n\nexport class RootWidget extends React.Component<Props> {\n  renderPartTopics(topics: KeyType[], dir: string) {\n    const { controller, saveRef } = this.props;\n    const res = controller.run('createSubTopics', {\n      ...this.props,\n      dir,\n      isRoot: true,\n      topics\n    });\n    if (!res) return null;\n    const { subTopics } = res;\n    const cxName = `bm-layer-${dir === TopicDirection.LEFT ? 'left' : 'right'}`;\n    return (\n      //@ts-ignore\n      <LayerPart topicDirection={dir} ref={saveRef(cxName)}>\n        {subTopics}\n      </LayerPart>\n    );\n  }\n\n  render() {\n    log('render');\n    const props = this.props;\n    const { model, topicKey, saveRef, controller } = props;\n    const topicStyle = controller.run('getTopicContentStyle', props);\n    const config = model.config;\n    const topicContent = controller.run('renderTopicContent', {\n      ...props,\n      topicStyle,\n      dir: TopicDirection.MAIN\n    });\n    const partTopics = controller.run('getPartTopics', {\n      layout: config.layoutDir,\n      model,\n      topicKey\n    });\n    const rootTopic = (\n      <Topic ref={saveRef(topicRefKey(topicKey))}>{topicContent}</Topic>\n    );\n    const children = controller.run('renderRootWidgetOtherChildren', props);\n    switch (config.layoutDir) {\n      case DiagramLayoutType.LEFT_AND_RIGHT:\n        return (\n          <>\n            {this.renderPartTopics(partTopics.L, 'L')}\n            {rootTopic}\n            {this.renderPartTopics(partTopics.R, 'R')}\n            {children}\n          </>\n        );\n      case DiagramLayoutType.LEFT_TO_RIGHT:\n        return (\n          <>\n            {rootTopic}\n            {this.renderPartTopics(partTopics.R, 'R')}\n            {children}\n          </>\n        );\n      case DiagramLayoutType.RIGHT_TO_LEFT:\n        return (\n          <>\n            {this.renderPartTopics(partTopics.L, 'L')}\n            {rootTopic}\n            {children}\n          </>\n        );\n      case DiagramLayoutType.TOP_TO_BOTTOM:\n        return (\n          <>\n            {rootTopic}\n            {this.renderPartTopics(partTopics.B, 'B')}\n            {children}\n          </>\n        );\n    }\n    return null;\n  }\n}\n","import { TopicDirection } from '@blink-mind/core';\nimport cx from 'classnames';\nimport * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport { collapseRefKey } from '../../../utils';\n\nconst Icon = styled.div`\n  position: absolute;\n  top: calc(50% - 10px);\n  ${({ dir }) => {\n    if (dir === TopicDirection.RIGHT)\n      return css`\n        right: -25px;\n      `;\n    if (dir === TopicDirection.LEFT)\n      return css`\n        left: -25px;\n      `;\n  }};\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ${props => props.background};\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n`;\n\nexport function TopicCollapseIcon(props) {\n  const { model, topicKey, topicStyle, dir, saveRef, onClickCollapse } = props;\n  const topic = model.getTopic(topicKey);\n  return topic.subKeys.size > 0 ? (\n    <Icon\n      ref={saveRef(collapseRefKey(topicKey))}\n      onClick={onClickCollapse}\n      background={topicStyle.background}\n      dir={dir}\n      className={cx({\n        icon: true,\n        iconfont: true,\n        [`bm-${topic.collapse ? 'plus' : 'minus'}`]: true\n      })}\n    />\n  ) : null;\n}\n","import debug from 'debug';\nimport * as React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport styled from 'styled-components';\nconst log = debug('node:topic-content2');\n\nconst EditingRoot = styled.div`\n  position: relative;\n`;\n\nconst EditingWrapper = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n`;\nconst cancelEvent = e => {\n  log('cancelEvent');\n  e.preventDefault();\n  e.stopPropagation();\n};\nexport function TopicContent(props) {\n  const { controller, model, topicKey, getRef } = props;\n  const readOnly = model.editingContentKey !== topicKey;\n  const editor = controller.run('renderTopicContentEditor', {\n    ...props,\n    readOnly\n  });\n  let child;\n  if (readOnly) {\n    child = editor;\n  } else {\n    let wrapper;\n    const wrapperRef = ref => {\n      if (ref) {\n        wrapper = ref;\n        contentResizeObserver.observe(wrapper);\n      }\n    };\n    let rect = { width: 50, height: 40 };\n    const editorDiv = getRef(`content-editor-${topicKey}`);\n    if (editorDiv) rect = editorDiv.getBoundingClientRect();\n    const contentResizeCallback = (\n      entries: ResizeObserverEntry[],\n      observer: ResizeObserver\n    ) => {\n      const r = entries[0].contentRect;\n      wrapper.style.left = (rect.width - r.width) / 2 + 'px';\n      wrapper.style.top = (rect.height - r.height) / 2 + 'px';\n    };\n    const contentResizeObserver = new ResizeObserver(contentResizeCallback);\n    log(rect);\n    child = (\n      <>\n        <div style={{ width: rect.width, height: rect.height }}></div>\n        {/*<Dialog isOpen>{editor}</Dialog>*/}\n        <EditingWrapper ref={wrapperRef}>{editor}</EditingWrapper>\n      </>\n    );\n  }\n  return (\n    <EditingRoot onDragEnter={cancelEvent} onDragOver={cancelEvent}>\n      {child}\n    </EditingRoot>\n  );\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget } from '../../../components/common';\nimport { BaseProps } from '../../../components/common/base-props';\nimport {\n  centerPointX,\n  centerPointY,\n  centerX,\n  centerY,\n  getRelativeRect,\n  Point,\n  RefKey\n} from '../../../utils';\n\nimport debug from 'debug';\nimport { contentRefKey, linksSvgRefKey } from '../../../utils';\nconst RootLinksSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n`;\n\nconst log = debug('node:root-sub-links');\n\ninterface Props extends BaseProps {}\n\ninterface State {\n  curves: any[];\n}\n\nexport class RootSubLinks extends BaseWidget<Props, State> {\n  state = {\n    curves: []\n  };\n\n  layout() {\n    const props = this.props;\n    const { model, getRef, topicKey, zoomFactor, controller } = props;\n    const topic = model.getTopic(topicKey);\n    const content = getRef(contentRefKey(topicKey));\n    const svg = getRef(linksSvgRefKey(topicKey));\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n    const contentRect = getRelativeRect(content, bigView, zoomFactor);\n    const svgRect = getRelativeRect(svg, bigView, zoomFactor);\n    let p1: Point, p2: Point;\n\n    p1 = {\n      x: centerX(contentRect) - svgRect.left,\n      y: centerY(contentRect) - svgRect.top\n    };\n    const curves = [];\n    topic.subKeys.forEach(key => {\n      const linkStyle = controller.run('getLinkStyle', {\n        ...props,\n        topicKey: key\n      });\n      const lineType = linkStyle.lineType;\n      const subTopicContent = getRef(contentRefKey(key));\n      const rect = getRelativeRect(subTopicContent, bigView, zoomFactor);\n      if (rect.left > contentRect.right) {\n        p2 = {\n          x: rect.left,\n          y: centerY(rect)\n        };\n      } else {\n        p2 = {\n          x: rect.right,\n          y: centerY(rect)\n        };\n      }\n      p2 = { x: p2.x - svgRect.left, y: p2.y - svgRect.top };\n      let curve;\n      if (lineType === 'curve') {\n        curve = `M ${p1.x} ${p1.y} C ${p1.x} ${centerPointY(\n          p1,\n          p2\n        )} ${centerPointX(p1, p2)} ${p2.y} ${p2.x} ${p2.y}`;\n      } else if (lineType === 'line') {\n        curve = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      } else if (lineType === 'round') {\n        const vDir = p2.y > p1.y ? 1 : -1;\n        const hDir = p2.x > p1.x ? 1 : -1;\n        const radius = linkStyle.lineRadius;\n        if (radius == null) {\n          throw new Error(\n            'link line type is round, but lineRadius is not provided!'\n          );\n        }\n        if (p2.y === p1.y) {\n          curve = `M ${p1.x} ${p1.y} H ${p2.x}`;\n        } else {\n          // 0 表示逆时针 1 表示顺时针\n          curve = `M ${p1.x} ${p1.y}  V ${p2.y -\n            vDir * radius} A ${radius} ${radius} 0 0 ${\n            vDir * hDir === 1 ? 0 : 1\n          } ${p1.x + radius * hDir} ${p2.y} H ${p2.x}`;\n        }\n      }\n      curves.push(\n        <path\n          key={`link-${key}`}\n          d={curve}\n          strokeWidth={linkStyle.lineWidth}\n          stroke={linkStyle.lineColor}\n          fill=\"none\"\n        />\n      );\n    });\n    this.setState({\n      curves\n    });\n  }\n\n  render() {\n    log('render');\n    const { topicKey, saveRef } = this.props;\n    return (\n      <RootLinksSvg ref={saveRef(linksSvgRefKey(topicKey))}>\n        <g>{this.state.curves}</g>\n      </RootLinksSvg>\n    );\n  }\n}\n","import { FocusMode, OpType, TopicDirection } from '@blink-mind/core';\nimport { ContextMenuTarget } from '@blueprintjs/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget } from '../../../components/common';\nimport { BaseProps } from '../../../components/common/base-props';\nimport { collapseRefKey, contentRefKey, PropKey } from '../../../utils';\n\nconst log = debug('node:topic-content-widget');\n\ninterface TopicContentProps {\n  dragEnter?: boolean;\n}\n\nconst TopicContent = styled.div<TopicContentProps>`\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n`;\n\nconst TopicContentWithDropArea = styled.div`\n  position: relative;\n`;\n\ninterface Props extends BaseProps {\n  draggable: boolean;\n}\n\ninterface State {\n  dragEnter: boolean;\n}\n\n@ContextMenuTarget\nexport class TopicContentWidget extends BaseWidget<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dragEnter: false\n    };\n  }\n\n  onDragStart = ev => {\n    this.run('handleTopicDragStart', { ...this.props, ev });\n  };\n\n  onDragOver = ev => {\n    // log('onDragOver');\n    ev.preventDefault();\n  };\n\n  onDragEnter = ev => {\n    log('onDragEnter', this.props.topicKey);\n    this.run('handleTopicDragEnter', { ...this.props, ev, dropDir: 'in' });\n  };\n\n  onDragLeave = ev => {\n    this.run('handleTopicDragLeave', { ...this.props, ev, dropDir: 'in' });\n  };\n\n  onDrop = ev => {\n    log('onDrop');\n    this.run('handleTopicDrop', { ...this.props, ev, dropDir: 'in' });\n  };\n\n  public renderContextMenu() {\n    const { controller } = this.props;\n    if (\n      !controller.getValue(PropKey.TOPIC_CONTEXT_MENU_ENABLED, {\n        ...this.props\n      })\n    ) {\n      return;\n    }\n    this.operation(OpType.FOCUS_TOPIC, {\n      ...this.props,\n      focusMode: FocusMode.SHOW_POPUP\n    });\n    return controller.run('renderTopicContextMenu', this.props);\n  }\n\n  public onContextMenuClose() {\n    // Optional method called once the context menu is closed.\n  }\n\n  handleTopicClickTimeout;\n\n  onClick = ev => {\n    const props = this.props;\n    const { controller } = props;\n    //TODO bug [Violation] 'setTimeout' handler took 69ms\n    this.handleTopicClickTimeout = setTimeout(() => {\n      // log('handleTopicClick');\n      //注意这里要传递this.props, 而不是props, 因为会先调用onClick, 再调用其他的topic-content-editor的onClickOutside\n      //其他组件的onClickOutside是个同步的函数,会设置新的model, 如果这里用props传参,会导致model 还是老的model\n      controller.run('handleTopicClick', { ...this.props, ev });\n    }, 200);\n  };\n\n  onDoubleClick = ev => {\n    clearTimeout(this.handleTopicClickTimeout);\n    const { controller } = this.props;\n    controller.run('handleTopicDoubleClick', { ...this.props, ev });\n  };\n\n  needRelocation: boolean = false;\n  oldCollapseIconVector;\n\n  componentDidUpdate() {\n    if (this.needRelocation) {\n      const { getRef, topicKey, setViewBoxScrollDelta } = this.props;\n      const newIcon = getRef(collapseRefKey(topicKey));\n      const newRect = newIcon.getBoundingClientRect();\n      // const newVector = controller.run('getRelativeVectorFromViewPort', {\n      //   ...this.props,\n      //   element: getRef(collapseRefKey(topicKey))\n      // });\n      const newVector = [\n        newRect.left + newRect.width / 2,\n        newRect.top + newRect.height / 2\n      ];\n      log('newVector:', newVector);\n      log('oldVector:', this.oldCollapseIconVector);\n      //TODO bug\n      const vector = [\n        newVector[0] - this.oldCollapseIconVector[0],\n        newVector[1] - this.oldCollapseIconVector[1]\n      ];\n      log('vector', vector);\n      setViewBoxScrollDelta(vector[0], vector[1]);\n      this.needRelocation = false;\n    }\n  }\n\n  onClickCollapse = e => {\n    e.stopPropagation();\n    const { topicKey, getRef } = this.props;\n    this.needRelocation = true;\n    const collapseIcon = getRef(collapseRefKey(topicKey));\n    const rect = collapseIcon.getBoundingClientRect();\n    log('oldRect', rect);\n    this.oldCollapseIconVector = [\n      rect.left + rect.width / 2,\n      rect.top + rect.height / 2\n    ];\n    log('oldCollapseIconVector', this.oldCollapseIconVector);\n    // this.oldCollapseIconVector = controller.run('getRelativeVectorFromViewPort', {\n    //   ...this.props,\n    //   element: collapseIcon\n    // });\n    this.operation(OpType.TOGGLE_COLLAPSE, this.props);\n  };\n\n  render() {\n    const props = this.props;\n    const { saveRef, topicKey, model, controller, topicStyle, dir } = props;\n    log('render', topicKey, model.focusMode);\n    const draggable =\n      controller.run('isOperationEnabled', props) &&\n      model.editingContentKey !== topicKey;\n    const collapseIcon = controller.run('renderTopicCollapseIcon', {\n      ...props,\n      onClickCollapse: this.onClickCollapse.bind(this)\n    });\n    const prevDropArea = controller.run('renderTopicDropArea', {\n      ...props,\n      dropDir: 'prev'\n    });\n    const nextDropArea = controller.run('renderTopicDropArea', {\n      ...props,\n      dropDir: 'next'\n    });\n    const dropEventHandlers = {\n      onDragEnter: this.onDragEnter,\n      onDragLeave: this.onDragLeave,\n      onDragOver: this.onDragOver,\n      onDrop: this.onDrop\n    };\n    // log(topicKey, 'style', topicStyle);\n    return (\n      <TopicContentWithDropArea>\n        {prevDropArea}\n        <TopicContent\n          style={topicStyle}\n          draggable={draggable}\n          ref={saveRef(contentRefKey(topicKey))}\n          onDragStart={this.onDragStart}\n          onClick={this.onClick}\n          onDoubleClick={this.onDoubleClick}\n          {...dropEventHandlers}\n        >\n          {controller.run('renderTopicBlocks', props)}\n          {controller.run('renderTopicContentOthers', props)}\n        </TopicContent>\n        {nextDropArea}\n        {dir !== TopicDirection.MAIN && collapseIcon}\n      </TopicContentWithDropArea>\n    );\n  }\n}\n","import { BlockType, OpType } from '@blink-mind/core';\nimport { Classes, Popover, PopoverInteractionKind } from '@blueprintjs/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { TopicBlockIcon } from '../../../components/common/styled';\nimport { cancelEvent, iconClassName, IconName, RefKey } from '../../../utils';\n\nconst log = debug('node:topic-desc');\n\nconst TooltipContentWrapper = styled.div`\n  overflow: auto;\n`;\n\nexport function TopicDesc(props) {\n  const { controller, model, topicKey, getRef } = props;\n  const isEditing = model.editingDescKey === topicKey;\n  log('isEditing', isEditing);\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('operation', {\n      ...props,\n      opType: OpType.START_EDITING_DESC\n    });\n  };\n\n  const desc = model.getTopic(topicKey).getBlock(BlockType.DESC);\n  if (\n    !isEditing &&\n    controller.run('isBlockEmpty', { ...props, block: desc.block })\n  )\n    return null;\n  const descEditor = controller.run('renderTopicDescEditor', props);\n  const diagramRoot = getRef(RefKey.DIAGRAM_ROOT_KEY);\n  const style = {\n    maxWidth: '800px',\n    maxHeight: '600px'\n  };\n  if (diagramRoot) {\n    const dRect = diagramRoot.getBoundingClientRect();\n    style.maxWidth = `${dRect.width * 0.6}px`;\n    style.maxHeight = `${dRect.height * 0.8}px`;\n  }\n  const tooltipContent = (\n    <TooltipContentWrapper\n      onClick={cancelEvent}\n      classname={Classes.POPOVER_DISMISS}\n      style={style}\n    >\n      {descEditor}\n    </TooltipContentWrapper>\n  );\n  const icon = (\n    <TopicBlockIcon\n      onClick={onClick}\n      className={iconClassName(IconName.NOTES)}\n      tabIndex={-1}\n    />\n  );\n  const tooltipProps = {\n    autoFocus: false,\n    content: tooltipContent,\n    target: icon,\n    interactionKind: PopoverInteractionKind.HOVER,\n    hoverOpenDelay: 500\n  };\n\n  const descIcon = desc.block && <Popover {...tooltipProps}></Popover>;\n  return descIcon;\n}\n","import { FocusMode } from '@blink-mind/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget } from '../../../components/common';\nimport { BaseProps } from '../../../components/common/base-props';\nimport { contentRefKey, getRelativeRect, RefKey } from '../../../utils';\n\nconst FocusHighlightSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\ninterface State {\n  content: any;\n}\n\nexport class TopicHighlight extends BaseWidget<BaseProps, State> {\n  state = {\n    content: null\n  };\n\n  layout() {\n    const { getRef, model, zoomFactor } = this.props;\n    const focusKey = model.focusKey;\n    const focusMode = model.focusMode;\n    if (!focusKey || focusMode === FocusMode.EDITING_CONTENT) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n    const content = getRef(contentRefKey(focusKey));\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n    const svg = getRef(RefKey.SVG_HIGHLIGHT_KEY);\n    const contentRect = getRelativeRect(content, bigView, zoomFactor);\n    const svgRect = getRelativeRect(svg, bigView, zoomFactor);\n    const padding = 3;\n    const x = contentRect.left - svgRect.left - padding;\n    const y = contentRect.top - svgRect.top - padding;\n    const width = contentRect.width + 2 * padding;\n    const height = contentRect.height + 2 * padding;\n    this.setState({\n      content: (\n        <rect\n          x={x}\n          y={y}\n          width={width}\n          height={height}\n          fill=\"none\"\n          stroke={model.config.theme.highlightColor}\n          strokeWidth={2}\n        />\n      )\n    });\n  }\n\n  render() {\n    const { saveRef } = this.props;\n    return (\n      <FocusHighlightSvg ref={saveRef(RefKey.SVG_HIGHLIGHT_KEY)}>\n        {this.state.content}\n      </FocusHighlightSvg>\n    );\n  }\n}\n","import { TopicDirection } from '@blink-mind/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget } from '../../../components/common';\nimport { BaseProps } from '../../../components/common/base-props';\nimport {\n  centerPointX,\n  centerPointY,\n  centerY,\n  collapseRefKey,\n  contentRefKey,\n  getRelativeRect,\n  linksSvgRefKey,\n  Point,\n  RefKey\n} from '../../../utils';\n\nconst TopicLinksSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n`;\nimport debug from 'debug';\nconst log = debug('node:topic-sub-links');\n\ninterface Props extends BaseProps {}\n\ninterface State {\n  curves: any[];\n}\n\nexport class TopicSubLinks extends BaseWidget<Props, State> {\n  state = {\n    curves: []\n  };\n  layout() {\n    const props = this.props;\n    const { model, getRef, topicKey, dir, controller } = props;\n    const z = controller.run('getZoomFactor', props);\n    const topic = model.getTopic(topicKey);\n    const content = getRef(contentRefKey(topicKey));\n    const svg = getRef(linksSvgRefKey(topicKey));\n    const collapseIcon = getRef(collapseRefKey(topicKey));\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n    const svgRect = getRelativeRect(svg, bigView, z);\n    const collapseRect = getRelativeRect(collapseIcon, bigView, z);\n    const contentRect = getRelativeRect(content, bigView, z);\n    log(topicKey);\n    log('svgRect', svgRect);\n    log('collapseRect', collapseRect);\n    log('contentRect', contentRect);\n    let p1: Point, p2: Point, p3: Point;\n\n    if (dir === TopicDirection.RIGHT) {\n      p1 = {\n        x: 0,\n        y: centerY(contentRect) - svgRect.top\n      };\n      p2 = {\n        x: collapseRect.right - svgRect.left + 10,\n        y: p1.y\n      };\n    } else if (dir === TopicDirection.LEFT) {\n      p1 = {\n        x: svgRect.right - svgRect.left,\n        y: centerY(contentRect) - svgRect.top\n      };\n      p2 = {\n        x: collapseRect.left - svgRect.left - 10,\n        y: p1.y\n      };\n    }\n    const curves = [];\n\n    topic.subKeys.forEach(key => {\n      let curve;\n      const linkStyle = controller.run('getLinkStyle', {\n        ...props,\n        topicKey: key\n      });\n      // log(key);\n      const subContent = getRef(contentRefKey(key));\n      if (!subContent) return;\n      const rect = getRelativeRect(subContent, bigView, z);\n\n      if (dir === TopicDirection.RIGHT) {\n        p3 = {\n          x: rect.left - svgRect.left,\n          y: centerY(rect) - svgRect.top\n        };\n      }\n      if (dir === TopicDirection.LEFT) {\n        p3 = {\n          x: rect.right - svgRect.left,\n          y: centerY(rect) - svgRect.top\n        };\n      }\n      const { lineType } = linkStyle;\n\n      if (lineType === 'curve') {\n        curve = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y} C ${p2.x} ${centerPointY(\n          p2,\n          p3\n        )} ${centerPointX(p2, p3)} ${p3.y} ${p3.x} ${p3.y}`;\n      } else if (lineType === 'round') {\n        const vDir = p3.y > p1.y ? 1 : -1;\n        const hDir = p3.x > p1.x ? 1 : -1;\n        const radius = linkStyle.lineRadius;\n        // if (p3.y === p1.y) { //这样判断不可靠\n        if (topic.subKeys.size === 1 || Math.abs(p3.y - p1.y) <= 1) {\n          curve = `M ${p1.x} ${p1.y} L ${p3.x} ${p3.y}`;\n        } else {\n          // 0 表示逆时针 1 表示顺时针\n          curve = `M ${p1.x} ${p1.y} H ${p2.x} V ${p3.y -\n            vDir * radius} A ${radius} ${radius} 0 0 ${\n            vDir * hDir === 1 ? 0 : 1\n          } ${p2.x + radius * hDir} ${p3.y} H ${p3.x}`;\n        }\n      } else if (lineType === 'line') {\n        curve = `M ${p1.x} ${p1.y} H ${p2.x} L ${p3.x} ${p3.y}`;\n      }\n\n      curves.push(\n        <path\n          key={`link-${key}`}\n          d={curve}\n          strokeWidth={linkStyle.lineWidth}\n          stroke={linkStyle.lineColor}\n          fill=\"none\"\n        />\n      );\n    });\n    this.setState({\n      curves\n    });\n  }\n\n  render() {\n    const { topicKey, saveRef } = this.props;\n    return (\n      <TopicLinksSvg ref={saveRef(linksSvgRefKey(topicKey))}>\n        <g>{this.state.curves}</g>\n      </TopicLinksSvg>\n    );\n  }\n}\n","import { OpType } from '@blink-mind/core';\nimport { Classes, Position, Tooltip } from '@blueprintjs/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseWidget, Btn, ZIndex } from '../../../../components/common';\nimport { EventKey, Icon, IconName } from '../../../../utils';\n\nconst log = debug('node:view-port-viewer');\n\nconst ViewerRoot = styled(ZIndex)`\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n`;\n\nconst Item_ = styled(Btn)`\n  margin: 10px;\n`;\n\nconst ZoomFactorSpan = styled.span`\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n`;\n\nconst Item = props => {\n  return (\n    <Tooltip\n      content={props.tooltip}\n      position={Position.TOP}\n      className={Classes.ICON}\n    >\n      <Item_ onClick={props.onClick} tabIndex={-1}>\n        {props.children}\n      </Item_>\n    </Tooltip>\n  );\n};\n\nexport class ViewPortViewer extends BaseWidget {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount(): void {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('addZoomFactorChangeEventListener', {\n      ...props,\n      listener: this.zoomFactorChange\n    });\n  }\n\n  componentWillUnmount(): void {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('removeZoomFactorChangeEventListener', {\n      ...props,\n      listener: this.zoomFactorChange\n    });\n  }\n\n  zoomFactorChange = zoomFactor => {\n    log('zoomFactorChange', zoomFactor);\n    this.setState({ zoomFactor });\n  };\n\n  onClickResetZoom = e => {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('setZoomFactor', {\n      ...props,\n      zoomFactor: 1\n    });\n  };\n\n  onClickAddZoom = e => {\n    const props = this.props;\n    const { controller } = props;\n    const zoomFactor = controller.run('getZoomFactor', props);\n    controller.run('setZoomFactor', {\n      ...props,\n      zoomFactor: zoomFactor + 0.1\n    });\n  };\n\n  onClickMinusZoom = e => {\n    const props = this.props;\n    const { controller } = props;\n    const zoomFactor = controller.run('getZoomFactor', props);\n    controller.run('setZoomFactor', {\n      ...props,\n      zoomFactor: zoomFactor - 0.1\n    });\n  };\n\n  onClickCollapseAll = e => {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('addEventListener', {\n      ...props,\n      key: EventKey.CENTER_ROOT_TOPIC,\n      listener: this.centerRootTopic,\n      once: true\n    });\n    controller.run('operation', {\n      ...props,\n      opType: OpType.COLLAPSE_ALL\n    });\n  };\n\n  onClickExpandAll = e => {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('addEventListener', {\n      ...props,\n      key: EventKey.CENTER_ROOT_TOPIC,\n      listener: this.centerRootTopic,\n      once: true\n    });\n    controller.run('operation', {\n      ...props,\n      opType: OpType.EXPAND_ALL\n    });\n  };\n\n  centerRootTopic = () => {\n    const { model, controller } = this.props;\n    controller.run('moveTopicToCenter', {\n      ...this.props,\n      topicKey: model.editorRootTopicKey\n    });\n  };\n\n  render() {\n    log('render');\n    const props = this.props;\n    const { controller, zIndex } = props;\n    const zoomFactor = controller.run('getZoomFactor', props);\n    return (\n      <ViewerRoot zIndex={zIndex}>\n        <Item onClick={this.onClickCollapseAll} tooltip=\"collapse all\">\n          {Icon(IconName.COLLAPSE_ALL)}\n        </Item>\n        <Item onClick={this.onClickExpandAll} tooltip=\"expand all\">\n          {Icon(IconName.EXPAND_ALL)}\n        </Item>\n        <Item onClick={this.centerRootTopic} tooltip=\"center root topic\">\n          {Icon(IconName.CENTER)}\n        </Item>\n        <Item onClick={this.onClickMinusZoom} tooltip=\"zoom in\">\n          {Icon(IconName.MINUS)}\n        </Item>\n        <Item onClick={this.onClickResetZoom} tooltip=\"reset zoom\">\n          <ZoomFactorSpan>{`zoom:${Math.floor(\n            zoomFactor * 100\n          )}%`}</ZoomFactorSpan>\n        </Item>\n        <Item onClick={this.onClickAddZoom} tooltip=\"zoom out\">\n          {Icon(IconName.PLUS)}\n        </Item>\n      </ViewerRoot>\n    );\n  }\n}\n","import { BlockType } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { SaveRef } from '../../components/common';\nimport { linksRefKey, PropKey, RefKey } from '../../utils';\nimport { EditorRootBreadcrumbs } from './components/editor-root-breadcrumbs';\nimport { MindDragScrollWidget } from './components/mind-drag-scroll-widget';\nimport { Modals } from './components/modals';\nimport { RootSubLinks } from './components/root-sublinks';\nimport { RootWidget } from './components/root-widget';\nimport { TopicCollapseIcon } from './components/topic-collapse-icon';\nimport { TopicContent } from './components/topic-content';\nimport { TopicContentWidget } from './components/topic-content-widget';\nimport { TopicDesc } from './components/topic-desc';\nimport { TopicHighlight } from './components/topic-highlight';\nimport { TopicSubLinks } from './components/topic-sub-links';\nimport { TopicWidget } from './components/topic-widget';\nimport { ViewPortViewer } from './components/view-port-util';\nimport { renderDrawer } from './drawer';\nimport Theme from './theme';\nconst log = debug('plugin:rendering');\n\nexport function RenderingPlugin() {\n  const DiagramRoot = styled.div`\n    width: 100%;\n    height: 100%;\n    background: ${props => props.theme.background};\n    position: relative;\n  `;\n  let diagramProps;\n  return {\n    getDiagramProps() {\n      return diagramProps;\n    },\n    renderDiagram(props) {\n      const { model, controller } = props;\n      return (\n        <SaveRef>\n          {(saveRef, getRef, deleteRef) => {\n            diagramProps = {\n              ...props,\n              saveRef,\n              getRef,\n              deleteRef\n            };\n\n            log('renderDiagram', model);\n            return (\n              <Theme theme={model.config.theme}>\n                <DiagramRoot ref={saveRef(RefKey.DIAGRAM_ROOT_KEY)}>\n                  <MindDragScrollWidget {...diagramProps} />\n                  {controller.run('renderDiagramCustomize', diagramProps)}\n                </DiagramRoot>\n              </Theme>\n            );\n          }}\n        </SaveRef>\n      );\n    },\n    renderDrawer,\n\n    renderDiagramCustomize(props) {\n      const { controller, model } = props;\n      const zIndex = controller.getValue(\n        PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX\n      );\n      const nProps = {\n        ...props,\n        zIndex,\n        topicKey: model.focusKey\n      };\n      const breadcrumbs = controller.run('renderEditorRootBreadcrumbs', nProps);\n      // const styleEditor = controller.run('renderStyleEditor', nProps);\n      const rightTopPanel = controller.run('renderRightTopPanel', nProps);\n      const modals = controller.run('renderModals', {\n        ...nProps,\n        zIndex: zIndex + 1\n      });\n      const drawer = controller.run('renderDrawer', {\n        ...nProps,\n        zIndex: zIndex + 1\n      });\n      const viewportViewer = controller.run('renderViewPortViewer', nProps);\n      return [breadcrumbs, rightTopPanel, modals, drawer, viewportViewer];\n    },\n\n    renderEditorRootBreadcrumbs(props) {\n      return <EditorRootBreadcrumbs key=\"EditorRootBreadcrumbs\" {...props} />;\n    },\n\n    renderModals(props) {\n      return <Modals key=\"modals\" {...props} />;\n    },\n\n    renderModal(props) {\n      return null;\n    },\n\n    getActiveModalProps(props) {\n      return null;\n    },\n\n    renderDoc({ children }) {\n      return children;\n    },\n\n    renderRootWidget(props) {\n      return <RootWidget {...props} />;\n    },\n\n    renderTopicWidget(props) {\n      return <TopicWidget {...props} />;\n    },\n\n    renderTopicContent(props) {\n      return <TopicContentWidget {...props} />;\n    },\n\n    renderTopicCollapseIcon(props) {\n      return <TopicCollapseIcon {...props} />;\n    },\n\n    renderTopicContentOthers(props) {\n      return [];\n    },\n\n    renderTopicBlocks(props) {\n      const { model, topicKey, controller } = props;\n      const topic = model.getTopic(topicKey);\n      const blocks = topic.blocks;\n      const res = [];\n      let i = 0;\n      blocks.forEach(block => {\n        const b = controller.run('renderTopicBlock', {\n          ...props,\n          block,\n          blockKey: `block-${i}`\n        });\n        if (b) {\n          res.push(<React.Fragment key={`block-${i}`}>{b}</React.Fragment>);\n          i++;\n        }\n      });\n      return res;\n    },\n\n    renderTopicBlock(props) {\n      const { controller, block } = props;\n      switch (block.type) {\n        case BlockType.CONTENT:\n          return controller.run('renderTopicBlockContent', props);\n        case BlockType.DESC:\n          return controller.run('renderTopicBlockDesc', props);\n        default:\n          break;\n      }\n      return null;\n    },\n\n    renderTopicBlockContent(props) {\n      return <TopicContent {...props} />;\n    },\n\n    renderTopicBlockDesc(props) {\n      return <TopicDesc {...props} />;\n    },\n\n    renderSubLinks(props) {\n      const { saveRef, topicKey, model } = props;\n      const topic = model.getTopic(topicKey);\n      if (topic.subKeys.size === 0 || topic.collapse) return null;\n      return <TopicSubLinks ref={saveRef(linksRefKey(topicKey))} {...props} />;\n    },\n\n    renderRootSubLinks(props) {\n      // log('renderRootSubLinks');\n      const { saveRef, topicKey } = props;\n      // 这里逻辑有问题,会导致layout 错误\n      // const topic = model.getTopic(topicKey);\n      // if (topic.subKeys.size === 0) return null;\n      return <RootSubLinks ref={saveRef(linksRefKey(topicKey))} {...props} />;\n    },\n\n    renderFocusItemHighlight(props) {\n      const { saveRef } = props;\n      return (\n        <TopicHighlight ref={saveRef(RefKey.FOCUS_HIGHLIGHT_KEY)} {...props} />\n      );\n    },\n\n    renderRootWidgetOtherChildren(props) {\n      const { controller } = props;\n      const zoomFactor = controller.run('getZoomFactor', props);\n      props = { ...props, zoomFactor };\n      return (\n        <>\n          {controller.run('renderRootSubLinks', props)}\n          {controller.run('renderFocusItemHighlight', props)}\n          {controller.run('renderDragAndDropEffect', props)}\n        </>\n      );\n    },\n\n    renderViewPortViewer(props) {\n      return <ViewPortViewer key=\"view-port-viewer\" {...props} />;\n    }\n  };\n}\n","import { TopicDirection } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseProps } from '../../../components/common/base-props';\nimport { linksRefKey, topicRefKey } from '../../../utils';\nimport { TopicSubLinks } from './topic-sub-links';\n\nconst log = debug('node:topic-widget');\n\ntype NodeProps = {\n  topicDirection: string;\n};\n\nconst Node = styled.div<NodeProps>`\n  display: flex;\n  align-items: center;\n  flex-direction: ${props =>\n    props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse'};\n`;\n\ninterface NodeChildrenProps {\n  dir: string;\n  marginH: number;\n}\n\n// TODO\nconst NodeChildren = styled.div<NodeChildrenProps>`\n  position: relative;\n  padding: ${props =>\n    props.dir === TopicDirection.RIGHT\n      ? `0 0 0 ${props.marginH}px`\n      : `0 ${props.marginH}px 0 0`};\n`;\n\ninterface NodeTopicProps {\n  topicDirection: string;\n}\n\nconst NodeTopic = styled.div<NodeTopicProps>`\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ${props =>\n    props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse'};\n`;\n\ninterface Props extends BaseProps {\n  setViewBoxScroll?: (left: number, top: number) => void;\n  setViewBoxScrollDelta?: (left: number, top: number) => void;\n}\n\nexport class TopicWidget extends React.Component<Props> {\n  renderSubTopics() {\n    const props = this.props;\n    const { controller, model, topicKey, dir } = props;\n    const topics = model.getTopic(topicKey).subKeys.toArray();\n    const res = controller.run('createSubTopics', { ...props, topics });\n    if (!res) return null;\n    const { subTopics } = res;\n    const subLinks = controller.run('renderSubLinks', props);\n    return (\n      <NodeChildren dir={dir} marginH={model.config.theme.marginH}>\n        {subTopics} {subLinks}\n      </NodeChildren>\n    );\n  }\n\n  // componentDidUpdate(): void {\n  //   this.layoutLinks();\n  // }\n  //\n  // componentDidMount(): void {\n  //   this.layoutLinks();\n  // }\n\n  layoutLinks() {\n    const { getRef, topicKey, model } = this.props;\n    const topic = model.getTopic(topicKey);\n    if (topic.subKeys.size === 0 || topic.collapse) return;\n    log('layoutLinks', topicKey);\n    const links: TopicSubLinks = getRef(linksRefKey(topicKey));\n    links && links.layout();\n  }\n\n  render() {\n    const props = this.props;\n    const { controller, topicKey, dir, saveRef } = props;\n    log('render', topicKey);\n    const topicStyle = controller.run('getTopicContentStyle', props);\n    const propsMore = {\n      ...props,\n      topicStyle\n    };\n    const topicContent = controller.run('renderTopicContent', propsMore);\n\n    return (\n      <Node topicDirection={dir}>\n        <NodeTopic topicDirection={dir} ref={saveRef(topicRefKey(topicKey))}>\n          {topicContent}\n        </NodeTopic>\n        {this.renderSubTopics()}\n      </Node>\n    );\n  }\n}\n","import { BlockType, FocusMode, OpType } from '@blink-mind/core';\nimport { Drawer } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { cancelEvent, Icon } from '../../utils';\nconst DescEditorWrapper = styled.div`\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n`;\n\nexport function renderDrawer(props) {\n  const { controller, model, topicKey } = props;\n  if (model.focusMode === FocusMode.EDITING_DESC) {\n    const onDescEditorClose = e => {\n      e.stopPropagation();\n      const key = `topic-desc-data-${topicKey}`;\n      const descData = controller.run('deleteTempValue', { key });\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_TOPIC_BLOCK,\n        topicKey,\n        blockType: BlockType.DESC,\n        data: descData,\n        focusMode: FocusMode.NORMAL\n      });\n    };\n    const descEditor = controller.run('renderTopicDescEditor', props);\n    return (\n      <Drawer\n        key=\"drawer\"\n        title=\"Edit Notes\"\n        icon={Icon('note')}\n        isOpen\n        hasBackdrop\n        backdropProps={{ onMouseDown: cancelEvent }}\n        isCloseButtonShown={false}\n        onClose={onDescEditorClose}\n        size=\"70%\"\n      >\n        <DescEditorWrapper>{descEditor}</DescEditorWrapper>\n      </Drawer>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ThemeProvider } from 'styled-components';\n\n//TODO 是否需要themeProvider\nexport default function Theme({ theme, children }) {\n  return (\n    //@ts-ignore\n    <ThemeProvider theme={theme}>\n      <React.Fragment>{children}</React.Fragment>\n    </ThemeProvider>\n  );\n}\n","import {\n  Button,\n  Divider,\n  MenuItem,\n  NumericInput,\n  Popover\n} from '@blueprintjs/core';\nimport { Select } from '@blueprintjs/select';\nimport { ItemRenderer } from '@blueprintjs/select/src/common/itemRenderer';\nimport * as React from 'react';\nimport { SketchPicker } from 'react-color';\nimport { Flex, Margin } from '../../../../components/common';\nimport { iconClassName, IconName } from '../../../../utils';\nimport { ColorBar, SettingItem, WithBorder } from './styled';\nexport function SettingGroup(props) {\n  return (\n    <div>\n      {props.children}\n      <Divider style={{ margin: '10px 0' }} />\n    </div>\n  );\n}\n\nexport function SettingItemColorPicker(props: {\n  color: string;\n  handleColorChange: (color: string) => void;\n}) {\n  const { color, handleColorChange } = props;\n  return (\n    <SettingItem>\n      <Popover>\n        <WithBorder>\n          <div className={iconClassName(IconName.COLOR_PICKER)} />\n          <ColorBar color={color} />\n        </WithBorder>\n        <div>\n          <SketchPicker\n            color={color}\n            onChangeComplete={color => handleColorChange(color.hex)}\n          />\n        </div>\n      </Popover>\n    </SettingItem>\n  );\n}\n\nexport function SettingItemButton(props: {\n  title: string;\n  handleClick: (e) => void;\n}) {\n  const { title, handleClick } = props;\n  return (\n    <SettingItem>\n      <Button onClick={handleClick}>{title}</Button>\n    </SettingItem>\n  );\n}\n\nexport interface SettingItemNumericInputProps {\n  layout?: string;\n  title: string;\n  value: number;\n  min: number;\n  max: number;\n  onValueChange: (valueAsNumber: number, valueAsString: string) => void;\n}\n\nexport function SettingItemNumericInput(props: SettingItemNumericInputProps) {\n  const { layout = 'h', title, ...restProps } = props;\n  const flexProps = {\n    flexDirection: layout === 'h' ? 'row' : 'column',\n    alignItems: 'center'\n  };\n  return (\n    <SettingItem>\n      <Flex {...flexProps}>\n        <Margin margin=\"0 5px 0 0\">{title}</Margin>\n        <NumericInput {...restProps} />\n      </Flex>\n    </SettingItem>\n  );\n}\n\nexport function SettingItemSelect<T>(props: {\n  text: string;\n  items: T[];\n  itemRenderer: ItemRenderer<T>;\n  onItemSelect: (item: T, event?: React.SyntheticEvent<HTMLElement>) => void;\n}) {\n  const { text, items, itemRenderer, onItemSelect } = props;\n  const PxSelect = Select.ofType<T>();\n  const pxProps = {\n    items,\n    itemRenderer,\n    onItemSelect,\n    filterable: false\n  };\n  return (\n    <SettingItem>\n      <PxSelect {...pxProps}>\n        <Button text={text} />\n      </PxSelect>\n    </SettingItem>\n  );\n}\n\nexport const renderItem = unit => (width, { handleClick }) => {\n  return (\n    <MenuItem text={`${width}${unit}`} key={width} onClick={handleClick} />\n  );\n};\n\nexport const PxSelect = Select.ofType();\n\nexport const borderWidthItems = [...Array(7).keys()];\n","import { TabId, Tabs } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport styled from 'styled-components';\nimport {\n  BaseProps,\n  CloseIcon,\n  IconBg,\n  ShowMenuIcon,\n  Title,\n  ZIndex\n} from '../../../../components/common';\nimport { iconClassName, IconName } from '../../../../utils';\n\nconst PanelRoot = styled(ZIndex)`\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n`;\n\nconst StyledTabs = styled(Tabs)`\n  padding: 0px 10px;\n`;\n\nexport type RightTopPanelProps = BaseProps & {\n  selectedTabId: TabId;\n  handleTabIdChange: (tabId: TabId) => void;\n  zIndex: number;\n};\n\nexport function RightTopPanel(props: RightTopPanelProps) {\n  const { controller, zIndex, selectedTabId, handleTabIdChange } = props;\n  const [expand, setExpand] = useState(false);\n\n  if (!expand) {\n    return (\n      <PanelRoot zIndex={zIndex}>\n        <IconBg onClick={() => setExpand(true)}>\n          <ShowMenuIcon className={iconClassName(IconName.SHOW_MENU)} />\n        </IconBg>\n      </PanelRoot>\n    );\n  }\n\n  return (\n    <PanelRoot zIndex={zIndex}>\n      <Title>\n        <CloseIcon\n          className={iconClassName(IconName.CLOSE)}\n          onClick={() => setExpand(false)}\n        />\n      </Title>\n      <StyledTabs id={selectedTabId} onChange={handleTabIdChange}>\n        {controller.run('renderRightTopPanelTabs', props)}\n      </StyledTabs>\n    </PanelRoot>\n  );\n}\n","import styled from 'styled-components';\n\nexport const SettingTitle = styled.div`\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n`;\n\nexport const SettingItem = styled.span`\n  margin: 0px 10px 0px 0px;\n`;\n\nexport const SettingBoxContainer = styled.div`\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n`;\n\nexport const SettingLabel = styled(SettingItem)``;\n\nexport const SettingRow = styled.div`\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n`;\n\nexport const ColorBar = styled.div`\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ${props => props.color};\n`;\n\nexport const WithBorder = styled.div`\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n`;\n","import * as React from 'react';\nimport {\n  renderItem,\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingItemSelect,\n  SettingTitle\n} from '../right-top-panel';\nimport { ContentStyleEditorProps } from './types';\n\nconst borderWidthItems = [...Array(7).keys()];\nconst borderRadiusItems = [0, 5, 10, 15, 20, 25, 30, 35];\nconst borderStyleItems = ['none', 'solid', 'dotted', 'dashed', 'double'];\n\nexport function BorderStyleEditor(props: ContentStyleEditorProps) {\n  const { contentStyle, setContentStyle } = props;\n  const handleBorderWidthChange = value => {\n    // log('handleBorderWithChange:', value);\n    setContentStyle({ borderWidth: `${value}px` });\n  };\n\n  const handleBorderStyleChange = value => {\n    setContentStyle({ borderStyle: value });\n  };\n\n  const handleBorderRadiusChange = value => {\n    // log('handleBorderRadiusChange:', value);\n    setContentStyle({ borderRadius: `${value}px` });\n  };\n\n  const handleBorderColorChange = color => {\n    setContentStyle({ borderColor: color });\n  };\n\n  return (\n    <SettingGroup>\n      <SettingTitle>Border</SettingTitle>\n      <div>\n        <SettingItemSelect\n          text={`width: ${\n            contentStyle.borderWidth ? contentStyle.borderWidth : '0px'\n          }`}\n          items={borderWidthItems}\n          itemRenderer={renderItem('px')}\n          onItemSelect={handleBorderWidthChange}\n        />\n        <SettingItemSelect\n          text={`style: ${\n            contentStyle.borderStyle ? contentStyle.borderStyle : 'none'\n          }`}\n          items={borderStyleItems}\n          itemRenderer={renderItem('')}\n          onItemSelect={handleBorderStyleChange}\n        />\n        <SettingItemSelect\n          text={`radius: ${contentStyle.borderRadius}`}\n          items={borderRadiusItems}\n          itemRenderer={renderItem('px')}\n          onItemSelect={handleBorderRadiusChange}\n        />\n        <SettingItemColorPicker\n          color={contentStyle.borderColor}\n          handleColorChange={handleBorderColorChange}\n        />\n      </div>\n    </SettingGroup>\n  );\n}\n","import { Button } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { SettingGroup, SettingItem } from '../right-top-panel';\n\nexport function ClearAllCustomStyle(props) {\n  const { controller } = props;\n  const handleClearAllCustomStyle = e => {\n    controller.run('clearAllCustomStyle', props);\n  };\n\n  return (\n    <SettingGroup>\n      <SettingItem>\n        <Button onClick={handleClearAllCustomStyle}>\n          Clear All Custom Styles\n        </Button>\n      </SettingItem>\n    </SettingGroup>\n  );\n}\n","import { LinkStyle } from '@blink-mind/core';\nimport { MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { Margin } from '../../../../components/common';\nimport {\n  borderWidthItems,\n  renderItem,\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingItemSelect,\n  SettingRow,\n  SettingTitle\n} from '../right-top-panel';\n\nconst lineTypes = ['curve', 'round', 'line'];\n\nconst renderLineTypeItem = (lineType, { handleClick, modifiers, query }) => {\n  return <MenuItem text={`${lineType}`} key={lineType} onClick={handleClick} />;\n};\n\nexport interface LinkStyleEditorProps {\n  showLinkStyle?: boolean;\n  showSubLinkStyle?: boolean;\n  linkStyle: LinkStyle;\n  subLinkStyle: LinkStyle;\n  setLinkStyle: (LinkStyle) => void;\n  setSubLinkStyle: (LinkStyle) => void;\n}\n\nexport function LinkStyleEditor(props: LinkStyleEditorProps) {\n  const {\n    showLinkStyle = true,\n    showSubLinkStyle = true,\n    linkStyle = {},\n    subLinkStyle = {},\n    setLinkStyle,\n    setSubLinkStyle\n  } = props;\n\n  const handleLinkWidthChange = value => {\n    setLinkStyle({ lineWidth: `${value}px` });\n  };\n\n  const handleLinkTypeChange = value => {\n    setLinkStyle({ lineType: value });\n  };\n\n  const handleLinkColorChange = color => {\n    setLinkStyle({ lineColor: color });\n  };\n\n  const handleSubLinkWidthChange = value => {\n    setSubLinkStyle({ lineWidth: `${value}px` });\n  };\n\n  const handleSubLinkTypeChange = value => {\n    setSubLinkStyle({ lineType: value });\n  };\n\n  const handleSubLinkColorChange = color => {\n    setSubLinkStyle({ lineColor: color });\n  };\n  return (\n    <SettingGroup>\n      <SettingTitle>Link</SettingTitle>\n      {showLinkStyle && (\n        <SettingRow alignItems=\"center\">\n          <Margin margin=\"0 5px 0 0\">LinkToParent: </Margin>\n          <SettingItemSelect\n            text={`width: ${linkStyle ? linkStyle.lineWidth : '0px'}`}\n            items={borderWidthItems}\n            itemRenderer={renderItem('px')}\n            onItemSelect={handleLinkWidthChange}\n          />\n          <SettingItemSelect\n            text={`lineType: ${linkStyle.lineType}`}\n            items={lineTypes}\n            itemRenderer={renderLineTypeItem}\n            onItemSelect={handleLinkTypeChange}\n          />\n          <SettingItemColorPicker\n            color={linkStyle.lineColor}\n            handleColorChange={handleLinkColorChange}\n          />\n        </SettingRow>\n      )}\n      {showSubLinkStyle && (\n        <SettingRow alignItems=\"center\">\n          <Margin margin=\"0 5px 0 0\">SubLinks: </Margin>\n          <SettingItemSelect\n            text={`width: ${subLinkStyle ? subLinkStyle.lineWidth : '0px'}`}\n            items={borderWidthItems}\n            itemRenderer={renderItem('px')}\n            onItemSelect={handleSubLinkWidthChange}\n          />\n          <SettingItemSelect\n            text={`lineType: ${subLinkStyle.lineType}`}\n            items={lineTypes}\n            itemRenderer={renderLineTypeItem}\n            onItemSelect={handleSubLinkTypeChange}\n          />\n          <SettingItemColorPicker\n            color={subLinkStyle.lineColor}\n            handleColorChange={handleSubLinkColorChange}\n          />\n        </SettingRow>\n      )}\n    </SettingGroup>\n  );\n}\n","import { InputGroup } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { Flex, Margin } from '../../../../components/common';\nimport {\n  SettingGroup,\n  SettingItem,\n  SettingItemColorPicker,\n  SettingItemNumericInput,\n  SettingTitle\n} from '../right-top-panel';\nimport { ContentStyleEditorProps } from './types';\n\nexport function TextStyleEditor(props: ContentStyleEditorProps) {\n  const { contentStyle, setContentStyle } = props;\n  const handleFontSizeChange = value => {\n    // log('handleFontSizeChange:', value);\n    setContentStyle({ fontSize: value });\n  };\n\n  const handleLineHeightChange = e => {\n    // log('handleLineHeightChange:', e.target.value);\n    setContentStyle({ lineHeight: e.target.value });\n  };\n\n  const handleColorChange = color => {\n    setContentStyle({ color });\n  };\n\n  const fontSizeNumInputProps = {\n    title: 'FontSize:',\n    min: 12,\n    max: 100,\n    value: parseInt(contentStyle.fontSize),\n    style: {\n      width: 50\n    },\n    onValueChange: handleFontSizeChange\n  };\n  const lineHeightInputProps = {\n    style: {\n      width: 50\n    },\n    value: contentStyle.lineHeight || '',\n    onChange: handleLineHeightChange\n  };\n  return (\n    <SettingGroup>\n      <SettingTitle>Text Editor</SettingTitle>\n      <Flex>\n        <SettingItemNumericInput {...fontSizeNumInputProps} />\n        <SettingItem>\n          <Flex alignItems=\"center\">\n            <Margin margin=\"0 5px 0 0\">LineHeight: </Margin>\n            <InputGroup {...lineHeightInputProps} />\n          </Flex>\n        </SettingItem>\n        <SettingItemColorPicker\n          color={contentStyle.color}\n          handleColorChange={handleColorChange}\n        />\n      </Flex>\n    </SettingGroup>\n  );\n}\n","import { LinkStyle, OpType, TopicContentStyle } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport { BaseProps, PanelTabRoot } from '../../../../components/common';\nimport {\n  SettingGroup,\n  SettingItemButton,\n  SettingItemColorPicker,\n  SettingTitle\n} from '../right-top-panel/';\nimport { BorderStyleEditor } from './border-style-editor';\nimport { ClearAllCustomStyle } from './clear-all-custom-style';\nimport { LinkStyleEditor, LinkStyleEditorProps } from './link-style-editor';\nimport { TextStyleEditor } from './text-style-editor';\nimport { ContentStyleEditorProps } from './types';\n\nconst log = debug('node:style-editor');\n\nlet copiedStyle;\n\nexport function StyleEditor(props: BaseProps) {\n  const { controller, model, topicKey } = props;\n  const topic = model.getTopic(topicKey);\n  const setContentStyle = style => {\n    controller.run('setTopicContentStyle', { ...props, style });\n  };\n\n  const handleBackgroundColorChange = color => {\n    setContentStyle({ background: color });\n  };\n\n  const handleClearStyle = () => {\n    if (topic.style) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_STYLE,\n        style: null\n      });\n    }\n  };\n\n  const handleCopyStyle = () => {\n    copiedStyle = controller.run('getTopicStyle', props);\n    log(copiedStyle);\n  };\n\n  const handlePasteStyle = () => {\n    if (copiedStyle) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_STYLE,\n        style: JSON.stringify(copiedStyle)\n      });\n    }\n  };\n\n  if (!model.focusKey) return null;\n  const contentStyle: TopicContentStyle = controller.run(\n    'getTopicContentStyle',\n    props\n  );\n\n  const linkStyle: LinkStyle = controller.run('getLinkStyle', props);\n  const subLinkStyle: LinkStyle = controller.run('getSubLinkStyle', props);\n  const setLinkStyle = linkStyle => {\n    controller.run('setLinkStyle', {\n      ...props,\n      linkStyle\n    });\n  };\n\n  const setSubLinkStyle = subLinkStyle => {\n    controller.run('setSubLinkStyle', {\n      ...props,\n      subLinkStyle\n    });\n  };\n\n  const linkStyleEditorProps: LinkStyleEditorProps = {\n    linkStyle,\n    subLinkStyle,\n    setLinkStyle,\n    setSubLinkStyle\n  };\n\n  const contentStyleEditorPros: ContentStyleEditorProps = {\n    contentStyle,\n    setContentStyle\n  };\n\n  return (\n    <PanelTabRoot>\n      <BorderStyleEditor {...contentStyleEditorPros} />\n      <TextStyleEditor {...contentStyleEditorPros} />\n      <SettingGroup>\n        <SettingTitle>Background</SettingTitle>\n        <SettingItemColorPicker\n          color={contentStyle.background}\n          handleColorChange={handleBackgroundColorChange}\n        />\n      </SettingGroup>\n      <LinkStyleEditor {...linkStyleEditorProps} />\n      <SettingGroup>\n        <SettingItemButton\n          title=\"Clear Topic Style\"\n          handleClick={handleClearStyle}\n        />\n        <SettingItemButton title=\"Copy Style\" handleClick={handleCopyStyle} />\n        <SettingItemButton title=\"Paste Style\" handleClick={handlePasteStyle} />\n      </SettingGroup>\n      {ClearAllCustomStyle(props)}\n    </PanelTabRoot>\n  );\n}\n","import * as React from 'react';\n/** Event handler that exposes the target element's value as a boolean. */\nexport function handleBooleanChange(handler: (checked: boolean) => void) {\n  return (event: React.FormEvent<HTMLElement>) =>\n    handler((event.target as HTMLInputElement).checked);\n}\n\n/** Event handler that exposes the target element's value as a string. */\nexport function handleStringChange(handler: (value: string) => void) {\n  return (event: React.FormEvent<HTMLElement>) =>\n    handler((event.target as HTMLInputElement).value);\n}\n\n/** Event handler that exposes the target element's value as a number. */\nexport function handleNumberChange(handler: (value: number) => void) {\n  return handleStringChange(value => handler(+value));\n}\n","import * as React from 'react';\nimport { paddingCss } from '../../../../utils';\nimport {\n  SettingGroup,\n  SettingItemNumericInput,\n  SettingRow,\n  SettingTitle\n} from '../right-top-panel';\nimport { ContentStyleEditorProps } from './types';\n\nconst expand = require('css-shorthand-expand');\n\nexport function PaddingStyleEditor(props: ContentStyleEditorProps) {\n  const { contentStyle, setContentStyle } = props;\n  const padding = expand('padding', contentStyle.padding || '0');\n  const commonProps = {\n    layout: 'v',\n    min: 0,\n    max: 99,\n    style: {\n      width: 38\n    }\n  };\n  const top = parseInt(padding['padding-top']);\n  const right = parseInt(padding['padding-right']);\n  const bottom = parseInt(padding['padding-bottom']);\n  const left = parseInt(padding['padding-left']);\n  const p = {\n    top,\n    right,\n    bottom,\n    left\n  };\n\n  const setPadding = dir => v => {\n    setContentStyle({ padding: paddingCss({ ...p, [dir]: v }) });\n  };\n  const topProps = {\n    ...commonProps,\n    title: 'top',\n    value: top,\n    onValueChange: setPadding('top')\n  };\n  const rightProps = {\n    ...commonProps,\n    title: 'right',\n    value: right,\n    onValueChange: setPadding('right')\n  };\n  const bottomProps = {\n    ...commonProps,\n    title: 'bottom',\n    value: bottom,\n    onValueChange: setPadding('bottom')\n  };\n  const leftProps = {\n    ...commonProps,\n    title: 'left',\n    value: left,\n    onValueChange: setPadding('left')\n  };\n  return (\n    <SettingGroup>\n      <SettingTitle>Padding</SettingTitle>\n      <SettingRow>\n        <SettingItemNumericInput {...topProps} />\n        <SettingItemNumericInput {...rightProps} />\n        <SettingItemNumericInput {...bottomProps} />\n        <SettingItemNumericInput {...leftProps} />\n      </SettingRow>\n    </SettingGroup>\n  );\n}\n","import { LinkStyle, TopicContentStyle, TopicStyle } from '@blink-mind/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport {\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingTitle\n} from '../right-top-panel';\nimport { BorderStyleEditor } from '../style-editor/border-style-editor';\nimport { LinkStyleEditor } from '../style-editor/link-style-editor';\nimport { PaddingStyleEditor } from '../style-editor/padding-style-editor';\nimport { TextStyleEditor } from '../style-editor/text-style-editor';\nimport { ContentStyleEditorProps } from '../style-editor/types';\n\nconst TopicThemeEditorRoot = styled.div`\n  height: 250px;\n  overflow: auto;\n`;\n\nexport interface TopicThemeEditorProps {\n  topicStyle: TopicStyle;\n  setTopicStyle: (style: TopicStyle) => void;\n}\n\nexport function TopicThemeEditor(props: TopicThemeEditorProps) {\n  const { topicStyle, setTopicStyle } = props;\n  const { contentStyle = {}, linkStyle = {}, subLinkStyle = {} } = topicStyle;\n\n  const setContentStyle = (contentStyle: TopicContentStyle) => {\n    setTopicStyle({ contentStyle });\n  };\n\n  const nProps: ContentStyleEditorProps = {\n    contentStyle,\n    setContentStyle\n  };\n\n  const setLinkStyle = (linkStyle: LinkStyle) => {\n    setTopicStyle({ linkStyle });\n  };\n\n  const setSubLinkStyle = (subLinkStyle: LinkStyle) => {\n    setTopicStyle({ subLinkStyle });\n  };\n\n  const linkStyleEditorProps = {\n    showLinkStyle: false,\n    linkStyle,\n    subLinkStyle,\n    setLinkStyle,\n    setSubLinkStyle\n  };\n  return (\n    <TopicThemeEditorRoot>\n      <BorderStyleEditor {...nProps} />\n      <PaddingStyleEditor {...nProps} />\n      <TextStyleEditor {...nProps} />\n      <SettingGroup>\n        <SettingTitle>Background</SettingTitle>\n        <SettingItemColorPicker\n          color={contentStyle.background}\n          handleColorChange={color => {\n            setContentStyle({ background: color });\n          }}\n        />\n      </SettingGroup>\n      <LinkStyleEditor {...linkStyleEditorProps} />\n    </TopicThemeEditorRoot>\n  );\n}\n","import { isThemeType, OpType, ThemeType, TopicStyle } from '@blink-mind/core';\nimport { Alert, Tab, Tabs } from '@blueprintjs/core';\nimport { clone, merge } from 'lodash';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport {\n  BaseProps,\n  PanelTabRoot,\n  StyledCheckbox\n} from '../../../../components/common';\nimport { browserDownloadText, browserOpenFile } from '../../../../utils';\nimport { handleBooleanChange } from '../../../../utils/blueprint';\nimport {\n  SettingBoxContainer,\n  SettingGroup,\n  SettingItemButton,\n  SettingItemColorPicker,\n  SettingLabel,\n  SettingRow,\n  SettingTitle\n} from '../right-top-panel';\nimport { TopicThemeEditor, TopicThemeEditorProps } from './topic-theme-editor';\n\nlet tabId = 'normal';\n\nexport function ThemeEditor(props: BaseProps) {\n  const [showExportDialog, setShowExportDialog] = useState(false);\n  const [alertThemeError, setAlertThemeError] = useState(false);\n  const { model, controller } = props;\n  const theme: ThemeType = model.config.theme;\n\n  const { rootTopic, primaryTopic, normalTopic } = theme;\n\n  const setTheme = theme => {\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_THEME,\n      theme: clone(theme)\n    });\n  };\n\n  const handleBackgroundColorChange = background => {\n    setTheme(merge(theme, { background }));\n  };\n\n  const handleHighlightColorChange = highlightColor => {\n    setTheme(merge(theme, { highlightColor }));\n  };\n\n  const handleRandomColorChange = handleBooleanChange(randomColor => {\n    setTheme(merge(theme, { randomColor }));\n  });\n\n  const setRootTopicStyle = (style: TopicStyle) => {\n    setTheme(merge(theme, { rootTopic: style }));\n  };\n\n  const setPrimaryTopicStyle = (style: TopicStyle) => {\n    setTheme(merge(theme, { primaryTopic: style }));\n  };\n\n  const setNormalTopicStyle = (style: TopicStyle) => {\n    setTheme(merge(theme, { normalTopic: style }));\n  };\n\n  const rootTopicEditorProps: TopicThemeEditorProps = {\n    topicStyle: rootTopic,\n    setTopicStyle: setRootTopicStyle\n  };\n\n  const rootTopicEditor = <TopicThemeEditor {...rootTopicEditorProps} />;\n\n  const primaryTopicEditorProps: TopicThemeEditorProps = {\n    topicStyle: primaryTopic,\n    setTopicStyle: setPrimaryTopicStyle\n  };\n\n  const primaryTopicEditor = <TopicThemeEditor {...primaryTopicEditorProps} />;\n\n  const normalTopicEditorProps: TopicThemeEditorProps = {\n    topicStyle: normalTopic,\n    setTopicStyle: setNormalTopicStyle\n  };\n\n  const normalTopicEditor = <TopicThemeEditor {...normalTopicEditorProps} />;\n\n  const tabsProps = {\n    id: tabId,\n    handleTabIdChange: id => {\n      tabId = id;\n    }\n  };\n\n  const topicThemes = (\n    <SettingBoxContainer>\n      <Tabs {...tabsProps}>\n        <Tab id=\"normal\" title=\"NormalTopic\" panel={normalTopicEditor} />\n        <Tab id=\"primary\" title=\"PrimaryTopic\" panel={primaryTopicEditor} />\n        <Tab id=\"root\" title=\"RootTopic\" panel={rootTopicEditor} />\n      </Tabs>\n    </SettingBoxContainer>\n  );\n\n  const handleExportTheme = e => {\n    // setShowExportDialog(true);\n    const text = JSON.stringify(theme);\n    browserDownloadText(text, 'blink-mind-theme.json');\n  };\n  const handleImportTheme = e => {\n    browserOpenFile('.json,.txt').then(txt => {\n      const t: ThemeType = JSON.parse(txt);\n      if (!isThemeType(t)) {\n        setAlertThemeError(true);\n        return;\n      }\n      setTheme(t);\n    });\n  };\n  const alertProps = {\n    isOpen: alertThemeError,\n    onClose: e => {\n      setAlertThemeError(false);\n    }\n  };\n  const alert = (\n    <Alert {...alertProps}>\n      <p>File format error</p>\n    </Alert>\n  );\n\n  return (\n    <PanelTabRoot>\n      <SettingGroup>\n        <SettingTitle>Global</SettingTitle>\n        <SettingRow>\n          <SettingLabel>Background:</SettingLabel>\n          <SettingItemColorPicker\n            color={theme.background}\n            handleColorChange={handleBackgroundColorChange}\n          />\n          <SettingLabel>Highlight:</SettingLabel>\n          <SettingItemColorPicker\n            color={theme.highlightColor}\n            handleColorChange={handleHighlightColorChange}\n          />\n          <SettingLabel>Random Color:</SettingLabel>\n          <StyledCheckbox\n            checked={theme.randomColor}\n            onChange={handleRandomColorChange}\n          />\n        </SettingRow>\n      </SettingGroup>\n      {topicThemes}\n\n      <SettingGroup>\n        <SettingItemButton\n          title=\"Export Theme\"\n          handleClick={handleExportTheme}\n        />\n        <SettingItemButton\n          title=\"Import Theme\"\n          handleClick={handleImportTheme}\n        />\n      </SettingGroup>\n\n      {/*<Dialog*/}\n      {/*  onClose={()=>setShowExportDialog(false)}*/}\n      {/*  isOpen={showExportDialog}*/}\n      {/*  autoFocus*/}\n      {/*  enforceFocus*/}\n      {/*  usePortal*/}\n      {/*  title=\"Please input the export file name\"*/}\n      {/*>*/}\n      {/*  */}\n      {/*</Dialog>*/}\n      {alert}\n    </PanelTabRoot>\n  );\n}\n","import { Tab } from '@blueprintjs/core';\nimport * as React from 'react';\nimport {\n  RightTopPanel,\n  RightTopPanelProps\n} from './components/right-top-panel/right-top-panel';\nimport { StyleEditor } from './components/style-editor';\nimport { ThemeEditor } from './components/theme-editor';\n\nexport function RightTopPanelPlugin() {\n  let selectedTabId = 'topic-style';\n  const handleTabIdChange = tabId => {\n    selectedTabId = tabId;\n  };\n  return {\n    renderRightTopPanel(props) {\n      const nProps: RightTopPanelProps = {\n        ...props,\n        key: 'right-top-panel',\n        selectedTabId,\n        handleTabIdChange\n      };\n      return <RightTopPanel {...nProps} />;\n    },\n\n    renderRightTopPanelTabs(props) {\n      const { controller } = props;\n      const styleEditorTab = controller.run('renderTopicStyleEditor', props);\n      const themeEditorTab = controller.run('renderThemeEditor', props);\n\n      return [styleEditorTab, themeEditorTab];\n    },\n\n    renderTopicStyleEditor(props) {\n      const tProps = {\n        id: 'topic-style',\n        key: 'topic-style',\n        title: 'TopicStyle',\n        panel: <StyleEditor {...props} />\n      };\n      return <Tab {...tProps} />;\n    },\n\n    renderThemeEditor(props) {\n      const tProps = {\n        id: 'theme-editor',\n        key: 'theme-editor',\n        title: 'Theme',\n        panel: <ThemeEditor {...props} />\n      };\n      return <Tab {...tProps} />;\n    }\n  };\n}\n","import debug from 'debug';\nconst log = debug('plugin:utils');\nexport function UtilsPlugin() {\n  const tempValueMap = new Map();\n  const eventListenerMap = new Map();\n  return {\n    addTempValueChangeListener(props) {\n      const { key, listener } = props;\n      if (!eventListenerMap.has(key)) {\n        eventListenerMap.set(key, []);\n      }\n      eventListenerMap.get(key).push(listener);\n    },\n\n    removeTempValueChangeListener(props) {\n      const { key, listener } = props;\n      if (eventListenerMap.has(key)) {\n        eventListenerMap[key] = eventListenerMap\n          .get(key)\n          .filter(l => l !== listener);\n      }\n    },\n\n    getTempValue(props) {\n      const { key } = props;\n      log('getTempValue', key);\n      return tempValueMap.get(key);\n    },\n\n    setTempValue(props) {\n      const { key, value } = props;\n      log('setTempValue', key);\n      tempValueMap.set(key, value);\n      if (eventListenerMap.has(key)) {\n        const listeners = eventListenerMap.get(key);\n        for (const listener of listeners) {\n          listener(value);\n        }\n      }\n    },\n\n    deleteTempValue(props) {\n      const { key } = props;\n      log('deleteTempValue', key);\n      const value = tempValueMap.get(key);\n      tempValueMap.delete(key);\n      return value;\n    }\n  };\n}\n","import { ContextMenuPlugin } from './context-menu';\nimport { DragAndDropPlugin } from './drag-and-drop';\nimport { RenderingPlugin } from './rendering';\nimport { RightTopPanelPlugin } from './right-top-panel-plugin';\nimport { UtilsPlugin } from './utils';\n\nexport function ReactPlugin(options = {}) {\n  return [\n    RenderingPlugin(),\n    UtilsPlugin(),\n    ContextMenuPlugin(),\n    RightTopPanelPlugin(),\n    DragAndDropPlugin()\n  ];\n}\n","import {\n  LinkStyle,\n  OpType,\n  ThemeType,\n  TopicStyle,\n  TopicVisualLevel\n} from '@blink-mind/core';\nimport debug from 'debug';\nimport { isEqual } from 'lodash';\n\nconst log = debug('plugin:StylePlugin');\n\nexport function StylePlugin() {\n  const colorMap = new Map();\n  let colorIndex = 0;\n  return {\n    getTopicStyle(props): TopicStyle {\n      const { controller } = props;\n      return {\n        contentStyle: controller.run('getTopicContentStyle', props),\n        linkStyle: controller.run('getLinkStyle', props),\n        subLinkStyle: controller.run('getSubLinkStyle', props)\n      };\n    },\n\n    getTopicContentStyle(props): TopicStyle {\n      const { topicKey, model, controller } = props;\n      log('getTopicContentStyle:', topicKey, model);\n      const visualLevel = model.getTopicVisualLevel(topicKey);\n      const theme = model.config.theme;\n      let themeStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) themeStyle = theme.rootTopic;\n      else if (visualLevel === TopicVisualLevel.PRIMARY)\n        themeStyle = theme.primaryTopic;\n      else themeStyle = theme.normalTopic;\n\n      themeStyle = { ...theme.contentStyle, ...themeStyle.contentStyle };\n\n      if (theme.randomColor) {\n        const randomColor = controller.run('getRandomColor', props);\n        themeStyle = {\n          ...themeStyle,\n          background: randomColor,\n          borderColor: randomColor,\n          subLinkStyle: {\n            ...themeStyle.subLinkStyle,\n            lineColor: randomColor\n          }\n        };\n      }\n      const topic = model.getTopic(topicKey);\n      if (!topic.style) {\n        return themeStyle;\n      }\n      const customStyle = JSON.parse(topic.style);\n\n      return {\n        ...themeStyle,\n        ...customStyle.contentStyle\n      };\n    },\n\n    getLinkStyle(props): LinkStyle {\n      const { topicKey, model, controller } = props;\n      log('getLinkStyle', topicKey);\n      const visualLevel = model.getTopicVisualLevel(topicKey);\n      const theme: ThemeType = model.config.theme;\n      let linkStyle: LinkStyle = theme.linkStyle;\n      let presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT)\n        presetStyle = theme.rootTopic.linkStyle;\n      else if (visualLevel === TopicVisualLevel.PRIMARY)\n        presetStyle = theme.primaryTopic.linkStyle;\n      else presetStyle = theme.normalTopic.linkStyle;\n\n      linkStyle = { ...linkStyle, ...presetStyle };\n\n      const topic = model.getTopic(topicKey);\n\n      if (topic.parentKey != null) {\n        const parentSubLinkStyle = controller.run('getSubLinkStyle', {\n          ...props,\n          topicKey: topic.parentKey\n        });\n\n        linkStyle = {\n          ...linkStyle,\n          ...parentSubLinkStyle\n        };\n      }\n\n      if (!topic.style) {\n        return linkStyle;\n      }\n      const customStyle = JSON.parse(topic.style);\n\n      return {\n        ...linkStyle,\n        ...customStyle.linkStyle\n      };\n    },\n\n    getSubLinkStyle(props): LinkStyle {\n      const { topicKey, model, controller } = props;\n      log('getLinkStyle', topicKey);\n      const visualLevel = model.getTopicVisualLevel(topicKey);\n      const theme = model.config.theme;\n      let subLinkStyle = theme.linkStyle;\n      let presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT)\n        presetStyle = theme.rootTopic.subLinkStyle;\n      else if (visualLevel === TopicVisualLevel.PRIMARY)\n        presetStyle = theme.primaryTopic.subLinkStyle;\n      else presetStyle = theme.normalTopic.subLinkStyle;\n\n      subLinkStyle = { ...subLinkStyle, ...presetStyle };\n\n      const topic = model.getTopic(topicKey);\n      // 获取父节点的color\n      if (theme.randomColor) {\n        const randomColor = controller.run('getRandomColor', props);\n        log(randomColor);\n        subLinkStyle = {\n          ...subLinkStyle,\n          lineColor: randomColor\n        };\n      }\n\n      if (!topic.style) {\n        return subLinkStyle;\n      }\n      const customStyle = JSON.parse(topic.style);\n\n      const res = {\n        ...subLinkStyle,\n        ...customStyle.subLinkStyle\n      };\n      // if (res.lineRadius == null) res.lineRadius = 5;\n      return res;\n    },\n\n    setTopicContentStyle(props) {\n      const { topicKey, controller, style, model } = props;\n      const topic = model.getTopic(topicKey);\n      const topicStyle = topic.style;\n      const styleObj = topicStyle ? JSON.parse(topicStyle) : {};\n      const newStyleObj = {\n        ...styleObj,\n        contentStyle: {\n          ...styleObj.contentStyle,\n          ...style\n        }\n      };\n      if (!isEqual(styleObj, newStyleObj)) {\n        const newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        });\n      }\n    },\n\n    setLinkStyle(props) {\n      const { topicKey, controller, linkStyle, model } = props;\n      const topic = model.getTopic(topicKey);\n      const style = topic.style;\n      const styleObj = style ? JSON.parse(style) : {};\n      const newStyleObj = {\n        ...styleObj,\n        linkStyle: {\n          ...styleObj.linkStyle,\n          ...linkStyle\n        }\n      };\n      if (!isEqual(styleObj, newStyleObj)) {\n        const newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        });\n      }\n    },\n\n    setSubLinkStyle(props) {\n      const { topicKey, controller, subLinkStyle, model } = props;\n      const topic = model.getTopic(topicKey);\n      const style = topic.style;\n      const styleObj = style ? JSON.parse(style) : {};\n      const newStyleObj = {\n        ...styleObj,\n        subLinkStyle: {\n          ...styleObj.subLinkStyle,\n          ...subLinkStyle\n        }\n      };\n      if (!isEqual(styleObj, newStyleObj)) {\n        const newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        });\n      }\n    },\n\n    getTopicThemeStyle(props): TopicStyle {\n      const { topicKey, model } = props;\n      const visualLevel = model.getTopicVisualLevel(topicKey);\n      const theme = model.config.theme;\n      if (visualLevel === TopicVisualLevel.ROOT) return theme.rootTopic;\n      if (visualLevel === TopicVisualLevel.PRIMARY) return theme.primaryTopic;\n      return theme.normalTopic;\n    },\n\n    getRandomColor(props) {\n      const { topicKey } = props;\n      if (colorMap.has(topicKey)) return colorMap.get(topicKey);\n      const colors = [\n        '#00CC99',\n        '#FFEE88',\n        '#A167A5',\n        '#E5F993',\n        '#F5C396',\n        '#DB995A',\n        '#83BCFF',\n        '#ED7B84',\n        '#739E82',\n        '#D3BCC0',\n        '#FFA0FD',\n        '#EFD3D7',\n        '#C6878F'\n      ];\n      const color = colors[++colorIndex % colors.length];\n      colorMap.set(topicKey, color);\n      log('getRandomColor', topicKey, color);\n      return color;\n    },\n\n    clearAllCustomStyle(props) {\n      const { model, controller } = props;\n      const newModel = model.withMutations(model => {\n        model.topics.keySeq().forEach(key => {\n          model.setIn(['topics', key, 'style'], null);\n        });\n      });\n      controller.change(newModel);\n    }\n  };\n}\n","import SimpleTextEditorPlugin from '@blink-mind/plugin-simple-text-editor';\nimport { EventPlugin } from './event';\nimport { GetValuePlugin } from './get-value';\nimport { HotKeyPlugin } from './hotkey';\nimport { LayoutPlugin } from './layout';\nimport { OperationPlugin } from './operation';\nimport { ReactPlugin } from './react';\nimport { StylePlugin } from './style';\n\nexport * from './hotkey';\n\nexport function DefaultPlugin() {\n  return [\n    ReactPlugin(),\n    LayoutPlugin(),\n    OperationPlugin(),\n    StylePlugin(),\n    EventPlugin(),\n    HotKeyPlugin(),\n    GetValuePlugin(),\n    SimpleTextEditorPlugin()\n  ];\n}\n","import {\n  Controller,\n  IDiagram,\n  IDiagramProps,\n  Model,\n  OnChangeFunction,\n  OpType\n} from '@blink-mind/core';\n// TODO\nimport '@blink-mind/icons';\n\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport debug from 'debug';\nimport memoizeOne from 'memoize-one';\nimport * as React from 'react';\nimport { DefaultPlugin, HotKeysConfig } from '../plugins';\nimport './diagram.css';\nconst log = debug('node:Diagram');\n\ninterface Props {\n  model: Model;\n  onChange: OnChangeFunction;\n  commands?: any;\n  plugins?: any;\n}\n\nexport class Diagram extends React.Component<Props> implements IDiagram {\n  controller: Controller;\n\n  public getDiagramProps(): IDiagramProps {\n    return this.controller.run('getDiagramProps');\n  }\n\n  public openNewModel(newModel: Model) {\n    const props = this.getDiagramProps();\n    const { model, controller } = props;\n    controller.run('deleteRefKey', {\n      ...props,\n      topicKey: model.rootTopicKey\n    });\n    controller.run('operation', {\n      ...props,\n      opType: OpType.EXPAND_TO,\n      topicKey: newModel.focusKey,\n      model: newModel,\n      callback: () => {\n        const props = this.getDiagramProps();\n        const { model } = props;\n        controller.run('moveTopicToCenter', {\n          ...props,\n          topicKey: model.focusKey\n        });\n      }\n    });\n  }\n\n  private diagramProps: IDiagramProps;\n\n  private resolveController = memoizeOne((plugins = [], TheDefaultPlugin) => {\n    const defaultPlugin = TheDefaultPlugin();\n    this.controller = new Controller({\n      plugins: [plugins, defaultPlugin],\n      construct: false,\n      onChange: this.props.onChange\n    });\n    // this.controller.run('onConstruct');\n  });\n\n  render() {\n    const { plugins } = this.props;\n    this.resolveController(plugins, DefaultPlugin);\n    this.diagramProps = {\n      ...this.props,\n      controller: this.controller\n    };\n    return this.controller.run('renderDiagram', this.diagramProps);\n  }\n}\n","import {\n  DiagramLayoutType,\n  FocusMode,\n  getRelationship,\n  KeyType,\n  Model,\n  ModelModifier,\n  OpType,\n  Topic,\n  TopicRelationship\n} from '@blink-mind/core';\nimport {\n  getRelativeRect,\n  getRelativeVector,\n  linksRefKey,\n  RefKey,\n  topicRefKey,\n  topicWidgetRefKey\n} from '../utils';\nimport { RootSubLinks } from './react/components/root-sublinks';\nimport { TopicDropEffect } from './react/components/topic-drop-effect';\nimport { TopicHighlight } from './react/components/topic-highlight';\nimport { TopicWidget } from './react/components/topic-widget';\n\nexport type GetPartTopicsArg = {\n  layout: DiagramLayoutType;\n  model: Model;\n  topicKey: KeyType;\n};\nexport interface GetPartTopicsRes {\n  [part: number]: KeyType[];\n}\n\nexport function LayoutPlugin() {\n  const _zoomFactor = 1;\n  return {\n    getPartTopics({\n      layout,\n      model,\n      topicKey\n    }: GetPartTopicsArg): GetPartTopicsRes {\n      const topic = model.getTopic(topicKey);\n      const subTopicCount = topic.subKeys.size;\n      const topics = topic.subKeys.toArray();\n      switch (layout) {\n        case DiagramLayoutType.LEFT_TO_RIGHT:\n          return { R: topics };\n        case DiagramLayoutType.RIGHT_TO_LEFT:\n          return { L: topics };\n        case DiagramLayoutType.LEFT_AND_RIGHT:\n          return {\n            L: topics.slice(Math.ceil(subTopicCount / 2), subTopicCount),\n            R: topics.slice(0, Math.ceil(subTopicCount / 2))\n          };\n        case DiagramLayoutType.TOP_TO_BOTTOM:\n          return {\n            B: topics\n          };\n      }\n    },\n\n    createSubTopics(props) {\n      const { model, topicKey, controller, topics, saveRef } = props;\n      const topic = model.getTopic(topicKey);\n      if (topics.size === 0 || topic.collapse) return null;\n      const subTopics = [];\n      topics.forEach(tKey => {\n        const topicProps = {\n          ...props,\n          topicKey: tKey,\n          key: tKey,\n          ref: saveRef(topicWidgetRefKey(tKey))\n        };\n        subTopics.push(controller.run('renderTopicWidget', topicProps));\n      });\n      return { subTopics };\n    },\n\n    layout(props) {\n      const { getRef, model } = props;\n      const links = getRef(\n        linksRefKey(model.editorRootTopicKey)\n      ) as RootSubLinks;\n      const highlight = getRef(RefKey.FOCUS_HIGHLIGHT_KEY) as TopicHighlight;\n      const dropEffect = getRef(RefKey.DROP_EFFECT_KEY) as TopicDropEffect;\n      links && links.layout();\n      highlight && highlight.layout();\n      dropEffect && dropEffect.layout();\n\n      const editorRootTopic = model.getTopic(model.editorRootTopicKey);\n      layoutTopic(editorRootTopic);\n\n      function layoutTopic(topic: Topic) {\n        if (topic.key !== model.editorRootTopicKey) {\n          const topicWidget = getRef(\n            topicWidgetRefKey(topic.key)\n          ) as TopicWidget;\n          topicWidget && topicWidget.layoutLinks();\n        }\n        if (!topic.collapse) {\n          for (const subKey of topic.subKeys) {\n            layoutTopic(model.getTopic(subKey));\n          }\n        }\n      }\n    },\n\n    setLayoutDir(props) {\n      const { layoutDir, model, controller } = props;\n      controller.change(ModelModifier.setLayoutDir({ model, layoutDir }));\n    },\n\n    getRelativeRect(props) {\n      const { element, controller, getRef } = props;\n      const zoomFactor = controller.run('getZoomFactor', props);\n      const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).bigView;\n      return getRelativeRect(element, bigView, zoomFactor);\n    },\n\n    getRelativeRectFromViewPort(props) {\n      const { element, controller, getRef } = props;\n      const zoomFactor = controller.run('getZoomFactor', props);\n      const viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;\n      return getRelativeRect(element, viewBox, zoomFactor);\n    },\n    getRelativeVectorFromViewPort(props) {\n      const { element, getRef } = props;\n      const viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY).viewBox;\n      return getRelativeVector(element, viewBox);\n    },\n\n    addZoomFactorChangeEventListener(props) {\n      const { controller } = props;\n      controller.run('addTempValueChangeListener', {\n        key: 'ZoomFactor',\n        ...props\n      });\n    },\n\n    removeZoomFactorChangeEventListener(props) {\n      const { controller } = props;\n      controller.run('removeTempValueChangeListener', {\n        key: 'ZoomFactor',\n        ...props\n      });\n    },\n\n    setZoomFactor(props) {\n      const { controller, zoomFactor } = props;\n      return controller.run('setTempValue', {\n        key: 'ZoomFactor',\n        value: zoomFactor\n      });\n    },\n\n    getZoomFactor(props) {\n      const { controller } = props;\n      return (\n        controller.run('getTempValue', { key: 'ZoomFactor' }) || _zoomFactor\n      );\n    },\n\n    moveTopicToCenter(props) {\n      const { getRef, topicKey, model } = props;\n      if (\n        model.editorRootTopicKey !== topicKey &&\n        getRelationship(model, topicKey, model.editorRootTopicKey) !==\n          TopicRelationship.DESCENDANT\n      ) {\n        throw new Error(\n          `moveTopicToCenter error: topicKey ${topicKey} is not the DESCENDANT of editor root topic`\n        );\n      }\n      const topic = getRef(topicRefKey(topicKey));\n      const dragScroll = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY);\n      const viewBox = dragScroll.viewBox;\n      if (!topic || !viewBox) {\n        throw new Error(`moveTopicToCenter error: topic or viewBox is null`);\n      }\n      const vector = getRelativeVector(topic, viewBox);\n      //TODO\n      dragScroll.setViewBoxScrollDelta(vector[0], vector[1]);\n    },\n\n    focusTopicAndMoveToCenter(props) {\n      const { controller, topicKey } = props;\n      controller.run('operation', {\n        ...props,\n        opArray: [\n          {\n            opType: OpType.FOCUS_TOPIC,\n            topicKey,\n            focusMode: FocusMode.NORMAL\n          },\n          {\n            opType: OpType.EXPAND_TO,\n            topicKey\n          }\n        ],\n        callback: () => {\n          controller.run('moveTopicToCenter', { ...props, topicKey });\n        }\n      });\n    }\n  };\n}\n","import { PropKey } from '../utils';\n\nexport function GetValuePlugin() {\n  return {\n    getValue(props, next) {\n      const { propKey, controller } = props;\n      switch (propKey) {\n        case PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX:\n          return 3;\n        case PropKey.TOPIC_CONTEXT_MENU_ENABLED:\n          return controller.run('isOperationEnabled', props);\n        case PropKey.TOPIC_TITLE:\n          return controller.run('getTopicTitle', props);\n      }\n      return next();\n    }\n  };\n}\n","import { Controller, KeyType, Model } from '@blink-mind/core';\nimport { BaseWidget } from '@blink-mind/renderer-react';\nimport RichMarkDownEditor from 'awehook-rich-markdown-editor';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nconst log = debug('node:topic-content-editor');\n\nconst NodeContent = styled.div`\n  ${props =>\n    !props.readOnly &&\n    `\n    // padding: 75px\n    // min-width: 150px\n    // min-height: 150px\n  `};\n`;\ninterface Props {\n  controller: Controller;\n  model: Model;\n  readOnly: boolean;\n  topicKey: KeyType;\n  saveRef?: Function;\n}\n\ninterface State {\n  content: any;\n}\n\nexport class RichTextEditor extends BaseWidget<Props, State> {\n  constructor(props) {\n    super(props);\n    this.initState();\n  }\n\n  initState() {\n    this.state = {\n      content: this.getContent()\n    };\n  }\n\n  getContent() {\n    const { block } = this.getCustomizeProps();\n    return block.data;\n  }\n\n  onMouseDown = e => {\n    e.stopPropagation();\n  };\n\n  onMouseMove = e => {\n    e.stopPropagation();\n  };\n  onChange(value) {\n    this.setState({\n      content: value\n    });\n  }\n\n  getCustomizeProps() {\n    return null;\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this._handleClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this._handleClick);\n  }\n\n  root;\n\n  rootRef = saveRef => ref => {\n    saveRef(ref);\n    this.root = ref;\n  };\n\n  _handleClick = event => {\n    const wasOutside = !this.root.contains(event.target);\n    wasOutside && this.onClickOutSide(event);\n  };\n\n  onClickOutSide(e) {}\n\n  render() {\n    const { topicKey, saveRef } = this.props;\n    const { readOnly, getRefKeyFunc, placeholder } = this.getCustomizeProps();\n    log('readOnly:', readOnly);\n    const content = readOnly ? this.getContent() : this.state.content;\n    if (content == null) return null;\n    const key = getRefKeyFunc(topicKey);\n    const { onMouseDown, onMouseMove } = this;\n    const richEditorProps = {\n      editorValue: content,\n      readOnly,\n      onChange: this.onChange.bind(this),\n      placeholder\n    };\n\n    const nodeContentProps = {\n      key,\n      ref: this.rootRef(saveRef(key)),\n      readOnly,\n      onMouseDown,\n      onMouseMove\n    };\n    return (\n      <NodeContent {...nodeContentProps}>\n        <RichMarkDownEditor {...richEditorProps} />\n      </NodeContent>\n    );\n  }\n}\n","import MarkdownSerializer from 'slate-md-serializer';\nexport default new MarkdownSerializer();\n","import { BlockType } from '@blink-mind/core';\nimport * as React from 'react';\nimport { TopicDescEditor } from './components/topic-desc-editor';\nimport markdownSerializer from './markdown-serializer';\nexport default function RichTextEditorPlugin() {\n  return {\n    renderTopicDescEditor(props) {\n      return <TopicDescEditor {...props} />;\n    },\n\n    isBlockEmpty(props, next) {\n      const { block, controller } = props;\n      if (block.type === BlockType.CONTENT || block.type === BlockType.DESC) {\n        return (\n          block.data == null ||\n          controller.run('serializeBlockData', props) === ''\n        );\n      }\n      return next();\n    },\n\n    serializeBlockData(props, next) {\n      const { block } = props;\n      if (block.type === BlockType.DESC) {\n        return typeof block.data === 'string'\n          ? block.data\n          : markdownSerializer.serialize(block.data);\n      }\n      return next();\n    }\n  };\n}\n","import {\n  Block,\n  Config,\n  ExtData,\n  FocusMode,\n  Model,\n  Topic\n} from '@blink-mind/core';\nimport { IControllerRunContext } from '@blink-mind/core/src/interfaces';\nimport debug from 'debug';\nimport { isImmutable, List, Map } from 'immutable';\n\nconst log = debug('plugin:json-serializer');\n\nexport function JsonSerializerPlugin() {\n  return {\n    serializeModel(props: IControllerRunContext, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { model, controller } = props;\n      const obj = {\n        rootTopicKey: model.rootTopicKey,\n        editorRootTopicKey: model.editorRootTopicKey,\n        focusKey: model.focusKey,\n        extData: controller.run('serializeExtData', {\n          ...props,\n          extData: model.extData\n        }),\n        topics: model.topics\n          .valueSeq()\n          .toArray()\n          .map(topic => controller.run('serializeTopic', { ...props, topic })),\n        config: controller.run('serializeConfig', {\n          ...props,\n          config: model.config\n        }),\n        formatVersion: model.formatVersion\n      };\n      return obj;\n    },\n\n    deserializeModel(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { obj, controller } = props;\n      if (obj.formatVersion == null) {\n        obj.formatVersion = '0.0';\n      }\n      const {\n        rootTopicKey,\n        editorRootTopicKey,\n        focusKey,\n        topics,\n        config,\n        extData,\n        formatVersion\n      } = obj;\n      let res = new Model();\n      res = res.merge({\n        rootTopicKey,\n        editorRootTopicKey:\n          editorRootTopicKey == null ? rootTopicKey : editorRootTopicKey,\n        focusKey,\n        extData: controller.run('deserializeExtData', {\n          ...props,\n          extData,\n          formatVersion\n        }),\n        config: controller.run('deserializeConfig', {\n          ...props,\n          config,\n          formatVersion\n        }),\n        topics: controller.run('deserializeTopics', {\n          ...props,\n          topics,\n          formatVersion\n        }),\n        formatVersion: obj.formatVersion\n      });\n      if (res.focusKey == null) {\n        res = res.set('focusKey', res.rootTopicKey);\n      }\n      if (res.focusMode == null) {\n        res = res.set('focusMode', FocusMode.NORMAL);\n      }\n      log('deserializeModel', res);\n      return res;\n    },\n\n    serializeExtData(\n      props: IControllerRunContext & { extData: ExtData },\n      next\n    ) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { extData, controller } = props;\n      const res = {};\n      extData.forEach((v, k) => {\n        res[k] = controller.run('serializeExtDataItem', {\n          props,\n          extDataKey: k,\n          extDataItem: v\n        });\n      });\n      return res;\n    },\n\n    deserializeExtData(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { extData, controller } = props;\n      let res = Map();\n      for (const extDataKey in extData) {\n        res = res.set(\n          extDataKey,\n          controller.run('deserializeExtDataItem', {\n            ...props,\n            extDataKey,\n            extDataItem: extData[extDataKey]\n          })\n        );\n      }\n      return res;\n    },\n\n    serializeExtDataItem(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { extDataItem } = props;\n      if (isImmutable(extDataItem)) {\n        return extDataItem.toJS();\n      }\n      return extDataItem;\n    },\n\n    deserializeExtDataItem(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { extDataItem } = props;\n      return extDataItem;\n    },\n\n    serializeConfig(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { config } = props;\n      return config.toJS();\n    },\n\n    deserializeConfig(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { config } = props;\n      return new Config(config);\n    },\n\n    serializeTopic(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { topic, controller } = props;\n      return {\n        key: topic.key,\n        parentKey: topic.parentKey,\n        subKeys: topic.subKeys.toArray(),\n        collapse: topic.collapse,\n        style: topic.style,\n        blocks: topic.blocks.map(block =>\n          controller.run('serializeBlock', { ...props, block })\n        )\n      };\n    },\n\n    deserializeTopic(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { topic, controller } = props;\n      const { key, parentKey, subKeys, blocks, style, collapse } = topic;\n      let res = new Topic();\n      res = res.merge({\n        key,\n        parentKey,\n        subKeys: List(subKeys),\n        style,\n        collapse,\n        blocks: controller.run('deserializeBlocks', { ...props, blocks })\n      });\n      return res;\n    },\n\n    deserializeTopics(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { topics, controller } = props;\n      let res = Map();\n      res = res.withMutations(r => {\n        topics.forEach(topic =>\n          r.set(\n            topic.key,\n            controller.run('deserializeTopic', { ...props, topic })\n          )\n        );\n      });\n      return res;\n    },\n\n    serializeBlock(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { block, controller } = props;\n      const res = {\n        type: block.type,\n        data: controller.run('serializeBlockData', { ...props })\n      };\n      return res;\n    },\n\n    serializeBlockData(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { block } = props;\n      return block.data;\n    },\n\n    deserializeBlock(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { block, controller } = props;\n      const { type } = block;\n\n      return new Block({\n        type,\n        data: controller.run('deserializeBlockData', { ...props, block })\n      });\n    },\n\n    deserializeBlockData(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { block } = props;\n      return block.data;\n    },\n\n    deserializeBlocks(props, next) {\n      const nextRes = next();\n      if (nextRes != null) return nextRes;\n      const { blocks, controller } = props;\n      let res = List();\n      res = res.withMutations(res => {\n        blocks.forEach(block =>\n          res.push(controller.run('deserializeBlock', { ...props, block }))\n        );\n      });\n      return res;\n    }\n  };\n}\n","import { ThemeType } from '@blink-mind/core';\n\nexport const themeRandomColorSquare: ThemeType = {\n  name: 'default',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5',\n    fontSize: '16px'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      fontSize: '36px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      fontSize: '24px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  },\n\n  normalTopic: {\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme1: ThemeType = {\n  name: 'theme1',\n  randomColor: false,\n  background: 'rgb(250,245,205)',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 30,\n\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: 'rgb(221, 170, 68)',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#e8eaec',\n      borderWidth: '2px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      fontSize: '17px',\n      padding: '10px 15px 10px 15px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      border: '1px solid #e8eaec',\n      borderRadius: '20px',\n      color: 'rgb(187, 136, 34)',\n      fontSize: '13px',\n      padding: '4px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: 'rgb(187, 136, 34)'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme2: ThemeType = {\n  name: 'theme2',\n  randomColor: false,\n  background: '#f8f8f8',\n  highlightColor: '#50C9CE',\n  marginH: 45,\n  marginV: 10,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#50C18A',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#ffffff',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme3: ThemeType = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#A9DEF9',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5\n  },\n\n  rootTopic: {\n    contentStyle: {\n      background: '#FF99C8',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#FCF6BD',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#E4FDE1',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme4: ThemeType = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#CCFBFE',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5\n  },\n\n  rootTopic: {\n    contentStyle: {\n      background: '#CD8987',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#CDACA1',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n\n    subLinkStyle: {\n      lineType: 'line',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#CDCACC',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '3px 9px 4px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n\n    subLinkStyle: {\n      lineType: 'line',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n","import { iconClassName, TopicBlockIcon } from '@blink-mind/renderer-react';\nimport * as React from 'react';\n\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  FOCUS_MODE_EDITING_TOPOLOGY,\n  OP_TYPE_START_EDITING_TOPOLOGY\n} from './utils';\n\nexport function TopicBlockTopology(props) {\n  const { controller, model, topicKey } = props;\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('operation', {\n      ...props,\n      opType: OP_TYPE_START_EDITING_TOPOLOGY\n    });\n  };\n  const isEditing =\n    model.focusKey === topicKey &&\n    model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY;\n\n  const { block } = model.getTopic(topicKey).getBlock(BLOCK_TYPE_TOPOLOGY);\n\n  if (!isEditing && !block) return null;\n  const iconProps = {\n    className: iconClassName('topology'),\n    onClick,\n    tabIndex: -1\n  };\n\n  return <TopicBlockIcon {...iconProps} />;\n}\n","export const FOCUS_MODE_EDITING_TOPOLOGY = 'FOCUS_MODE_EDITING_TOPOLOGY';\nexport const OP_TYPE_START_EDITING_TOPOLOGY = 'OP_TYPE_START_EDITING_TOPOLOGY';\nexport const BLOCK_TYPE_TOPOLOGY = 'TOPOLOGY';\nexport const REF_KEY_TOPOLOGY_DIAGRAM = 'TOPOLOGY_DIAGRAM';\nexport const REF_KEY_TOPOLOGY_DIAGRAM_UTIL = 'TOPOLOGY_DIAGRAM_UTIL';\n","export const ToolsConfig = [\n  {\n    group: 'Basic',\n    children: [\n      {\n        name: 'rectangle',\n        icon: 'icon-rect',\n        data: {\n          text: 'Topology',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'rectangle',\n          icon: '\\ue64d',\n          iconFamily: 'topology',\n          iconColor: '#2f54eb'\n        }\n      },\n      {\n        name: 'rectangle',\n        icon: 'icon-rectangle',\n        data: {\n          text: 'rectangle',\n          rect: {\n            width: 200,\n            height: 50\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          borderRadius: 0.1,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'circle',\n        icon: 'icon-circle',\n        data: {\n          text: 'circle',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'circle',\n          textMaxLine: 1\n        }\n      },\n      {\n        name: 'triangle',\n        icon: 'icon-triangle',\n        data: {\n          text: 'triangle',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'triangle'\n        }\n      },\n      {\n        name: 'diamond',\n        icon: 'icon-diamond',\n        data: {\n          text: 'diamond',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'pentagon',\n        icon: 'icon-pentagon',\n        data: {\n          text: 'pentagon',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'pentagon'\n        }\n      },\n      {\n        name: 'hexagon',\n        icon: 'icon-hexagon',\n        data: {\n          text: 'hexagon',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'hexagon'\n        }\n      },\n      {\n        name: 'pentagram',\n        icon: 'icon-pentagram',\n        data: {\n          text: 'pentagram',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'pentagram'\n        }\n      },\n      {\n        name: 'left arrow',\n        icon: 'icon-arrow-left',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'leftArrow'\n        }\n      },\n      {\n        name: 'right arrow',\n        icon: 'icon-arrow-right',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'rightArrow'\n        }\n      },\n      {\n        name: 'bidirectional arrow',\n        icon: 'icon-twoway-arrow',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'twowayArrow'\n        }\n      },\n      {\n        name: 'line',\n        icon: 'icon-line',\n        data: {\n          text: 'line',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'line'\n        }\n      },\n      {\n        name: 'cloud',\n        icon: 'icon-cloud',\n        data: {\n          text: 'cloud',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'cloud'\n        }\n      },\n      {\n        name: 'message',\n        icon: 'icon-msg',\n        data: {\n          text: 'message',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'message'\n        }\n      },\n      {\n        name: 'file',\n        icon: 'icon-file',\n        data: {\n          text: 'file',\n          rect: {\n            width: 80,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'file'\n        }\n      },\n      {\n        name: 'text',\n        icon: 'icon-text',\n        data: {\n          text: 'text',\n          rect: {\n            width: 160,\n            height: 30\n          },\n          name: 'text'\n        }\n      },\n      {\n        name: 'image',\n        icon: 'icon-image',\n        data: {\n          text: '',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'image',\n          image: '/assets/img/logo.png'\n        }\n      },\n      {\n        name: 'cube',\n        icon: 'icon-cube',\n        data: {\n          rect: {\n            width: 50,\n            height: 70\n          },\n          is3D: true,\n          z: 10,\n          zRotate: 15,\n          fillStyle: '#ddd',\n          name: 'cube',\n          icon: '\\ue63c',\n          iconFamily: 'topology',\n          iconColor: '#777',\n          iconSize: 30\n        }\n      },\n      {\n        name: 'people',\n        icon: 'icon-people',\n        data: {\n          rect: {\n            width: 70,\n            height: 100\n          },\n          name: 'people'\n        }\n      },\n      {\n        name: 'multi media',\n        icon: 'icon-pc',\n        data: {\n          text: 'multi media',\n          rect: {\n            width: 200,\n            height: 200\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          // strokeStyle: 'transparent',\n          name: 'div'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Flow Graph',\n    children: [\n      {\n        name: 'start/end',\n        icon: 'icon-flow-start',\n        data: {\n          text: 'start',\n          rect: {\n            width: 120,\n            height: 40\n          },\n          borderRadius: 0.5,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'flow',\n        icon: 'icon-rectangle',\n        data: {\n          text: 'flow',\n          rect: {\n            width: 120,\n            height: 40\n          },\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'judgement',\n        icon: 'icon-diamond',\n        data: {\n          text: 'judgement',\n          rect: {\n            width: 120,\n            height: 60\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'data',\n        icon: 'icon-flow-data',\n        data: {\n          text: 'data',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowData'\n        }\n      },\n      {\n        name: 'prepare',\n        icon: 'icon-flow-ready',\n        data: {\n          text: 'prepare',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'hexagon'\n        }\n      },\n      {\n        name: 'sub flow',\n        icon: 'icon-flow-subprocess',\n        data: {\n          text: 'sub flow',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowSubprocess'\n        }\n      },\n      {\n        name: 'database',\n        icon: 'icon-db',\n        data: {\n          text: 'database',\n          rect: {\n            width: 80,\n            height: 120\n          },\n          name: 'flowDb'\n        }\n      },\n      {\n        name: 'document',\n        icon: 'icon-flow-document',\n        data: {\n          text: 'document',\n          rect: {\n            width: 120,\n            height: 100\n          },\n          name: 'flowDocument'\n        }\n      },\n      {\n        name: 'internal storage',\n        icon: 'icon-internal-storage',\n        data: {\n          text: 'internal storage',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowInternalStorage'\n        }\n      },\n      {\n        name: 'external storage',\n        icon: 'icon-extern-storage',\n        data: {\n          text: 'external storage',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowExternStorage'\n        }\n      },\n      {\n        name: 'queue',\n        icon: 'icon-flow-queue',\n        data: {\n          text: 'queue',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'flowQueue'\n        }\n      },\n      {\n        name: 'input manually',\n        icon: 'icon-flow-manually',\n        data: {\n          text: 'input manually',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowManually'\n        }\n      },\n      {\n        name: 'display',\n        icon: 'icon-flow-display',\n        data: {\n          text: 'display',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowDisplay'\n        }\n      },\n      {\n        name: 'parallel',\n        icon: 'icon-flow-parallel',\n        data: {\n          text: 'parallel',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowParallel'\n        }\n      },\n      {\n        name: 'comment',\n        icon: 'icon-flow-comment',\n        data: {\n          text: 'comment',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'flowComment'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Activity Diagram',\n    children: [\n      {\n        name: 'start',\n        icon: 'icon-inital',\n        data: {\n          text: '',\n          rect: {\n            width: 30,\n            height: 30\n          },\n          name: 'circle',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      },\n      {\n        name: 'end',\n        icon: 'icon-final',\n        data: {\n          text: '',\n          rect: {\n            width: 30,\n            height: 30\n          },\n          name: 'activityFinal'\n        }\n      },\n      {\n        name: 'action',\n        icon: 'icon-action',\n        data: {\n          text: 'action',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          borderRadius: 0.25,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'decision/merge',\n        icon: 'icon-diamond',\n        data: {\n          text: '决策',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'vertical swimming lane',\n        icon: 'icon-swimlane-v',\n        data: {\n          text: 'vertical swimming lane',\n          rect: {\n            width: 200,\n            height: 500\n          },\n          name: 'swimlaneV'\n        }\n      },\n      {\n        name: 'horizontal swimming lane',\n        icon: 'icon-swimlane-h',\n        data: {\n          text: 'horizontal swimming lane',\n          rect: {\n            width: 500,\n            height: 200\n          },\n          name: 'swimlaneH'\n        }\n      },\n      {\n        name: 'vertical fork/merge',\n        icon: 'icon-fork-v',\n        data: {\n          text: '',\n          rect: {\n            width: 10,\n            height: 150\n          },\n          name: 'forkV',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      },\n      {\n        name: 'horizontal fork/merge',\n        icon: 'icon-fork',\n        data: {\n          text: '',\n          rect: {\n            width: 150,\n            height: 10\n          },\n          name: 'forkH',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Sequence Diagram && Class Diagram',\n    children: [\n      {\n        name: 'lifeline',\n        icon: 'icon-lifeline',\n        data: {\n          text: 'lifeline',\n          rect: {\n            width: 150,\n            height: 400\n          },\n          name: 'lifeline'\n        }\n      },\n      {\n        name: 'activation',\n        icon: 'icon-focus',\n        data: {\n          text: '',\n          rect: {\n            width: 12,\n            height: 200\n          },\n          name: 'sequenceFocus'\n        }\n      },\n      {\n        name: 'simple class',\n        icon: 'icon-simple-class',\n        data: {\n          text: 'Topolgoy',\n          rect: {\n            width: 270,\n            height: 200\n          },\n          paddingTop: 40,\n          font: {\n            fontFamily: 'Arial',\n            color: '#222',\n            fontWeight: 'bold'\n          },\n          fillStyle: '#ffffba',\n          strokeStyle: '#7e1212',\n          name: 'simpleClass',\n          children: [\n            {\n              text: '- name: string\\n+ setName(name: string): void',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '100%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            }\n          ]\n        }\n      },\n      {\n        name: 'class',\n        icon: 'icon-class',\n        data: {\n          text: 'Topolgoy',\n          rect: {\n            width: 270,\n            height: 200\n          },\n          paddingTop: 40,\n          font: {\n            fontFamily: 'Arial',\n            color: '#222',\n            fontWeight: 'bold'\n          },\n          fillStyle: '#ffffba',\n          strokeStyle: '#7e1212',\n          name: 'interfaceClass',\n          children: [\n            {\n              text: '- name: string',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '50%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            },\n            {\n              text: '+ setName(name: string): void',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: '50%',\n                width: '100%',\n                height: '50%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            }\n          ]\n        }\n      }\n    ]\n  }\n];\n","import { BaseWidget } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { Topology } from 'topology-core';\nimport { registerNode } from 'topology-core/middles';\nimport { Options } from 'topology-core/options';\n\nimport {\n  flowComment,\n  flowCommentAnchors,\n  flowData,\n  flowDataAnchors,\n  flowDataIconRect,\n  flowDataTextRect,\n  flowDb,\n  flowDbIconRect,\n  flowDbTextRect,\n  flowDisplay,\n  flowDisplayAnchors,\n  flowDisplayIconRect,\n  flowDisplayTextRect,\n  flowDocument,\n  flowDocumentAnchors,\n  flowDocumentIconRect,\n  flowDocumentTextRect,\n  flowExternStorage,\n  flowExternStorageAnchors,\n  flowExternStorageIconRect,\n  flowExternStorageTextRect,\n  flowInternalStorage,\n  flowInternalStorageIconRect,\n  flowInternalStorageTextRect,\n  flowManually,\n  flowManuallyAnchors,\n  flowManuallyIconRect,\n  flowManuallyTextRect,\n  flowParallel,\n  flowParallelAnchors,\n  flowQueue,\n  flowQueueIconRect,\n  flowQueueTextRect,\n  flowSubprocess,\n  flowSubprocessIconRect,\n  flowSubprocessTextRect\n} from 'topology-flow-diagram';\nimport { ToolsConfig } from './tools-config';\n\nimport '@blink-mind/icons/iconfont/topology';\nimport styled from 'styled-components';\nimport {\n  activityFinal,\n  activityFinalIconRect,\n  activityFinalTextRect,\n  fork,\n  forkHAnchors,\n  forkIconRect,\n  forkTextRect,\n  forkVAnchors,\n  swimlaneH,\n  swimlaneHIconRect,\n  swimlaneHTextRect,\n  swimlaneV,\n  swimlaneVIconRect,\n  swimlaneVTextRect\n} from 'topology-activity-diagram';\nimport {\n  interfaceClass,\n  interfaceClassIconRect,\n  interfaceClassTextRect,\n  simpleClass,\n  simpleClassIconRect,\n  simpleClassTextRect\n} from 'topology-class-diagram';\nimport {\n  lifeline,\n  lifelineAnchors,\n  lifelineIconRect,\n  lifelineTextRect,\n  sequenceFocus,\n  sequenceFocusAnchors,\n  sequenceFocusIconRect,\n  sequenceFocusTextRect\n} from 'topology-sequence-diagram';\nimport { TopologyDiagramUtils } from './topology-diagram-utils';\nimport { BLOCK_TYPE_TOPOLOGY, REF_KEY_TOPOLOGY_DIAGRAM_UTIL } from './utils';\n\nconst Root = styled.div`\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Canvas = styled.div`\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n`;\n\nconst Tools = styled.div`\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n`;\n\nconst ToolTitle = styled.div`\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n`;\n\nconst ToolbarButtons = styled.div`\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n`;\n\nexport class TopologyDiagram extends BaseWidget {\n  state = {\n    id: '',\n    data: null,\n    toolsConfig: ToolsConfig,\n    iconfont: { fontSize: '0.24rem' }\n  };\n  topology: Topology;\n\n  canvasOptions: Options = {};\n\n  canvasRegister() {\n    registerNode(\n      'flowData',\n      flowData,\n      flowDataAnchors,\n      flowDataIconRect,\n      flowDataTextRect\n    );\n    registerNode(\n      'flowSubprocess',\n      flowSubprocess,\n      null,\n      flowSubprocessIconRect,\n      flowSubprocessTextRect\n    );\n    registerNode('flowDb', flowDb, null, flowDbIconRect, flowDbTextRect);\n    registerNode(\n      'flowDocument',\n      flowDocument,\n      flowDocumentAnchors,\n      flowDocumentIconRect,\n      flowDocumentTextRect\n    );\n    registerNode(\n      'flowInternalStorage',\n      flowInternalStorage,\n      null,\n      flowInternalStorageIconRect,\n      flowInternalStorageTextRect\n    );\n    registerNode(\n      'flowExternStorage',\n      flowExternStorage,\n      flowExternStorageAnchors,\n      flowExternStorageIconRect,\n      flowExternStorageTextRect\n    );\n    registerNode(\n      'flowQueue',\n      flowQueue,\n      null,\n      flowQueueIconRect,\n      flowQueueTextRect\n    );\n    registerNode(\n      'flowManually',\n      flowManually,\n      flowManuallyAnchors,\n      flowManuallyIconRect,\n      flowManuallyTextRect\n    );\n    registerNode(\n      'flowDisplay',\n      flowDisplay,\n      flowDisplayAnchors,\n      flowDisplayIconRect,\n      flowDisplayTextRect\n    );\n    registerNode('flowParallel', flowParallel, flowParallelAnchors, null, null);\n    registerNode('flowComment', flowComment, flowCommentAnchors, null, null);\n\n    // activity\n    registerNode(\n      'activityFinal',\n      activityFinal,\n      null,\n      activityFinalIconRect,\n      activityFinalTextRect\n    );\n    registerNode(\n      'swimlaneV',\n      swimlaneV,\n      null,\n      swimlaneVIconRect,\n      swimlaneVTextRect\n    );\n    registerNode(\n      'swimlaneH',\n      swimlaneH,\n      null,\n      swimlaneHIconRect,\n      swimlaneHTextRect\n    );\n    registerNode('forkH', fork, forkHAnchors, forkIconRect, forkTextRect);\n    registerNode('forkV', fork, forkVAnchors, forkIconRect, forkTextRect);\n\n    // class\n    registerNode(\n      'simpleClass',\n      simpleClass,\n      null,\n      simpleClassIconRect,\n      simpleClassTextRect\n    );\n    registerNode(\n      'interfaceClass',\n      interfaceClass,\n      null,\n      interfaceClassIconRect,\n      interfaceClassTextRect\n    );\n\n    // sequence\n    registerNode(\n      'lifeline',\n      lifeline,\n      lifelineAnchors,\n      lifelineIconRect,\n      lifelineTextRect\n    );\n    registerNode(\n      'sequenceFocus',\n      sequenceFocus,\n      sequenceFocusAnchors,\n      sequenceFocusIconRect,\n      sequenceFocusTextRect\n    );\n  }\n\n  handleContextMenu = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  onMessage = (event, data) => {\n    const { getRef } = this.props;\n    const diagramUtil: TopologyDiagramUtils = getRef(\n      REF_KEY_TOPOLOGY_DIAGRAM_UTIL\n    );\n    switch (event) {\n      case 'resize':\n      case 'scale':\n      case 'locked':\n        if (this.topology && diagramUtil) {\n          diagramUtil.setCanvasData(this.topology.data);\n        }\n        break;\n    }\n  };\n\n  componentDidMount(): void {\n    this.canvasRegister();\n    this.canvasOptions.on = this.onMessage;\n    this.topology = new Topology('topology-canvas', this.canvasOptions);\n    this.openData();\n  }\n\n  componentDidUpdate(): void {\n    this.openData();\n  }\n\n  openData() {\n    const { model, topicKey } = this.props;\n    const topic = model.getTopic(topicKey);\n    const { block } = topic.getBlock(BLOCK_TYPE_TOPOLOGY);\n    if (block && block.data && block.data !== '') {\n      this.setState({\n        data: block.data\n      });\n      this.topology.open(block.data);\n    }\n  }\n\n  onDrag(event: React.DragEvent<HTMLAnchorElement>, node: any) {\n    event.dataTransfer.setData('Text', JSON.stringify(node.data));\n  }\n\n  renderTools() {\n    return (\n      <Tools>\n        {this.state.toolsConfig.map((item, index) => {\n          return (\n            <div key={index}>\n              <ToolTitle>{item.group}</ToolTitle>\n              <ToolbarButtons>\n                {//TODO\n                //@ts-ignore\n                item.children.map((btn, i) => {\n                  return (\n                    <a\n                      key={i}\n                      title={btn.name}\n                      draggable={true}\n                      onDragStart={ev => {\n                        this.onDrag(ev, btn);\n                      }}\n                    >\n                      <i\n                        className={'iconfont ' + btn.icon}\n                        style={this.state.iconfont}\n                      />\n                    </a>\n                  );\n                })}\n              </ToolbarButtons>\n            </div>\n          );\n        })}\n      </Tools>\n    );\n  }\n\n  render() {\n    return (\n      <Root>\n        {this.renderTools()}\n        <Canvas id=\"topology-canvas\" onContextMenu={this.handleContextMenu} />\n      </Root>\n    );\n  }\n}\n","import { OpType } from '@blink-mind/core';\nimport { BaseProps, Btn, Icon, IconName } from '@blink-mind/renderer-react';\nimport { Alert, Classes, Position, Tooltip } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { Topology } from 'topology-core';\nimport { BLOCK_TYPE_TOPOLOGY, REF_KEY_TOPOLOGY_DIAGRAM } from './utils';\n\nconst Root = styled.div`\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n`;\n\nconst Item_ = styled(Btn)`\n  margin: 10px;\n`;\n\nconst Item = props => {\n  return (\n    <Tooltip\n      content={props.tooltip}\n      position={Position.TOP}\n      className={Classes.ICON}\n    >\n      <Item_ onClick={props.onClick}>{props.children}</Item_>\n    </Tooltip>\n  );\n};\n\nconst ZoomFactorSpan = styled.span`\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n`;\ninterface State {\n  deleteConfirm: boolean;\n  canvasData: any;\n}\n\nexport class TopologyDiagramUtils extends React.Component<BaseProps, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteConfirm: false,\n      canvasData: null\n    };\n  }\n\n  setCanvasData = canvasData => {\n    this.setState({ canvasData });\n  };\n\n  getTopology(): Topology {\n    const { getRef } = this.props;\n    return getRef(REF_KEY_TOPOLOGY_DIAGRAM).topology;\n  }\n\n  onClickResetZoom = e => {\n    const topology = this.getTopology();\n    topology.scaleTo(1);\n  };\n\n  render() {\n    const props = this.props;\n    const { controller } = props;\n\n    const onClickDelete = e => {\n      this.setState({ deleteConfirm: true });\n    };\n    const deleteAlertProps = {\n      isOpen: this.state.deleteConfirm,\n      cancelButtonText: 'cancel',\n      onConfirm: e => {\n        controller.run('operation', {\n          ...props,\n          opType: OpType.DELETE_TOPIC_BLOCK,\n          blockType: BLOCK_TYPE_TOPOLOGY\n        });\n      },\n      onCancel: e => {\n        this.setState({ deleteConfirm: false });\n      },\n      onClose: e => {\n        this.setState({ deleteConfirm: false });\n      }\n    };\n    const { canvasData } = this.state;\n    const scale = canvasData ? canvasData.scale : 1;\n    return (\n      <Root>\n        <Item onClick={this.onClickResetZoom} tooltip=\"reset zoom\">\n          <ZoomFactorSpan>{`zoom:${Math.floor(scale * 100)}%`}</ZoomFactorSpan>\n        </Item>\n        <Item onClick={onClickDelete} tooltip=\"delete this diagram\">\n          {Icon(IconName.TRASH)}\n        </Item>\n        <Alert {...deleteAlertProps}>\n          <p>Are you confirm to delete this topology diagram?</p>\n        </Alert>\n      </Root>\n    );\n  }\n}\n","import { cancelEvent, Icon } from '@blink-mind/renderer-react';\nimport { Drawer } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { TopologyDiagram } from './topology-diagram';\n\nimport { FocusMode, OpType } from '@blink-mind/core';\nimport styled from 'styled-components';\nimport { TopologyDiagramUtils } from './topology-diagram-utils';\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  REF_KEY_TOPOLOGY_DIAGRAM,\n  REF_KEY_TOPOLOGY_DIAGRAM_UTIL\n} from './utils';\n\nconst DiagramWrapper = styled.div`\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n`;\n\nconst Title = styled.span`\n  padding: 0px 20px;\n`;\n\nexport function TopologyDrawer(props) {\n  const { controller, topicKey, getRef, saveRef } = props;\n  const onDiagramClose = e => {\n    e.stopPropagation();\n    // const key = `topic-topology-data-${topicKey}`;\n    // const topologyData = controller.run('deleteTempValue', { key });\n\n    const diagram: TopologyDiagram = getRef(REF_KEY_TOPOLOGY_DIAGRAM);\n    const topologyData = diagram.topology.data;\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_TOPIC_BLOCK,\n      topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: topologyData,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n  const diagramProps = {\n    ...props,\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM)\n  };\n  const utilProps = {\n    ...props,\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL)\n  };\n  return (\n    <Drawer\n      title={<Title>Topology Diagram Editor</Title>}\n      icon={Icon('topology')}\n      isOpen\n      hasBackdrop\n      backdropClassName=\"backdrop\"\n      backdropProps={{ onMouseDown: cancelEvent }}\n      canOutsideClickClose={false}\n      isCloseButtonShown={true}\n      onClose={onDiagramClose}\n      size=\"100%\"\n    >\n      <DiagramWrapper onClick={cancelEvent} onDoubleClick={cancelEvent}>\n        <TopologyDiagram {...diagramProps} />\n        <TopologyDiagramUtils {...utilProps} />\n      </DiagramWrapper>\n    </Drawer>\n  );\n}\n","import { BaseModifierArg, ModelModifier } from '@blink-mind/core';\nimport { Icon } from '@blink-mind/renderer-react';\nimport { MenuDivider, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { TopicBlockTopology } from './topic-block-topology';\nimport { TopologyDrawer } from './topology-drawer';\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  FOCUS_MODE_EDITING_TOPOLOGY,\n  OP_TYPE_START_EDITING_TOPOLOGY\n} from './utils';\n\nfunction startEditingTopology({ model, topicKey }: BaseModifierArg) {\n  const topic = model.getTopic(topicKey);\n  const { block } = topic.getBlock(BLOCK_TYPE_TOPOLOGY);\n  if (block == null || block.data == null) {\n    model = ModelModifier.setBlockData({\n      model,\n      topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: ''\n    });\n  }\n  model = ModelModifier.focusTopic({\n    model,\n    topicKey,\n    focusMode: FOCUS_MODE_EDITING_TOPOLOGY\n  });\n  return model;\n}\n\nexport default function TopologyDiagramPlugin() {\n  return {\n    renderTopicBlock(props, next) {\n      const { controller, block } = props;\n      if (block.type === BLOCK_TYPE_TOPOLOGY) {\n        return controller.run('renderTopicBlockTopology', props);\n      }\n      return next();\n    },\n\n    renderTopicBlockTopology(props) {\n      return <TopicBlockTopology {...props} />;\n    },\n\n    renderDrawer(props, next) {\n      const { model } = props;\n      if (model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY) {\n        const topoProps = {\n          ...props,\n          topicKey: model.focusKey,\n          key: 'topology-drawer'\n        };\n        return <TopologyDrawer {...topoProps} />;\n      }\n      return next();\n    },\n\n    customizeTopicContextMenu(props, next) {\n      const { controller } = props;\n      function editTopology(e) {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_START_EDITING_TOPOLOGY\n        });\n      }\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            icon={Icon('topology')}\n            text=\"Edit Topology Diagram\"\n            onClick={editTopology}\n          />\n        </>\n      );\n    },\n\n    getOpMap(props, next) {\n      const opMap = next();\n      opMap.set(OP_TYPE_START_EDITING_TOPOLOGY, startEditingTopology);\n      return opMap;\n    }\n  };\n}\n","export const FOCUS_MODE_SET_REFERENCE_TOPICS =\n  'FOCUS_MODE_SET_REFERENCE_TOPICS';\n// 添加引用的Topic\nexport const OP_TYPE_START_SET_REFERENCE_TOPICS =\n  'OP_TYPE_START_SET_REFERENCE_TOPICS';\nexport const OP_TYPE_SET_REFERENCE_TOPICS = 'OP_TYPE_SET_REFERENCE_TOPICS';\n\nexport const EXT_DATA_KEY_TOPIC_REFERENCE = 'TOPIC_REFERENCE';\n\nexport const EXT_KEY_TOPIC_REFERENCE = 'EXT_KEY_TOPIC_REFERENCE';\n","import { FocusMode, OpType } from '@blink-mind/core';\nimport { Flex, ZIndex } from '@blink-mind/renderer-react';\nimport { Button } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { OP_TYPE_SET_REFERENCE_TOPICS } from './utils';\n\nconst Root = styled(ZIndex)`\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n`;\n\nconst Title = styled.div`\n  margin-bottom: 10px;\n`;\n\nexport function AddReferenceTopicPanel(props) {\n  const { zIndex, controller, topicKey } = props;\n  const onClickCancel = e => {\n    controller.run('clearSelectedReferenceKeys', props);\n    controller.run('enableOperation', props);\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n  const onClickConfirm = e => {\n    const referenceKeys = controller.run('getSelectedReferenceKeys', props);\n    controller.run('enableOperation', props);\n    controller.run('operation', {\n      ...props,\n      opArray: [\n        {\n          opType: OP_TYPE_SET_REFERENCE_TOPICS,\n          topicKey,\n          referenceKeys\n        },\n        {\n          opType: OpType.FOCUS_TOPIC,\n          topicKey,\n          focusMode: FocusMode.NORMAL\n        }\n      ]\n    });\n    controller.run('clearSelectedReferenceKeys', props);\n  };\n  return (\n    <Root zIndex={zIndex}>\n      <Title>\n        Please select the topics you want to reference. After selection, click\n        the confirm button.\n      </Title>\n      <Flex justifyContent={'space-around'}>\n        <Button onClick={onClickConfirm}>Confirm</Button>\n        <Button onClick={onClickCancel}>Cancel</Button>\n      </Flex>\n    </Root>\n  );\n}\n","import { KeyType } from '@blink-mind/core';\nimport { List, Map, Record } from 'immutable';\n\ntype ReferenceRecordType = {\n  keyList: List<KeyType>;\n  dataMap: Map<KeyType, any>;\n};\n\nconst defaultReferenceRecord: ReferenceRecordType = {\n  keyList: List(),\n  dataMap: Map()\n};\n\nexport class ReferenceRecord extends Record(defaultReferenceRecord) {\n  get keyList(): List<KeyType> {\n    return this.get('keyList');\n  }\n\n  get dataMap(): Map<KeyType, any> {\n    return this.get('dataMap');\n  }\n}\n\ntype ExtDataReferenceRecordType = {\n  reference: Map<KeyType, ReferenceRecord>;\n};\n\nconst defaultExtDataReferenceRecord: ExtDataReferenceRecordType = {\n  reference: Map()\n};\n\nexport class ExtDataReference extends Record(defaultExtDataReferenceRecord) {\n  get reference(): Map<KeyType, ReferenceRecord> {\n    return this.get('reference');\n  }\n\n  getReferenceKeys(topicKey: KeyType): KeyType[] {\n    if (this.reference.has(topicKey)) {\n      return this.reference.get(topicKey).keyList.toArray();\n    }\n    return [];\n  }\n\n  getReferencedKeys(topicKey: KeyType): KeyType[] {\n    const res = [];\n    this.reference.forEach((v, k) => {\n      if (v.keyList.includes(topicKey)) {\n        res.push(k);\n      }\n    });\n    return res;\n  }\n}\n","import { BaseModifierArg, KeyType } from '@blink-mind/core';\nimport { List } from 'immutable';\nimport { ExtDataReference, ReferenceRecord } from './ext-data-reference';\nimport { EXT_DATA_KEY_TOPIC_REFERENCE } from './utils';\n\n// TODO 能否优化这个函数的写法\nexport function setReferenceTopicKeys({\n  model,\n  topicKey,\n  referenceKeys\n}: BaseModifierArg & { referenceKeys: KeyType[] }) {\n  let extData: ExtDataReference = model.getExtDataItem(\n    EXT_DATA_KEY_TOPIC_REFERENCE,\n    ExtDataReference\n  );\n\n  let referenceRecord =\n    extData.reference.get(topicKey) || new ReferenceRecord();\n\n  referenceRecord = referenceRecord.set('keyList', List(referenceKeys));\n  extData = extData.setIn(['reference', topicKey], referenceRecord);\n  model = model.setIn(['extData', EXT_DATA_KEY_TOPIC_REFERENCE], extData);\n\n  return model;\n}\n","import { KeyType } from '@blink-mind/core';\nimport { BaseProps, PropKey } from '@blink-mind/renderer-react';\nimport { Alert, Button } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport styled from 'styled-components';\n\nconst Root = styled.div`\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Content = styled.div`\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n`;\n\nconst ButtonPlace = styled.div`\n  width: 80px;\n`;\n\nexport type ReferenceTopicThumbnailProps = BaseProps & {\n  refKey: KeyType;\n  refType: 'reference' | 'referenced' | undefined | null;\n  removeHandler?: (event: React.MouseEvent<HTMLElement>) => void;\n};\nexport function ReferenceTopicThumbnail(props: ReferenceTopicThumbnailProps) {\n  const { controller, refKey, refType, removeHandler } = props;\n  const [deleteConfirm, setDeleteConfirm] = useState(false);\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('focusTopicAndMoveToCenter', { ...props, topicKey: refKey });\n  };\n\n  const onClickRemove = e => {\n    setDeleteConfirm(true);\n  };\n\n  const content = controller.getValue(PropKey.TOPIC_TITLE, {\n    ...props,\n    topicKey: refKey,\n    maxLength: 100\n  });\n  const deleteAlertProps = {\n    isOpen: deleteConfirm,\n    cancelButtonText: 'cancel',\n    onConfirm: e => {\n      removeHandler(e);\n    },\n    onCancel: e => {\n      setDeleteConfirm(false);\n    },\n    onClose: e => {\n      setDeleteConfirm(false);\n    }\n  };\n  return (\n    <Root>\n      <Content onClick={onClick}>{content}</Content>\n      <ButtonPlace>\n        {refType === 'reference' && (\n          <>\n            <Button onClick={onClickRemove}>Remove</Button>\n            <Alert {...deleteAlertProps}>\n              <p>Are you confirm to remove this reference?</p>\n            </Alert>\n          </>\n        )}\n      </ButtonPlace>\n    </Root>\n  );\n}\n","import { FocusMode } from '@blink-mind/core';\nimport { BaseProps, cancelEvent } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { ExtDataReference } from './ext-data-reference';\nimport { ReferenceTopicThumbnail } from './reference-topic-thumbnail';\nimport {\n  EXT_DATA_KEY_TOPIC_REFERENCE,\n  OP_TYPE_SET_REFERENCE_TOPICS\n} from './utils';\nconst Root = styled.div``;\n\nconst Group = styled.div`\n  padding: 10px;\n`;\n\nconst GroupList = styled.div`\n  max-height: 200px;\n  overflow: auto;\n`;\n\nconst GroupTitle = styled.div`\n  font-size: 20px;\n  color: #106ba3;\n`;\n\nconst GotoBtn = styled.div`\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n`;\n\nexport function ReferenceTopicList(props: BaseProps) {\n  const { topicKey, controller, model } = props;\n  const extData: ExtDataReference = model.extData.get(\n    EXT_DATA_KEY_TOPIC_REFERENCE\n  );\n\n  const removeReference = refKey => e => {\n    e.stopPropagation();\n    const keyList = extData.reference.get(topicKey).keyList;\n    controller.run('operation', {\n      ...props,\n      opArray: [\n        {\n          opType: OP_TYPE_SET_REFERENCE_TOPICS,\n          topicKey: topicKey,\n          focusMode: FocusMode.NORMAL,\n          referenceKeys: keyList.delete(keyList.indexOf(refKey)).toArray()\n        }\n      ]\n    });\n  };\n\n  const referenceKeys = extData.getReferenceKeys(topicKey);\n\n  const referenceGroup =\n    referenceKeys.length === 0 ? null : (\n      <Group>\n        <GroupTitle>Reference Topics:</GroupTitle>\n        <GroupList>\n          {referenceKeys.map(key => {\n            const thumbProps = {\n              ...props,\n              key,\n              refKey: key,\n              refType: 'reference',\n              removeHandler: removeReference(key)\n            };\n            //@ts-ignore\n            return <ReferenceTopicThumbnail {...thumbProps} />;\n          })}\n        </GroupList>\n      </Group>\n    );\n\n  const referencedKeys = extData.getReferencedKeys(topicKey);\n\n  const referencedGroup =\n    referencedKeys.length === 0 ? null : (\n      <Group>\n        <GroupTitle>Referenced Topics:</GroupTitle>\n        <GroupList>\n          {referencedKeys.map(key => {\n            const thumbProps = {\n              ...props,\n              key,\n              refKey: key,\n              refType: 'referenced'\n            };\n            //@ts-ignore\n            return <ReferenceTopicThumbnail {...thumbProps} />;\n          })}\n        </GroupList>\n      </Group>\n    );\n\n  const onClickGotoOriginTopic = e => {\n    e.stopPropagation();\n    controller.run('focusTopicAndMoveToCenter', props);\n  };\n\n  const currentTopic = model.focusKey !== topicKey && (\n    <Group>\n      <GotoBtn onClick={onClickGotoOriginTopic}>Goto Origin Topic</GotoBtn>\n    </Group>\n  );\n\n  return (\n    <Root onMouseDown={cancelEvent}>\n      {referenceGroup}\n      {referencedGroup}\n      {currentTopic}\n    </Root>\n  );\n}\n","import {\n  BaseProps,\n  iconClassName,\n  TopicBlockIcon\n} from '@blink-mind/renderer-react';\nimport { Popover, PopoverInteractionKind } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { ExtDataReference } from './ext-data-reference';\nimport { ReferenceTopicList } from './reference-topic-list';\nimport { EXT_DATA_KEY_TOPIC_REFERENCE } from './utils';\n\nexport function TopicExtReference(props: BaseProps) {\n  const { model, topicKey } = props;\n  const extData: ExtDataReference =\n    model.extData.get(EXT_DATA_KEY_TOPIC_REFERENCE) || new ExtDataReference();\n  const refRecord = extData.reference.get(topicKey);\n  const referencedKeys = [];\n  extData.reference.forEach((v, k) => {\n    if (v.keyList.includes(topicKey)) referencedKeys.push(k);\n  });\n  if (\n    (refRecord == null || refRecord.keyList.size === 0) &&\n    referencedKeys.length === 0\n  )\n    return null;\n\n  const iconProps = {\n    className: iconClassName('reference'),\n    tabIndex: -1\n  };\n  const icon = <TopicBlockIcon {...iconProps} />;\n  const tooltipContent = <ReferenceTopicList {...props} />;\n  const tooltipProps = {\n    autoFocus: false,\n    content: tooltipContent,\n    target: icon,\n    interactionKind: PopoverInteractionKind.CLICK,\n    hoverOpenDelay: 500\n  };\n  return <Popover {...tooltipProps}></Popover>;\n}\n","import { StyledCheckbox } from '@blink-mind/renderer-react';\nimport * as React from 'react';\n// useState 在vscode 运行报错 https://reactjs.org/docs/error-decoder.html/?invariant=321，\n// 问题原因，在yarn link package的时候，webpack 会打包进去多个 react-dom.js\nimport { useState } from 'react';\nexport function TopicReferenceCheckbox(props) {\n  const { topicKey, selectedTopicKeys } = props;\n  const a = selectedTopicKeys.has(topicKey);\n  const [checked, setChecked] = useState(a);\n  const checkboxProps = {\n    checked,\n    onChange: () => {\n      if (selectedTopicKeys.has(topicKey)) {\n        selectedTopicKeys.delete(topicKey);\n      } else {\n        selectedTopicKeys.add(topicKey);\n      }\n      setChecked(!checked);\n    }\n  };\n  return <StyledCheckbox {...checkboxProps} />;\n}\n","import { FocusMode, OpType } from '@blink-mind/core';\nimport { BaseProps } from '@blink-mind/renderer-react';\nimport {\n  IInputGroupProps,\n  Popover,\n  PopoverInteractionKind\n} from '@blueprintjs/core';\nimport { ItemListPredicate, ItemRenderer, Omnibar } from '@blueprintjs/select';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport './search-panel.css';\n\nconst NavOmniBar = Omnibar.ofType<INavigationSection>();\n\nconst StyledNavOmniBar = styled(NavOmniBar)`\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n`;\n\nconst TopicTitle = styled.div`\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n`;\n\nconst StyledPopover = styled(Popover)`\n  display: block;\n`;\n\nconst Tip = styled.div`\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n`;\n\nconst TipContent = styled.div`\n  white-space: break-spaces;\n`;\n\nexport interface INavigationSection {\n  // path: string[];\n  key: KeyType;\n  title: string;\n}\n\nconst INPUT_PROPS: IInputGroupProps = {\n  placeholder: 'Search'\n};\nexport type SearchPanelProps = BaseProps & {\n  setSearchWord: (s: string) => void;\n};\nexport function SearchPanel(props: SearchPanelProps) {\n  const { model, setSearchWord, controller } = props;\n  const onClose = () => {\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n\n  const getAllSections = () => {\n    const res = [];\n    model.topics.forEach((topic, topicKey) => {\n      res.push({\n        key: topicKey,\n        title: controller.run('getTopicTitle', {\n          ...props,\n          topicKey\n        })\n      });\n    });\n    return res;\n  };\n\n  const navigateToTopic = topicKey => e => {\n    controller.run('focusTopicAndMoveToCenter', { ...props, topicKey });\n  };\n\n  const renderItem: ItemRenderer<INavigationSection> = (section, props) => {\n    // const pathElements = section.path.reduce<React.ReactChild[]>(\n    //   (elems, el) => {\n    //     elems.push(el, <Icon key={el} icon=\"caret-right\" />);\n    //     return elems;\n    //   },\n    //   []\n    // );\n    const { key, title: sectionTitle } = section;\n    const maxLength = 100;\n    const needTip = sectionTitle.length > maxLength;\n    const title = needTip\n      ? sectionTitle.substr(0, maxLength) + '...'\n      : sectionTitle;\n    const titleProps = {\n      key,\n      onClick: navigateToTopic(key)\n    };\n    const titleEl = <TopicTitle {...titleProps}>{title}</TopicTitle>;\n    const tip = (\n      <Tip>\n        <TipContent>{sectionTitle}</TipContent>\n      </Tip>\n    );\n    const popoverProps = {\n      key,\n      target: titleEl,\n      content: tip,\n      fill: true,\n      interactionKind: PopoverInteractionKind.HOVER_TARGET_ONLY,\n      hoverOpenDelay: 1000\n    };\n    return needTip ? <StyledPopover {...popoverProps} /> : titleEl;\n  };\n\n  const filterMatches: ItemListPredicate<INavigationSection> = (\n    query,\n    items\n  ) => {\n    return items.filter(item =>\n      item.title.toLowerCase().includes(query.toLowerCase())\n    );\n  };\n\n  const sections = getAllSections();\n\n  return (\n    <StyledNavOmniBar\n      inputProps={INPUT_PROPS}\n      itemListPredicate={filterMatches}\n      isOpen={true}\n      items={sections}\n      itemRenderer={renderItem}\n      // onItemSelect={handleItemSelect}\n      onClose={onClose}\n      resetOnSelect={true}\n    />\n  );\n}\n","import * as React from 'react';\r\nimport {\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  ListItemIcon,\r\n  Avatar,\r\n  Menu,\r\n  MenuItem,\r\n  Divider,\r\n  Tooltip,\r\n  useMediaQuery\r\n} from '@material-ui/core';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\r\nimport StarOutlineIcon from '@material-ui/icons/StarOutline';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FolderOutlinedIcon from '@material-ui/icons/FolderOutlined';\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport PaletteOutlinedIcon from '@material-ui/icons/PaletteOutlined';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport UndoIcon from '@material-ui/icons/Undo';\r\nimport RedoIcon from '@material-ui/icons/Redo';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport FormatAlignJustifyIcon from '@material-ui/icons/FormatAlignJustify';\r\nimport FormatAlignLeftIcon from '@material-ui/icons/FormatAlignLeft';\r\nimport FormatAlignRightIcon from '@material-ui/icons/FormatAlignRight';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport defaultThemeImg from \"../../../images/default.jpg\";\r\nimport theme1Img from \"../../../images/theme1.jpg\";\r\nimport theme2Img from \"../../../images/theme2.jpg\";\r\nimport theme3Img from \"../../../images/theme3.jpg\";\r\nimport theme4Img from \"../../../images/theme4.jpg\";\r\nimport { browserOpenFile } from \"@blink-mind/renderer-react\";\r\nimport { downloadFile } from \"../../../utils\";\r\nimport { OpType } from \"@blink-mind/core\";\r\nimport { FOCUS_MODE_SEARCH } from \"@blink-mind/plugins\";\r\nimport { DiagramLayoutType } from \"@blink-mind/core\";\r\nimport { Navigate, useNavigate } from 'react-router-dom';\r\n\r\nconst styles = {\r\n  root: {\r\n    padding: '7px'\r\n  }\r\n};\r\n\r\nfunction IconBtnRaw(props) {\r\n  const { classes, color, title = '', ...other } = props;\r\n  return (\r\n    <Tooltip title={title}>\r\n      <IconButton className={classes.root} {...other} />\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nIconBtnRaw.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // color: PropTypes.oneOf(['blue', 'pink']).isRequired,\r\n};\r\n\r\nconst IconBtn = withStyles(styles)(IconBtnRaw);\r\n\r\nexport default function TopBar(props) {\r\n  const navigate = useNavigate();\r\n  const matches = useMediaQuery('(min-width:900px)');\r\n  const [match, setMatch] = React.useState(matches);\r\n  React.useEffect(() => {\r\n    setMatch(matches);\r\n  }, [matches]);\r\n\r\n  const { diagram, onClickUndo, onClickRedo } = props;\r\n  const diagramProps = diagram.getDiagramProps();\r\n  const { controller, model } = diagramProps;\r\n\r\n  const onClickOpenFile = e => {\r\n    const { diagram } = props;\r\n    const diagramProps = diagram.getDiagramProps();\r\n    const { controller } = diagramProps;\r\n  \r\n    browserOpenFile(\".json,.blinkmind,.bm\").then(txt => {\r\n      let obj = JSON.parse(txt);\r\n      let model = controller.run(\"deserializeModel\", { controller, obj });\r\n      diagram.openNewModel(model);\r\n    });\r\n  };\r\n\r\n  const onClickExportJson = e => {\r\n\r\n    const { diagram } = props;\r\n    const diagramProps = diagram.getDiagramProps();\r\n    const { controller, model } = diagramProps;\r\n\r\n    const json = controller.run(\"serializeModel\", diagramProps);\r\n    const jsonStr = JSON.stringify(json);\r\n\r\n    const url = `data:text/plain,${encodeURIComponent(jsonStr)}`;\r\n    const title = controller.run(\"getTopicTitle\", {\r\n      ...diagramProps,\r\n      topicKey: model.rootTopicKey\r\n    });\r\n    downloadFile(url, `${title}.blinkmind`);\r\n  };\r\n\r\n  const onClickSearch = e => {\r\n  const { diagram } = props;\r\n  const diagramProps = diagram.getDiagramProps();\r\n  const { controller } = diagramProps;\r\n\r\n    controller.run(\"operation\", {\r\n      ...diagramProps,\r\n      opType: OpType.SET_FOCUS_MODE,\r\n      focusMode: FOCUS_MODE_SEARCH\r\n    });\r\n  };\r\n  return (\r\n    <div style={{ display: 'flex', ...(!match && { flexDirection: 'column' }), justifyContent: 'space-between', margin: '10px 20px', }}>\r\n      <Box component=\"div\" style={{ backgroundColor: 'white', flexGrow: 0, padding: '4px', ...(!matches && { marginBottom: '10px ' }), borderRadius: '40px', display: 'flex', alignContent: 'center', boxShadow: 'rgb(185 185 185) 0px 0px 9px 0px' }}>\r\n        <IconBtn onClick={() => navigate('/dashboard')}>\r\n          <ChevronLeftIcon />\r\n        </IconBtn>\r\n        <MapMenu />\r\n        <IconBtn>\r\n          <ErrorOutlineIcon />\r\n        </IconBtn>\r\n        <IconBtn>\r\n          <CloudDownloadIcon />\r\n        </IconBtn>\r\n        <Button variant=\"contained\" color='primary' startIcon={<StarOutlineIcon />} style={{ borderRadius: '40px', boxShadow: 'none' }}>Uprade Now</Button>\r\n      </Box>\r\n      <Box style={{ display: 'flex', alignContent: 'center' }}>\r\n        <IconBtn title='Add' style={{ margin: '3px', marginRight: '10px', backgroundColor: '#ffa000', color: 'white', boxShadow: 'rgb(185 185 185) 0px 0px 9px 0px' }}>\r\n          <AddIcon />\r\n        </IconBtn>\r\n        <Box component=\"div\" style={{ flex: 1, backgroundColor: 'white', padding: '4px', borderRadius: '40px', display: 'flex', alignContent: 'center', boxShadow: 'rgb(185 185 185) 0px 0px 9px 0px' }}>\r\n          <IconBtn title='Open folder' onClick={onClickOpenFile} >\r\n            <FolderOutlinedIcon />\r\n          </IconBtn>\r\n          <IconBtn title='Export Json file' onClick={onClickExportJson}>\r\n            <FileCopyOutlinedIcon />\r\n          </IconBtn>\r\n          <LayoutMenu title='Layout setting' diagram={diagram} />\r\n          <ThemeMenu title='Theme setting' diagram={diagram} />\r\n          <IconBtn title='Search' onClick={onClickSearch}>\r\n            <SearchIcon />\r\n          </IconBtn>\r\n          <IconBtn title='Undo' onClick={onClickUndo}>\r\n            <UndoIcon />\r\n          </IconBtn>\r\n          <IconBtn title='Redo' onClick={onClickRedo}>\r\n            <RedoIcon />\r\n          </IconBtn>\r\n          <Button variant=\"contained\" color='primary' startIcon={<StarOutlineIcon />} style={{ borderRadius: '40px', boxShadow: 'none' }}>Invite</Button>\r\n          <AccountMenu />\r\n        </Box>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\nfunction ThemeMenu(props) {\r\n  const { diagram } = props;\r\n  const diagramProps = diagram.getDiagramProps();\r\n  const { controller } = diagramProps;\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const onClickSetTheme = themeKey => e => {\r\n    controller.run(\"setTheme\", { ...diagramProps, themeKey });\r\n  };\r\n\r\n  const themes = [\r\n    [\"default\", defaultThemeImg],\r\n    [\"theme1\", theme1Img],\r\n    [\"theme2\", theme2Img],\r\n    [\"theme3\", theme3Img],\r\n    [\"theme4\", theme4Img]\r\n  ];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box style={{ display: 'flex', alignItems: 'center', textAlign: 'center' }}>\r\n        <IconBtn\r\n          aria-controls=\"theme-menu\"\r\n          aria-haspopup=\"true\"\r\n          onClick={handleClick}\r\n          aria-controls={open ? 'map-menu' : undefined}\r\n          aria-haspopup=\"true\"\r\n          aria-expanded={open ? 'true' : undefined}\r\n          variant='text'\r\n        >\r\n          <PaletteOutlinedIcon />\r\n        </IconBtn>\r\n      </Box>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        id=\"theme-menu\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        onClick={handleClose}\r\n        getContentAnchorEl={null}\r\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n        anchorOrigin={{ horizontal: 'center', vertical: 'bottom' }}\r\n      >\r\n        {themes.map(theme => (\r\n          <MenuItem\r\n            key={theme[0]}\r\n            onClick={onClickSetTheme(theme[0])}\r\n          >\r\n            <img src={theme[1]} alt={theme[0]} style={{ width: '350px', height: '80px' }} />\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction LayoutMenu(props) {\r\n  const { diagram } = props;\r\n  const diagramProps = diagram.getDiagramProps();\r\n  const { controller } = diagramProps;\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const onClickSetLayout = layoutDir => e => {\r\n    controller.run(\"setLayoutDir\", { ...diagramProps, layoutDir });\r\n  };\r\n\r\n  const layoutDirs = [\r\n    [\r\n      DiagramLayoutType.LEFT_AND_RIGHT,\r\n      \"Left And Right\",\r\n      <FormatAlignJustifyIcon />\r\n    ],\r\n    [DiagramLayoutType.LEFT_TO_RIGHT, \"Only Right\", <FormatAlignRightIcon />],\r\n    [DiagramLayoutType.RIGHT_TO_LEFT, \"Only Left\", <FormatAlignLeftIcon />]\r\n  ];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box style={{ display: 'flex', alignItems: 'center', textAlign: 'center' }}>\r\n        <IconBtn\r\n          aria-controls=\"layout-menu\"\r\n          aria-haspopup=\"true\"\r\n          onClick={handleClick}\r\n          aria-controls={open ? 'map-menu' : undefined}\r\n          aria-haspopup=\"true\"\r\n          aria-expanded={open ? 'true' : undefined}\r\n          variant='text'\r\n        >\r\n          <FormatAlignJustifyIcon />\r\n        </IconBtn>\r\n      </Box>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        id=\"layout-menu\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        onClick={handleClose}\r\n        getContentAnchorEl={null}\r\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n        anchorOrigin={{ horizontal: 'center', vertical: 'bottom' }}\r\n      >\r\n        {layoutDirs.map(dir => (\r\n          <MenuItem\r\n            key={dir[1]}\r\n            onClick={onClickSetLayout(dir[0])}\r\n          >\r\n            <ListItemIcon>\r\n              {dir[2]}\r\n            </ListItemIcon>\r\n            {dir[1]}\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction AccountMenu() {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  return (\r\n    <React.Fragment>\r\n      <Box style={{ display: 'flex', alignItems: 'center', textAlign: 'center' }}>\r\n        <Tooltip title=\"Account settings\">\r\n          <IconButton\r\n            onClick={handleClick}\r\n            size=\"small\"\r\n            style={{ ml: 2 }}\r\n            aria-controls={open ? 'account-menu' : undefined}\r\n            aria-haspopup=\"true\"\r\n            aria-expanded={open ? 'true' : undefined}\r\n          >\r\n            <Avatar style={{ width: 32, height: 32 }}>M</Avatar>\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        id=\"account-menu\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        onClick={handleClose}\r\n        PaperProps={{\r\n          elevation: 0,\r\n          sx: {\r\n            overflow: 'visible',\r\n            filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n            mt: 1.5,\r\n            '& .MuiAvatar-root': {\r\n              width: 32,\r\n              height: 32,\r\n              ml: -0.5,\r\n              mr: 1,\r\n            },\r\n            '&:before': {\r\n              content: '\"\"',\r\n              display: 'block',\r\n              position: 'absolute',\r\n              top: 0,\r\n              right: 14,\r\n              width: 10,\r\n              height: 10,\r\n              bgcolor: 'background.paper',\r\n              transform: 'translateY(-50%) rotate(45deg)',\r\n              zIndex: 0,\r\n            },\r\n          },\r\n        }}\r\n        getContentAnchorEl={null}\r\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n      >\r\n        <MenuItem>\r\n          <Avatar /> Profile\r\n        </MenuItem>\r\n        <MenuItem>\r\n          <Avatar /> My account\r\n        </MenuItem>\r\n        <Divider />\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <PersonAddIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          Add another account\r\n        </MenuItem>\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <SettingsIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          Settings\r\n        </MenuItem>\r\n        <MenuItem>\r\n          <ListItemIcon>\r\n            <ExitToAppIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          Logout\r\n        </MenuItem>\r\n      </Menu>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction MapMenu() {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  return (\r\n    <React.Fragment>\r\n      <Box style={{ display: 'flex', alignItems: 'center', textAlign: 'center' }}>\r\n        <Tooltip title=\"Map settings\">\r\n          <Button\r\n            onClick={handleClick}\r\n            size=\"small\"\r\n            style={{ ml: 2 }}\r\n            aria-controls={open ? 'map-menu' : undefined}\r\n            aria-haspopup=\"true\"\r\n            aria-expanded={open ? 'true' : undefined}\r\n            variant='text'\r\n            color=\"primary\"\r\n            style={{ color: 'black' }}\r\n            endIcon={<KeyboardArrowDownIcon />}\r\n          >\r\n            My New Mind Map\r\n          </Button>\r\n        </Tooltip>\r\n      </Box>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        id=\"map-menu\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        onClick={handleClose}\r\n        PaperProps={{\r\n          elevation: 0,\r\n          sx: {\r\n            overflow: 'visible',\r\n            filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n            mt: 1.5,\r\n            '& .MuiAvatar-root': {\r\n              width: 32,\r\n              height: 32,\r\n              ml: -0.5,\r\n              mr: 1,\r\n            },\r\n            '&:before': {\r\n              content: '\"\"',\r\n              display: 'block',\r\n              position: 'absolute',\r\n              top: 0,\r\n              right: 14,\r\n              width: 10,\r\n              height: 10,\r\n              bgcolor: 'background.paper',\r\n              transform: 'translateY(-50%) rotate(45deg)',\r\n              zIndex: 0,\r\n            },\r\n          },\r\n        }}\r\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n      >\r\n        <MenuItem>\r\n          Recent Maps\r\n        </MenuItem>\r\n        <MenuItem>\r\n          My New Mind Map\r\n        </MenuItem>\r\n        <MenuItem>\r\n          Basic commands of Git\r\n        </MenuItem>\r\n      </Menu>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\n","import { Model, createKey } from \"@blink-mind/core\";\n\nexport const downloadFile = (url, filename) => {\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = filename;\n  link.click();\n};\n\nexport function generateSimpleModel() {\n  const rootKey = createKey();\n\n  return Model.create({\n    rootTopicKey: rootKey,\n    topics: [\n      {\n        key: rootKey,\n        blocks: [{ type: \"CONTENT\", data: \"MainTopic\" }]\n      }\n    ]\n  });\n}\n","export const HOT_KEY_NAME_SEARCH = 'DEFAULT_SEARCH';\nexport const FOCUS_MODE_SEARCH = 'FOCUS_MODE_SEARCH';\n","import React from \"react\";\nimport TopBar from \"./TopBar\";\nimport './Toolbar.css';\n\nfunction Toolbar(props) {\n  return (\n    <div>\n      <div style={{\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        left: 0,\n        zIndex: 9\n      }}>\n        <TopBar {...props} />\n      </div>\n    </div>\n  );\n}\n\nexport default Toolbar;\n","import React from \"react\";\nimport { Diagram } from \"@blink-mind/renderer-react\";\nimport RichTextEditorPlugin from \"@blink-mind/plugin-rich-text-editor\";\nimport { JsonSerializerPlugin } from \"@blink-mind/plugin-json-serializer\";\nimport { ThemeSelectorPlugin } from \"@blink-mind/plugin-theme-selector\";\nimport TopologyDiagramPlugin from \"@blink-mind/plugin-topology-diagram\";\nimport { TopicReferencePlugin, SearchPlugin } from \"@blink-mind/plugins\";\nimport Toolbar from \"./toolbar/toolbar\";\nimport { generateSimpleModel } from \"../../utils\";\nimport \"@blink-mind/renderer-react/lib/main.css\";\nimport debug from \"debug\";\nimport {\n  IconButton,\n} from '@material-ui/core';\nimport DeviceHubIcon from '@material-ui/icons/DeviceHub';\nimport FormatColorFillIcon from '@material-ui/icons/FormatColorFill';\nimport SentimentSatisfiedAltIcon from '@material-ui/icons/SentimentSatisfiedAlt';\n\n// const log = debug(\"app\");\n\nconst plugins = [\n  RichTextEditorPlugin(),\n  ThemeSelectorPlugin(),\n  TopicReferencePlugin(),\n  SearchPlugin(),\n  TopologyDiagramPlugin(),\n  JsonSerializerPlugin()\n];\n\nexport class Mindmap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initModel();\n  }\n\n  diagram;\n  diagramRef = ref => {\n    this.diagram = ref;\n    this.setState({});\n  };\n\n  initModel() {\n    const model = generateSimpleModel();\n    this.state = { model };\n  }\n\n  onClickUndo = e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run(\"undo\", props);\n  };\n\n  onClickRedo = e => {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    controller.run(\"redo\", props);\n  };\n\n  renderDiagram() {\n    return (\n      <Diagram\n        ref={this.diagramRef}\n        model={this.state.model}\n        onChange={this.onChange}\n        plugins={plugins}\n        devicehub={\n          <IconButton>\n            <DeviceHubIcon />\n          </IconButton>\n        }\n        format={\n          <IconButton>\n            <FormatColorFillIcon />\n          </IconButton>\n        }\n        emoji={\n          <IconButton>\n            <SentimentSatisfiedAltIcon />\n          </IconButton>\n        }\n      />\n    );\n  }\n\n  renderToolbar() {\n    const props = this.diagram.getDiagramProps();\n    const { controller } = props;\n    const canUndo = controller.run(\"canUndo\", props);\n    const canRedo = controller.run(\"canRedo\", props);\n    const toolbarProps = {\n      diagram: this.diagram,\n      onClickUndo: this.onClickUndo,\n      onClickRedo: this.onClickRedo,\n      canUndo,\n      canRedo\n    };\n    return <Toolbar {...toolbarProps} />;\n  }\n\n  onChange = (model, callback) => {\n    this.setState(\n      {\n        model\n      },\n      callback\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"mindmap\">\n        {this.diagram && this.renderToolbar()}\n        {this.renderDiagram()}\n      </div>\n    );\n  }\n}\n\nexport default Mindmap;\n","import { defaultTheme, ModelModifier, ThemeType } from '@blink-mind/core';\nimport { themeRandomColorSquare } from './themes';\nimport { theme1 } from './themes';\nimport { theme2 } from './themes';\nimport { theme3 } from './themes';\nimport { theme4 } from './themes';\n\nexport function ThemeSelectorPlugin() {\n  const themeMap = new Map<string, ThemeType>([\n    ['default', defaultTheme],\n    ['random-color-square', themeRandomColorSquare],\n    ['theme1', theme1],\n    ['theme2', theme2],\n    ['theme3', theme3],\n    ['theme4', theme4]\n  ]);\n  let currentThemeKey: string = null;\n  return {\n    getAllThemes(props) {\n      return themeMap;\n    },\n\n    setTheme(props) {\n      const { model, controller, themeKey } = props;\n      currentThemeKey = themeKey;\n      const allTheme = controller.run('getAllThemes', props);\n      if (!allTheme.has(themeKey)) {\n        throw new Error('setTheme: the theme key is not correct!');\n      }\n      const theme = allTheme.get(themeKey);\n      const newModel = ModelModifier.setTheme({ model, theme });\n      controller.change(newModel);\n    }\n  };\n}\n","import {\n  BaseModifierArg,\n  getAllSubTopicKeys,\n  Model,\n  ModelModifier,\n  OpType\n} from '@blink-mind/core';\nimport { Icon, PropKey } from '@blink-mind/renderer-react';\nimport { MenuDivider, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { AddReferenceTopicPanel } from './add-reference-topic-panel';\nimport {\n  EXT_DATA_KEY_TOPIC_REFERENCE,\n  EXT_KEY_TOPIC_REFERENCE,\n  FOCUS_MODE_SET_REFERENCE_TOPICS,\n  OP_TYPE_SET_REFERENCE_TOPICS,\n  OP_TYPE_START_SET_REFERENCE_TOPICS\n} from './utils';\n\nimport { IControllerRunContext } from '@blink-mind/core/src/interfaces';\nimport { List, Map } from 'immutable';\nimport { ExtDataReference, ReferenceRecord } from './ext-data-reference';\nimport { setReferenceTopicKeys } from './op-function';\nimport { TopicExtReference } from './topic-ext-reference';\nimport { TopicReferenceCheckbox } from './topic-reference-checkbox';\n\nexport function TopicReferencePlugin() {\n  let selectedTopicKeys = new Set();\n  function startSetReferenceTopics({ model, topicKey }: BaseModifierArg) {\n    const extData: ExtDataReference = model.getExtDataItem(\n      EXT_DATA_KEY_TOPIC_REFERENCE,\n      ExtDataReference\n    );\n\n    selectedTopicKeys = new Set(extData.getReferenceKeys(topicKey));\n\n    model = ModelModifier.focusTopic({\n      model,\n      topicKey,\n      focusMode: FOCUS_MODE_SET_REFERENCE_TOPICS\n    });\n    return model;\n  }\n\n  return {\n    customizeTopicContextMenu(props, next) {\n      const { controller } = props;\n      function onClickSetReferenceTopics(e) {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_START_SET_REFERENCE_TOPICS\n        });\n        controller.run('disableOperation', {\n          ...props,\n          whiteList: [OpType.TOGGLE_COLLAPSE]\n        });\n      }\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            key={EXT_KEY_TOPIC_REFERENCE}\n            icon={Icon('reference')}\n            text=\"Set Reference Topics\"\n            onClick={onClickSetReferenceTopics}\n          />\n        </>\n      );\n    },\n\n    getOpMap(props, next) {\n      const opMap = next();\n      opMap.set(OP_TYPE_START_SET_REFERENCE_TOPICS, startSetReferenceTopics);\n      opMap.set(OP_TYPE_SET_REFERENCE_TOPICS, setReferenceTopicKeys);\n      return opMap;\n    },\n\n    beforeOpFunction(props, next) {\n      let model: Model = next();\n      const { opType, topicKey } = props;\n      // 注意是在beforeOpFunction里面操作\n      if (\n        opType === OpType.DELETE_TOPIC &&\n        topicKey !== model.editorRootTopicKey\n      ) {\n        const allDeleteKeys = getAllSubTopicKeys(model, topicKey);\n        allDeleteKeys.push(topicKey);\n\n        let extData: ExtDataReference = model.getExtDataItem(\n          EXT_DATA_KEY_TOPIC_REFERENCE,\n          ExtDataReference\n        );\n        let reference = extData.reference;\n        // 注意这里要处理所有被删除的Key\n        allDeleteKeys.forEach((deleteKey: KeyType) => {\n          const referencedKeys = extData.getReferencedKeys(deleteKey);\n\n          // 处理被引用的部分\n          reference = reference.withMutations(reference => {\n            referencedKeys.forEach(v => {\n              reference.updateIn([v, 'keyList'], (keyList: List<KeyType>) =>\n                keyList.delete(keyList.indexOf(deleteKey))\n              );\n            });\n          });\n          // 处理引用的部分\n          if (reference.has(deleteKey)) {\n            reference = reference.delete(deleteKey);\n          }\n        });\n\n        extData = extData.set('reference', reference);\n        model = model.setIn(['extData', EXT_DATA_KEY_TOPIC_REFERENCE], extData);\n      }\n      return model;\n    },\n\n    renderDiagramCustomize(props: IControllerRunContext, next) {\n      const { model, controller } = props;\n      const zIndex =\n        controller.getValue(PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX) + 2;\n      const res = next();\n      if (model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS) {\n        const panelProps = {\n          ...props,\n          zIndex,\n          topicKey: model.focusKey,\n          key: 'AddReferenceTopicPanel'\n        };\n        res.push(<AddReferenceTopicPanel {...panelProps} />);\n      }\n      return res;\n    },\n\n    renderTopicContentOthers(props, next) {\n      const { model, topicKey, controller } = props;\n      const res = next();\n      res.push(\n        controller.run('renderTopicExtReference', {\n          ...props,\n          key: EXT_KEY_TOPIC_REFERENCE + '-icon'\n        })\n      );\n      if (\n        model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS &&\n        model.focusKey !== topicKey\n      ) {\n        const checkBoxProps = { ...props, key: 'checkbox', selectedTopicKeys };\n        const checkbox = <TopicReferenceCheckbox {...checkBoxProps} />;\n        res.push(checkbox);\n      }\n      return res;\n    },\n\n    renderTopicExtReference(props, next) {\n      return <TopicExtReference {...props} />;\n    },\n\n    clearSelectedReferenceKeys() {\n      selectedTopicKeys.clear();\n    },\n\n    getSelectedReferenceKeys() {\n      return Array.from(selectedTopicKeys);\n    },\n\n    //TODO\n    deserializeExtDataItem(props, next) {\n      const { extDataKey, extDataItem } = props;\n      if (extDataKey === EXT_DATA_KEY_TOPIC_REFERENCE) {\n        let extDataReference = new ExtDataReference();\n        for (const key in extDataItem.reference) {\n          const item = extDataItem.reference[key];\n          const referenceRecord = new ReferenceRecord({\n            keyList: List(item.keyList),\n            dataMap: Map(item.dataMap)\n          });\n          extDataReference = extDataReference.update('reference', reference =>\n            reference.set(key, referenceRecord)\n          );\n        }\n        return extDataReference;\n      }\n      return next();\n    }\n  };\n}\n","import { OpType } from '@blink-mind/core';\nimport { HotKeysConfig } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { SearchPanel } from './search-panel';\nimport { FOCUS_MODE_SEARCH, HOT_KEY_NAME_SEARCH } from './utils';\n\nexport function SearchPlugin() {\n  let searchWord: string;\n  const setSearchWorld = s => {\n    searchWord = s;\n  };\n  return {\n    customizeHotKeys(props, next): HotKeysConfig {\n      const { controller, model } = props;\n      const hotKeys: HotKeysConfig = next();\n\n      hotKeys.globalHotKeys.set(HOT_KEY_NAME_SEARCH, {\n        label: 'search',\n        combo: 'ctrl + f',\n        onKeyDown: () => {\n          controller.run('operation', {\n            ...props,\n            opType: OpType.FOCUS_TOPIC,\n            topicKey: model.focusKey,\n            focusMode: FOCUS_MODE_SEARCH\n          });\n        }\n      });\n      return hotKeys;\n    },\n\n    renderDiagramCustomize(props, next) {\n      const res = next();\n      const { model } = props;\n      if (model.focusMode === FOCUS_MODE_SEARCH) {\n        const searchPanelProps = {\n          key: 'search-panel',\n          ...props,\n          setSearchWorld\n        };\n        res.push(<SearchPanel {...searchPanelProps} />);\n      }\n      return res;\n    }\n  };\n}\n","import * as React from 'react';\r\nimport MindMap from '../../components/mindmap';\r\n\r\nexport default function Mindmap() {\r\n  return (\r\n    <div>\r\n      <MindMap />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import * as React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Avatar\r\n} from '@material-ui/core';\r\nimport { selectAuthItem } from 'store/selectors';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: '20px'\r\n  }\r\n}));\r\n\r\nexport default function General() {\r\n  const classes = useStyles();\r\n  const selectAuth = useSelector(selectAuthItem('currentUser'));\r\n  const currentUser = selectAuth.data;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography variant=\"h5\" noWrap style={{marginTop: '10px'}}>\r\n        Personal Details\r\n      </Typography>\r\n      <Box style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center', paddingTop: '20px' }}>\r\n        <Box style={{ flex: 2 / 3, display: 'flex', flexDirection: 'column', width: '60%' }}>\r\n          <TextField id=\"name\" label=\"Name\" variant=\"outlined\" style={{ margin: '10px' }} />\r\n          <TextField id=\"website\" label=\"Website\" variant=\"outlined\" style={{ margin: '10px' }} />\r\n          <TextField id=\"description\" label=\"Description\" variant=\"outlined\" style={{ margin: '10px' }} />\r\n          <Button variant=\"contained\" color='primary' style={{ margin: '20px', textAlign: 'center' }}>Save Change</Button>\r\n        </Box>\r\n        <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', width: '40%' }}>\r\n          <Avatar style={{ width: '130px', height: '130px', border: '5px double grey', '& img': { borderRadius: '100%' } }} src={currentUser.photoURL} />\r\n          <div style={{ textAlign: 'center', marginTop: '10px' }}>\r\n            My Avatar\r\n          </div>\r\n          <div style={{ width: '150px', textAlign: 'center', marginTop: '10px', color: 'grey' }}>\r\n            Your photo should be cool and may use transparency.\r\n          </div>\r\n        </Box>\r\n      </Box>\r\n    </div>\r\n  )\r\n}","import * as React from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: '20px'\r\n  }\r\n}));\r\n\r\nexport default function Password() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography variant=\"h5\" noWrap style={{marginTop: '10px'}}>\r\n        Password\r\n      </Typography>\r\n      <Box style={{ display: 'flex', flexDirection: 'column', width: '50%', margin: '30px' }}>\r\n        <TextField id=\"newpassword\" label=\"New Password\" variant=\"outlined\" style={{ margin: '10px' }} />\r\n        <TextField id=\"confirmpassword\" label=\"Confirm New Password\" variant=\"outlined\" style={{ margin: '10px' }} />\r\n        <Button variant=\"contained\" color='primary' style={{ margin: '20px', textAlign: 'center' }}>Save Change</Button>\r\n      </Box>\r\n      <Box>\r\n        <Typography variant=\"h5\" noWrap>\r\n          Email\r\n        </Typography>\r\n        <div style={{margin: '30px', color: 'grey', lineHeight: 2}}>\r\n          Email Address <br/>\r\n          Please set a password above in order to be able to <br/>\r\n          change your email\r\n        </div>\r\n        <TextField id=\"name\" label=\"alexey.khlebnikov.com\" variant=\"outlined\" disabled={true} style={{ margin: '10px' }} />\r\n      </Box>\r\n    </div>\r\n  )\r\n}","import { Outlet } from 'react-router-dom';\r\nimport * as React from 'react';\r\nimport { Box } from '@material-ui/core';\r\n\r\nexport default function Settings() {\r\n    return (\r\n        <Box\r\n            component=\"main\"\r\n            style={{ p: 3, mt: 10 }}\r\n            noValidate\r\n            autoComplete=\"off\"\r\n        >\r\n            Settings\r\n        </Box>\r\n    )\r\n}","import * as React from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Tab,\r\n  Tabs,\r\n  Box\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport classNames from 'classnames';\r\nimport General from './General';\r\nimport Password from './Password';\r\nimport Settings from './Settings';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    padding: 30\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: theme.spacing(5, 2),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n  },\r\n\r\n}));\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`account-tabpanel-${index}`}\r\n      aria-labelledby={`account-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box style={{ p: 3 }}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.number.isRequired,\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `account-tab-${index}`,\r\n    'aria-controls': `account-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function BasicTabs() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box component=\"main\" className={classNames(classes.root, '')}>\r\n      <div className={classNames(classes.drawerHeader)} />\r\n      <Box style={{ borderBottom: 1, borderColor: 'divider' }}>\r\n        <Tabs value={value} onChange={handleChange} centered variant=\"fullWidth\" aria-label=\"account tabs\">\r\n          <Tab label=\"General\" {...a11yProps(0)} />\r\n          <Tab label=\"Password & Email\" wrapped {...a11yProps(1)} />\r\n          <Tab label=\"Time & Language\" wrapped {...a11yProps(2)} />\r\n          <Tab label=\"Connected Accounts\" wrapped {...a11yProps(3)} />\r\n          <Tab label=\"Policies\" {...a11yProps(4)} />\r\n        </Tabs>\r\n      </Box>\r\n      <TabPanel value={value} index={0}>\r\n        <General />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <Password />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n      </TabPanel>\r\n      <Outlet />\r\n    </Box>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport MediaQuery from \"react-responsive\";\r\n\r\nfunction Responsive({ children, size }) {\r\n    let query = '(min-width: 768px)';\r\n    if (size === 'desktop') query = '(min-width: 1024px) ';\r\n    if (size === 'mobile') query = '(min-device-width: 320px) and (max-width: 767px)';\r\n    if (size === 'mobile+tablet') query = '(min-device-width: 320px) and (max-width: 1023px)';\r\n    if (size === 'tablet+desktop') query = '(min-width: 768px)';\r\n    if (size === 'tablet') query = '(min-width: 768px) and (max-width: 1023px)';\r\n    return (\r\n      <MediaQuery query={query}>\r\n        {children}\r\n      </MediaQuery>\r\n    );\r\n}\r\n\r\nexport default Responsive;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport Recaptcha from \"react-google-invisible-recaptcha\";\r\nimport * as Yup from 'yup';\r\nimport {\r\n  Button,\r\n  Paper,\r\n  Box,\r\n  Grid,\r\n  div,\r\n  TextField,\r\n  Checkbox,\r\n  Snackbar,\r\n  IconButton,\r\n  InputAdornment\r\n} from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\n\r\nimport Responsive from '../layout/Responsive';\r\nimport { actionLogin } from 'store/actions';\r\nimport { selectAuthItem } from 'store/selectors';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  main: {\r\n    height: '100vh'\r\n  },\r\n  nav: {\r\n    display: 'flex', flexWrap: 'wrap', alignItems: 'center', width: '100%', marginLeft: 'auto', marginRight: 'auto', padding: '20px 30px',\r\n    '& .logo': {\r\n      color: '#00AAFF', lineHeight: '140%', maxWidth: '100%',\r\n      '& img': { width: '110px' }\r\n    }\r\n  },\r\n  showSignup: {\r\n    flex: 1, display: 'flex', justifyContent: 'flex-end',\r\n    '& span': { cursor: 'pointer', color: '#00AAFF', textDecoration: 'none', '&:hove': {} }\r\n  },\r\n  section: {\r\n    alignItems: 'center',\r\n    paddingTop: '10px',\r\n    display: 'flex',\r\n    flexFlow: 'column',\r\n    justifyContent: 'flex-start',\r\n    padding: '30px 40px',\r\n    position: 'relative',\r\n    '& form': { textAlign: 'center' },\r\n    '& h2': { marginBottom: '20px', marginTop: '20px', textAlign: 'center', fontSize: '21px', color: 'grey' }\r\n  },\r\n  loginGoogle: {\r\n    display: 'flex',\r\n    margin: 'auto',\r\n    textDecoration: 'none',\r\n    padding: '11px 20px',\r\n    borderRadius: '24px',\r\n    boxShadow: '0px 3px 1px -2px rgb(0 0 0 / 20%)',\r\n    border: '1px solid rgba(0,0,0,0.1)',\r\n    backgroundColor: 'white',\r\n    height: 'auto',\r\n    cursor: 'pointer',\r\n    fontWeight: 700,\r\n    fontSize: '17px',\r\n    lineHeight: '24px',\r\n    color: '#00AAFF',\r\n    '& img': {\r\n      borderEadius: '3px',\r\n      width: '24px',\r\n      height: '24px',\r\n      marginRight: '10px',\r\n    },\r\n  },\r\n  rememberButton: {\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    flexWrap: 'nowrap',\r\n    alignItems: 'center',\r\n    marginTop: '10px'\r\n  },\r\n  loginButton: { width: '200px', borderRadius: 20 },\r\n}))\r\n\r\nfunction Copyright(props) {\r\n  return (\r\n    <div color=\"text.secondary\" align=\"center\" {...props} style={{ marginTop: '30px' }}>\r\n      {'Copyright © '}\r\n      <Link to=\"https://Mindmeister.com/\">\r\n        MindMeister\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function SignInSide(props) {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const formRef = useRef();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [recaptcha, setRecaptcha] = useState(null);\r\n  const [snackPack, setSnackPack] = useState([]);\r\n  const [snackOpen, setSnackOpen] = useState(false);\r\n  const [messageInfo, setMessageInfo] = useState(undefined);\r\n\r\n  const loginResult = useSelector(selectAuthItem('error'));\r\n\r\n  const handleClickShowPassword = () => setShowPassword(!showPassword);\r\n  const handleMouseDownPassword = () => setShowPassword(!showPassword);\r\n\r\n  const validationSchema = Yup.object().shape({\r\n    email: Yup.string()\r\n      .required('Email is required')\r\n      .email('Email is invalid'),\r\n    password: Yup.string()\r\n      .required('Password is required'),\r\n  });\r\n  const formOptions = { resolver: yupResolver(validationSchema) };\r\n\r\n  // get functions to build form with useForm() hook\r\n  const { register, handleSubmit, formState } = useForm(formOptions);\r\n  const { errors } = formState;\r\n\r\n  function onSubmit(data) {\r\n    // dispatch(actionLogin(data));\r\n    // recaptcha.reset();\r\n    sendRecaptcha();\r\n  }\r\n\r\n  function sendRecaptcha() {\r\n    recaptcha.execute();\r\n  }\r\n\r\n  function onResolved() {\r\n    // Process Data //\r\n    handleSubmit((data) => dispatch(actionLogin(data)))();\r\n    return\r\n  }\r\n\r\n  useEffect(() => {\r\n    const email = loginResult.email;\r\n    const password = loginResult.password;\r\n    if (email) setSnackPack((prev) => [...prev, { message: email, key: new Date().getTime() }]);\r\n    else if (password) setSnackPack((prev) => [...prev, { message: password, key: new Date().getTime() }]);\r\n\r\n  }, [loginResult])\r\n\r\n  useEffect(() => {\r\n    if (snackPack.length && !messageInfo) {\r\n      // Set a new snack when we don't have an active one\r\n      setMessageInfo({ ...snackPack[0] });\r\n      setSnackPack((prev) => prev.slice(1));\r\n      setSnackOpen(true);\r\n    } else if (snackPack.length && messageInfo && snackOpen) {\r\n      // Close an active snack when a new one is added\r\n      setSnackOpen(false);\r\n    }\r\n  }, [snackPack, messageInfo, snackOpen]);\r\n\r\n  const handleSnackClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setSnackOpen(false);\r\n  };\r\n\r\n  const handleSnackExited = () => {\r\n    setMessageInfo(undefined);\r\n  };\r\n\r\n  const loginLayer = (\r\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n      <TextField\r\n        name=\"email\"\r\n        label=\"Email\"\r\n        placeholder='Type your Email'\r\n        InputProps={{\r\n          style: {\r\n            borderRadius: '15px',\r\n          },\r\n          startAdornment: (\r\n            <InputAdornment position=\"start\">\r\n              <AccountCircleIcon />\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n        autoComplete=\"off\"\r\n        {...register('email')}\r\n        variant=\"outlined\"\r\n        error={errors.email ? true : false}\r\n        helperText={errors.email?.message}\r\n        color='secondary'\r\n        style={{ marginTop: '15px' }}\r\n      />\r\n      <TextField\r\n        name=\"password\"\r\n        label=\"Password\"\r\n        type={showPassword ? \"text\" : \"password\"}\r\n        placeholder='Type our Password'\r\n        InputProps={{\r\n          style: {\r\n            borderRadius: '15px'\r\n          },\r\n          startAdornment: (\r\n            <InputAdornment position=\"start\">\r\n              <VpnKeyIcon />\r\n            </InputAdornment>\r\n          ),\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"toggle password visibility\"\r\n                onClick={handleClickShowPassword}\r\n                onMouseDown={handleMouseDownPassword}\r\n              >\r\n                {showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n              </IconButton>\r\n            </InputAdornment>\r\n          )\r\n        }}\r\n        {...register('password')}\r\n        variant=\"outlined\"\r\n        error={errors.password ? true : false}\r\n        helperText={errors.password?.message}\r\n        color='secondary'\r\n        style={{ marginTop: '15px' }}\r\n      />\r\n    </div>\r\n  )\r\n\r\n  const bodylayer = (\r\n    <>\r\n      <div component=\"nav\" className={classes.nav}>\r\n        <a className='logo' href='https://www.mindmeister.com' title='Mindmeister'>\r\n          <img src='assets/images/logo/logo.svg' alt='Mindmerster Logo' />\r\n        </a>\r\n        <div id='show-signup' className={classes.showSignup}>\r\n          <span onClick={() => navigate('/register')} >Sign Up</span>\r\n        </div>\r\n      </div>\r\n      <Box>\r\n        <Box\r\n          component=\"main\"\r\n          autoComplete=\"off\"\r\n        >\r\n          <div>\r\n            <div id=\"site-flash-messages\">\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h1 style={{ textAlign: 'center', fontWeight: 700 }}>Log In</h1>\r\n          </div>\r\n          <Box\r\n            component={'section'} className={classes.section}\r\n          >\r\n            <form onSubmit={handleSubmit(onSubmit)} ref={formRef}>\r\n              <button type=\"submit\" className={classes.loginGoogle}>\r\n                <img src=\"assets/images/logo/google_logo.svg\" alt='google_logo'/>\r\n                <span>Log in with Google</span>\r\n              </button>\r\n              <h2>\r\n                or with your MindMeister account\r\n              </h2>\r\n              {loginLayer}\r\n              <div className={classes.rememberButton} >\r\n                <Checkbox style={{ inputProps: { ariaLabel: 'Checkbox demo' } }} />\r\n                <span>Remember me</span>\r\n              </div>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                className={classes.loginButton}\r\n                color='secondary'\r\n              >\r\n                Log In\r\n              </Button>\r\n              <Copyright />\r\n            </form>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n\r\n  const getLoginLayout = isMobile =>\r\n    <Grid container component=\"main\" className={classes.main}>\r\n      {\r\n        isMobile ?\r\n          <>\r\n            <Grid\r\n              item\r\n              xs={false}\r\n              sm={4}\r\n              md={7}\r\n              style={{\r\n                backgroundImage: 'url(https://source.unsplash.com/random)',\r\n                backgroundRepeat: 'no-repeat',\r\n                backgroundColor: (t) =>\r\n                  t.palette.mode === 'light' ? t.palette.grey[50] : t.palette.grey[900],\r\n                backgroundSize: 'cover',\r\n                backgroundPosition: 'center',\r\n              }}\r\n            />\r\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\r\n              {bodylayer}\r\n            </Grid>\r\n\r\n          </>\r\n          :\r\n          <Box style={{ width: '100%' }}>\r\n            {bodylayer}\r\n          </Box>\r\n      }\r\n      <Recaptcha\r\n        ref={ref => setRecaptcha(ref)}\r\n        secureKey=\"6LfTw_4dAAAAAHOjPrtusI5alBPpYu2lW5yW7P1n\"\r\n        sitekey=\"6LfTw_4dAAAAAJWeqtDrom6-GCX2ujbX6BDxRNU0\"\r\n        onResolved={onResolved}\r\n      />\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\"\r\n        }}\r\n        key={messageInfo ? messageInfo.key : undefined}\r\n        open={snackOpen}\r\n        autoHideDuration={6000}\r\n        onClose={handleSnackClose}\r\n        TransitionProps={{ onExited: handleSnackExited }}\r\n        action={\r\n          <React.Fragment>\r\n            <IconButton\r\n              aria-label=\"close\"\r\n              color=\"white\"\r\n              style={{ p: 0.5 }}\r\n              onClick={handleSnackClose}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <Alert onClose={handleSnackClose} severity=\"error\" style={{ width: '100%' }}>\r\n          {messageInfo ? messageInfo.message : undefined}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Grid >;\r\n\r\n  return (\r\n    <>\r\n      <Responsive size=\"mobile+tablet\">\r\n        {getLoginLayout(false)}\r\n      </Responsive>\r\n      <Responsive size=\"desktop\">\r\n        {getLoginLayout(true)}\r\n      </Responsive>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useRef } from 'react';\r\nimport {  useNavigate } from 'react-router-dom';\r\nimport {\r\n  CssBaseline,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  IconButton,\r\n  Button,\r\n  Checkbox,\r\n  useMediaQuery,\r\n  InputAdornment,\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as Yup from 'yup';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  main: {\r\n    height: '100vh'\r\n  },\r\n  nav: {\r\n    display: 'flex', flexWrap: 'wrap', alignItems: 'center', width: '100%', marginLeft: 'auto', marginRight: 'auto', padding: '20px 30px',\r\n    '& .logo': {\r\n      color: '#00AAFF', lineHeight: '140%', maxWidth: '100%',\r\n      '& img': { width: '110px' }\r\n    }\r\n  },\r\n  showSignup: {\r\n    flex: 1, display: 'flex', justifyContent: 'flex-end',\r\n    '& span': { cursor: 'pointer', color: '#00AAFF', textDecoration: 'none', '&:hove': {} }\r\n  },\r\n  section: {\r\n    alignItems: 'center',\r\n    paddingTop: '10px',\r\n    display: 'flex',\r\n    flexFlow: 'column',\r\n    justifyContent: 'flex-start',\r\n    padding: '30px 40px',\r\n    position: 'relative',\r\n    '& form': { textAlign: 'center' },\r\n    '& h2': { marginBottom: '20px', marginTop: '20px', textAlign: 'center', fontSize: '21px', color: 'grey' }\r\n  },\r\n  loginGoogle: {\r\n    display: 'flex',\r\n    margin: 'auto',\r\n    textDecoration: 'none',\r\n    padding: '11px 20px',\r\n    borderRadius: '24px',\r\n    boxShadow: '0 1px 2px 0 rgb(0 0 0 / 10%)',\r\n    border: '1px solid rgba(0,0,0,0.1)',\r\n    backgroundColor: 'white',\r\n    height: 'auto',\r\n    cursor: 'pointer',\r\n    fontWeight: 700,\r\n    fontSize: '17px',\r\n    lineHeight: '24px',\r\n    color: '#00AAFF',\r\n    '& img': {\r\n      borderEadius: '3px',\r\n      width: '24px',\r\n      height: '24px',\r\n      marginRight: '10px',\r\n    },\r\n  },\r\n  rememberButton: {\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    flexWrap: 'nowrap',\r\n    alignItems: 'center',\r\n    marginTop: '10px'\r\n  },\r\n  signupButton: { width: '200px', borderRadius: 20 },\r\n}))\r\n\r\nexport default function SignUp(props) {\r\n  const classes = useStyles();\r\n\r\n  const navigate = useNavigate();\r\n  const formRef = useRef();\r\n\r\n  const matches = useMediaQuery('(min-width:800px)');\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const handleClickShowPassword = () => setShowPassword(!showPassword);\r\n  const handleMouseDownPassword = () => setShowPassword(!showPassword);\r\n\r\n  const validationSchema = Yup.object().shape({\r\n    name: Yup.string()\r\n      .required('First Name is required'),\r\n    email: Yup.string()\r\n      .required('Email is required')\r\n      .email('Email is invalid'),\r\n    password: Yup.string()\r\n      .min(6, 'Password must be at least 6 characters')\r\n      .required('Password is required'),\r\n    acceptTerms: Yup.bool()\r\n      .oneOf([true], 'Accept Ts & Cs is required')\r\n  });\r\n  const formOptions = { resolver: yupResolver(validationSchema) };\r\n\r\n  // get functions to build form with useForm() hook\r\n  const { register, handleSubmit, formState } = useForm(formOptions);\r\n  const { errors } = formState;\r\n  function onSubmit(data) {\r\n    props.registerRequest(data);\r\n    return false;\r\n  }\r\n\r\n  const registerLayer = (\r\n    <form onSubmit={handleSubmit(onSubmit)} ref={formRef} style={{}}>\r\n      <div style={{ display: 'flex', flexDirection: 'column', }}>\r\n        <TextField\r\n          name=\"name\"\r\n          label=\"Name\"\r\n          placeholder='Type your Name'\r\n          InputProps={{\r\n            style: {\r\n              borderRadius: '10px',\r\n              height: '50px'\r\n            },\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <PersonIcon />\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          {...register('email')}\r\n          variant=\"outlined\"\r\n          error={errors.name ? true : false}\r\n          helperText={errors.name?.message}\r\n          color='secondary'\r\n          style={{ marginTop: '0px' }}\r\n        />\r\n        <TextField\r\n          name=\"email\"\r\n          label=\"Email\"\r\n          placeholder='Type your Email'\r\n          InputProps={{\r\n            style: {\r\n              borderRadius: '10px',\r\n              height: '50px'\r\n            },\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <AccountCircleIcon />\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          {...register('email')}\r\n          variant=\"outlined\"\r\n          error={errors.email ? true : false}\r\n          helperText={errors.email?.message}\r\n          color='secondary'\r\n          style={{ marginTop: '15px' }}\r\n        />\r\n        <TextField\r\n          name=\"password\"\r\n          label=\"Password\"\r\n          type={showPassword ? \"text\" : \"password\"}\r\n          placeholder='Type your Password'\r\n          InputProps={{\r\n            style: {\r\n              borderRadius: '10px',\r\n              height: '50px'\r\n            },\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <VpnKeyIcon />\r\n              </InputAdornment>\r\n            ),\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}\r\n                  onMouseDown={handleMouseDownPassword}\r\n                >\r\n                  {showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            )\r\n          }}\r\n          {...register('password')}\r\n          variant=\"outlined\"\r\n          error={errors.password ? true : false}\r\n          helperText={errors.password?.message}\r\n          color='secondary'\r\n          style={{ marginTop: '15px' }}\r\n        />\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <div style={{ display: 'flex', flexFlow: 'column', justifyContent: 'flex-start' }}>\r\n            <label style={{ display: 'flex' }}>\r\n              <div style={{ marginTop: '5px', fontSize: '15px' }}>\r\n                <Checkbox name='acceptTerms' {...register('acceptTerms')} id='acceptTerms' style={{ inputProps: { ariaLabel: 'Checkbox demo' } }} />\r\n                <span>I agree to the\r\n                  <a>Term </a>\r\n                  and\r\n                  <a> Privacy Poicy</a>\r\n                </span>\r\n                <Typography className='invalid-feedback' style={{ color: 'red', textAlign: 'center', fontSize: '15px' }}>{errors.acceptTerms?.message}</Typography>\r\n              </div>\r\n            </label>\r\n          </div>\r\n          <div style={{ display: 'flex', flexFlow: 'column', justifyContent: 'flex-start' }}>\r\n            <label style={{ display: 'flex' }}>\r\n              <div style={{\r\n                display: 'flex', marginTop: '5px', flexDirection: 'row', justifyContent: 'flex-start', alignItems: 'flex-start', fontSize: '15px'\r\n              }}>\r\n                <Checkbox style={{ inputProps: { ariaLabel: 'Checkbox demo' } }} />\r\n                <span>I agree to receive periodic product updates, offers, and promotions</span>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div style={{ textAlign: 'center' }}>\r\n          <Button\r\n            className={classes.signupButton}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color='primary'\r\n          >\r\n            Sign Up\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  )\r\n\r\n  return (\r\n      <>\r\n        <div component=\"nav\" className={classes.nav}>\r\n        <a className='logo' href='https://www.mindmeister.com' title='Mindmeister'>\r\n          <img src='assets/images/logo/logo.svg' alt='Mindmerster Logo' />\r\n        </a>\r\n        <div id='show-signup' className={classes.showSignup}>\r\n          <span onClick={() => navigate('/login')} >Back</span>\r\n        </div>\r\n      </div>\r\n        <Box component='main' style={{ maxWidth: '1024px', width: '100%', margin: '0 auto 20px auto' }}>\r\n          <CssBaseline />\r\n          <Box component='main' style={{ display: 'flex', flexDirection: 'column' }}>\r\n            <div className='ui-message-bar'>\r\n              <div id='site=flash-messages'></div>\r\n            </div>\r\n            <div className='signup-wrapper' style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', marginTop: '50px', padding: '0 20px' }}>\r\n              <div className='align-items-center' style={{ width: '340px', display: 'flex', flexDirection: 'column', }}>\r\n                <header>\r\n                  <h1 style={{ textAlign: 'center', fontWeight: 700, marginTop: 0 }}>Get Started</h1>\r\n                </header>\r\n                <h2 style={{ marginBottom: '20px', marginTop: 0, textAlign: 'center', fontSize: '21px', color: \"#8A9499\" }}>\r\n                  with one of these services\r\n                </h2>\r\n                <button\r\n                  type='submit'\r\n                  style={{\r\n                    display: 'flex', textDecoration: 'none', padding: '11px 20px', borderRadius: '24px', boxShadow: '0 1px 2px 0 rgb(0 0 0 / 10%)', border: '1px solid rgba(0,0,0,0.1)', backgroundColor: 'white', height: 'auto', cursor: 'pointer', fontWeight: 700, fontSize: '17px', lineHeight: '24px', color: '#00AAFF', justifyContent: 'center'\r\n                  }}>\r\n                  <img\r\n                    src='assets/images/logo/google_logo.svg' alt='google_logo'\r\n                    style={{ borderEadius: '3px', width: '24px', height: '24px', marginRight: '10px' }}\r\n                  />\r\n                  <span>Sign up with Google</span>\r\n                </button>\r\n              </div>\r\n              <div className='separator' style={{ position: 'relative', padding: '0 25px', ...(!matches && { backgroundColor: '#DCE2E6', height: '1px', margin: '70px 0', padding: 0, position: 'relative', textAlign: 'center', width: '100%' }) }}>\r\n                <div className='vertical-line' style={{ backgroundColor: '#DCE2E6', width: '1px', height: '100%', position: 'absolute', left: '50%', transform: 'translateX(-50%)', ...(!matches && { textAlign: 'center' }) }}></div>\r\n                <p style={{\r\n                  backgroundColor: '#DCE2E6',\r\n                  padding: '5px 10px',\r\n                  minWidth: '48px',\r\n                  borderRadius: '24px',\r\n                  fontSize: '24px',\r\n                  color: 'white',\r\n                  textAlign: 'center',\r\n                  display: 'inline-block',\r\n                  position: 'relative',\r\n                  margin: '100px 0',\r\n                  ...(!matches && { margin: 0, transform: 'translate(0, -50%)' })\r\n                }}>\r\n                  or\r\n                </p>\r\n              </div>\r\n              <div className='align-items-center' style={{ width: '340px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <img src=\"assets/images/logo/email.svg\" alt='email' style={{ width: '60px', maxWidth: '60px', marginBottom: '10px' }} />\r\n                <h2 style={{\r\n                  textAlign: 'center', fontSize: '21px', color: \"#8A9499\"\r\n                }}>\r\n                  with your email address\r\n                </h2>\r\n                {registerLayer}\r\n              </div>\r\n            </div>\r\n            <div className='justify-center' style={{ marginTop: '20px', marginBottom: '0px', textAlign: 'center', color: '#8A949' }}>\r\n              <a href='/account/login?product=1' style={{ color: '#00AAFF', textDecoration: 'none', '&:hove': {} }}>I already have an account</a>\r\n            </div>\r\n          </Box>\r\n        </Box>\r\n      </>\r\n  );\r\n}","import * as React from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nfunction NotReady(props) {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n\r\n    const onClick = (url) => () => {\r\n        navigate('/');\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\r\n                <div style={{ fontSize: '30px', fontWeight: 'bold', margin: '20px' }}>\r\n                    {`This page is not ready: ${location.pathname}`}\r\n                </div>\r\n                <a onClick={onClick('/')}>\r\n                    Go to Main page.\r\n                </a>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotReady;","import * as React from 'react';\r\nimport { useRoutes } from \"react-router-dom\";\r\nimport ProgressBar from \"./progressbar\";\r\nimport Layout from \"../containers/Layout\";\r\nimport AccountLayout from \"../containers/Layout/account\";\r\nimport Dashboard from \"../containers/Dashboard\";\r\nimport MindMap from \"../containers/MindMap\";\r\nimport Account from \"../containers/Account\";\r\nimport Settings from \"../containers/Account/Settings\";\r\nimport Login from \"../components/auth/Login\";\r\nimport Register from \"../components/auth/Register\";\r\nimport NotReady from 'containers/NotReady';\r\n\r\nexport const routes = [\r\n  { path: '/login', name: 'Login', key: 'login', icon: '', element: <Login /> },\r\n  { path: '/register', element: <Register /> },\r\n  {\r\n    path: '/',\r\n    name: '', key: '', icon: '',\r\n    element: <Layout />,\r\n    children: [\r\n      { path: '/', name: 'My Map', key: 'mymap', icon: '', element: <Dashboard /> },\r\n      { path: '/dashboard', name: 'My Map', key: 'mymap', icon: '', element: <Dashboard /> },\r\n      { path: '/recent', name: 'Recent', key: 'recent', icon: '', element: <Dashboard /> },\r\n      { path: '/public', name: 'Public', key: 'public', icon: '', element: <Dashboard /> },\r\n      { path: '/favorites', name: 'Favorites', key: 'favorite', icon: '', element: <Dashboard /> },\r\n      { path: '/trash', name: 'Trash', key: 'trash', icon: '', element: <Dashboard /> },\r\n    ]\r\n  },\r\n  { path: '/mindmap', name: 'MindMap', key: 'mindmap', icon: '', element: <MindMap /> },\r\n  {\r\n    path: '/account', name: 'Account', key: 'account', icon: '',\r\n    element: <AccountLayout />,\r\n    children: [\r\n      { path: '/account/me', name: 'Me', key: 'me', icon: '', element: <Account /> },\r\n      { path: '/account/settings', name: 'Settings', key: 'settings', icon: '', element: <Settings /> },\r\n    ]\r\n  },\r\n  { path: '*', name: 'ErrorPage', key: 'error_page', icon: '', element: <NotReady /> },\r\n]\r\n\r\nconst Element = () => {\r\n  let list = useRoutes(routes);\r\n  return (\r\n    <ProgressBar>\r\n      {list}\r\n    </ProgressBar>\r\n  );\r\n}\r\n\r\nexport default Element;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport * as Actions from 'store/actions';\r\n\r\nimport { bindActionCreators } from 'redux';\r\nimport jwtService from 'services/jwtService';\r\n\r\nclass Auth extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            checkingJwt: true\r\n        };\r\n    }\r\n\r\n    onAutoLogin = () => {\r\n        // call action to set userdata;\r\n        jwtService.signInWithToken()\r\n            .then(user => {\r\n                this.props.setUserData(user);\r\n                this.setState({ checkingJwt: false })\r\n            })\r\n    }\r\n    onAutoLogout = () => {\r\n        // call action to remove the user\r\n        this.props.logout();\r\n        this.setState({ checkingJwt: false })\r\n    }\r\n\r\n    componentDidMount() {\r\n        jwtService.on(\"onAutoLogin\", this.onAutoLogin);\r\n        jwtService.on(\"onAutoLogout\", this.onAutoLogout);\r\n        jwtService.init();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        jwtService.off(\"onAutoLogin\", this.onAutoLogin);\r\n        jwtService.off(\"onAutoLogout\", this.onAutoLogout);\r\n    }\r\n\r\n    render() {\r\n        const { children } = this.props;\r\n        \r\n        if (this.state.checkingJwt) return <div>Loading...</div>\r\n\r\n        return <>\r\n            {children}\r\n        </>\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators({\r\n        logout: Actions.actionLogout,\r\n        setUserData: Actions.actionSetUserData,\r\n    }, dispatch);\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Auth);\r\n","import React from \"react\";\r\nimport { useLocation, Navigate } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Authorization extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            accessGranted: true,\r\n        }\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        const { location, user } = props;\r\n        const { pathname, state: routeState } = location;\r\n        let accessGranted = !!user;\r\n        let redirect = null;\r\n\r\n        if (user) {\r\n            if (['/login', '/register'].includes(pathname)) {\r\n                accessGranted = false;\r\n                const redirectUrl = routeState && routeState.redirectUrl ? routeState.redirectUrl : '/';\r\n                redirect = { to: redirectUrl }\r\n            };\r\n        } else {\r\n            if (['/login', '/register'].includes(pathname)) accessGranted = true;\r\n            else {\r\n                redirect = { to: '/login', state: { redirectUrl: pathname } }\r\n            }\r\n        }\r\n\r\n        return {\r\n            accessGranted,\r\n            redirect\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return nextState.accessGranted !== this.state.accessGranted;\r\n    }\r\n\r\n    render() {\r\n        const { children } = this.props;\r\n        const { accessGranted, redirect } = this.state;\r\n        // console.info('Fuse Authorization rendered', accessGranted);\r\n        return accessGranted\r\n            ? <React.Fragment>{children}</React.Fragment>\r\n            : <Navigate to={redirect.to} state={redirect.state} />;\r\n    }\r\n}\r\n\r\n\r\nexport const withRouter = (Component) => {\r\n    const Wrapper = (props) => {\r\n        const location = useLocation();\r\n\r\n        return (\r\n            <Component\r\n                location={location}\r\n                {...props}\r\n            />\r\n        );\r\n    };\r\n\r\n    return Wrapper;\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        user: state.auth.currentUser\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Authorization));","import * as Actions from '../actions';\r\n\r\nconst initState = {\r\n    token: localStorage.getItem('jwt_access_token'),\r\n    currentUser: null,\r\n    success: false,\r\n    error: {\r\n        email: null,\r\n        password: null\r\n    }\r\n}\r\n\r\nconst auth = function (state = initState, action) {\r\n    switch (action.type) {\r\n        case Actions.TYPE_LOGOUT_USER:\r\n            return { ...state, currentUser: null, token: null }\r\n        case Actions.TYPE_SET_USER_DATA:\r\n            const newstate = { ...state, currentUser: action.user };\r\n            return newstate;\r\n        case Actions.TYPE_LOGIN_SUCCESS:\r\n            return { ...state, success: true }\r\n        case Actions.TYPE_LOGIN_ERROR:\r\n            console.log(action);\r\n            return { ...state, success: false, error: { ...state.error, email: action.error.email, password: action.error.password } }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default auth;","import { combineReducers } from \"redux\";\r\nimport auth from \"./auth\";\r\n\r\nconst reducers = combineReducers({\r\n    auth\r\n})\r\n\r\nexport default reducers;","import { applyMiddleware, createStore } from 'redux';\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport reducers from './reducers';\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunk));\r\n\r\nexport default store;","import * as React from 'react';\r\n\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport pink from '@material-ui/core/colors/pink';\r\n\r\nexport default {\r\n    palette: {\r\n        primary: blue,\r\n        secondary: pink\r\n    }\r\n}","import '@fake-db'\nimport React from \"react\";\nimport { StylesProvider, createGenerateClassName } from '@material-ui/styles';\nimport { createTheme, ThemeProvider } from '@material-ui/core';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { createBrowserHistory } from 'history';\nimport Element from \"./setup/routes\";\nimport Auth from './auth/Auth';\nimport Authorization from \"./auth/Authorization\";\nimport store from 'store';\nimport defaultTheme from 'setup/theme';\n\nconst theme = createTheme(defaultTheme);\n\nconst generateClassName = createGenerateClassName({\n  productionPrefix: 'c',\n});\n\nconst App = () => {\n  return (\n    <ThemeProvider theme={theme}>\n      <StylesProvider generateClassName={generateClassName}>\n        <Provider store={store}>\n          <Auth>\n            <Router history={createBrowserHistory()}>\n              <Authorization>\n                <Element />\n              </Authorization>\n            </Router>\n          </Auth>\n        </Provider>\n      </StylesProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport './App.css';\n\nlet debugNameSpaces = [\n  \"app\",\n  // \"node:*\",\n  'plugin:layout'\n];\n\nlocalStorage.debug = debugNameSpaces.join(\",\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/default.b18193fb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme1.2f59f00b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme2.4f8c4983.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme3.61c97910.jpg\";","module.exports = __webpack_public_path__ + \"static/media/theme4.1e21408c.jpg\";"],"sourceRoot":""}